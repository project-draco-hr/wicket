{
  tester.startPage(TestErrorPage.class);
  AjaxLink link=(AjaxLink)tester.getComponentFromLastRenderedPage("link");
  tester.createRequestCycle();
  String callbackUrl=((AjaxEventBehavior)link.getBehaviors().get(0)).getCallbackUrl().toString().replaceAll("&amp;","&");
  tester.setupRequestAndResponse();
  (tester.getServletRequest()).addHeader("Wicket-Ajax","Yes");
  tester.getWicketResponse().setAjax(tester.getWicketRequest().isAjax());
  tester.getServletRequest().setURL(callbackUrl);
  WebRequestCycle cycle=tester.createRequestCycle();
  cycle.request();
  tester.assertAjaxLocation();
}
