{
  application.setHomePage(Page1.class);
  application.mount(new IndexedParamUrlCodingStrategy("/page2",Page2.class));
  executeTest(Page1.class,"IndexedParamTest_ExpectedResult-1.html");
  application.setupRequestAndResponse();
  WebRequestCycle cycle=application.createRequestCycle();
  ((MockHttpServletRequest)application.getWicketRequest().getHttpServletRequest()).setURL("/WicketTester/WicketTester/page2/abc");
  application.processRequestCycle(cycle);
  assertEquals(Page2.class,application.getLastRenderedPage().getClass());
  String document=application.getServletResponse().getDocument();
  assertTrue(DiffUtil.validatePage(document,this.getClass(),"IndexedParamTest_ExpectedResult-2.html"));
}
