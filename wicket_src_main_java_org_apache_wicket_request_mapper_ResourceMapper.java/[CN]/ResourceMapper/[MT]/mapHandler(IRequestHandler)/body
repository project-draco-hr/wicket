{
  if ((requestHandler instanceof ResourceReferenceRequestHandler) == false)   return null;
  ResourceReferenceRequestHandler handler=(ResourceReferenceRequestHandler)requestHandler;
  if (resourceReference.getResource().equals(handler.getResource()) == false)   return null;
  List<String> path=new ArrayList<String>();
  path.addAll(Arrays.asList(mountSegments));
  PageParameters parameters=handler.getPageParameters();
  for (int index=0; index < parameters.getIndexedCount(); index++)   path.add(parameters.get(index).toString());
  List<PageParameters.NamedPair> namedParameters=parameters.getAllNamed();
  List<Url.QueryParameter> queryParams=new ArrayList<Url.QueryParameter>(namedParameters.size());
  for (  PageParameters.NamedPair namedParameter : namedParameters)   queryParams.add(new Url.QueryParameter(namedParameter.getKey(),namedParameter.getValue()));
  return new Url(path,queryParams);
}
