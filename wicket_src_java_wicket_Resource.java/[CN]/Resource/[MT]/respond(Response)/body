{
  try {
    final OutputStream out=response.getOutputStream();
    try {
      Streams.copy(resourceStream.getInputStream(),out);
    }
  finally {
      resourceStream.close();
      out.flush();
    }
  }
 catch (  SocketException se) {
    String message=se.getMessage();
    if (message != null && message.startsWith("Connection reset")) {
      if (log.isDebugEnabled()) {
        log.debug("Socket exception ignored for sending Resource response to client (ClientAbort)",se);
      }
    }
 else {
      throw new WicketRuntimeException("Unable to render resource stream " + resourceStream,se);
    }
  }
catch (  Exception e) {
    throw new WicketRuntimeException("Unable to render resource stream " + resourceStream,e);
  }
}
