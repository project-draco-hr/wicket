{
  List<MarkupElement> elems=new ArrayList<MarkupElement>();
  for (  MarkupElement elem : this.markupElements) {
    if (elem instanceof RawMarkup) {
      elems.add(elem);
    }
 else     if (elem instanceof ComponentTag) {
      elems.add(elem);
    }
 else {
      elems.addAll(((MarkupFragment)elem).getAllElementsFlat());
    }
  }
  return elems;
}
