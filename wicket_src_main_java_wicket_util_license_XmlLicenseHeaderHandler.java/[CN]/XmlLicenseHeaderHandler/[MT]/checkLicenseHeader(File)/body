{
  Revision revision=null;
  try {
    String header=extractLicenseHeader(file,0,17);
    if (header.startsWith("<?xml")) {
      header=header.substring(header.indexOf(LINE_ENDING) + LINE_ENDING.length());
      logger.debug("Header for " + file + ": "+ header);
    }
 else {
      logger.debug(file + " does not start with XML prolog");
      String[] headers=header.split(LINE_ENDING);
      header="";
      for (int i=0; i < 16 && i < headers.length; i++) {
        if (header.length() > 0) {
          header+=LINE_ENDING;
        }
        header+=headers[i];
      }
    }
    revision=Diff.diff(getLicenseHeader().split(LINE_ENDING),header.split(LINE_ENDING));
    logger.debug("License diff for " + file + ": "+ revision);
  }
 catch (  Exception e) {
    e.printStackTrace();
    Assert.fail(e.getMessage());
  }
  return revision.size() == 0;
}
