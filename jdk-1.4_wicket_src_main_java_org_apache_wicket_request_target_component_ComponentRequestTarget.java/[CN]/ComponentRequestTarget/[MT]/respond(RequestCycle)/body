{
  Page page=component.getPage();
  if (page != null) {
    page.startComponentRender(component);
  }
  if (component instanceof Page) {
    new PageRequestTarget((Page)component).respond(requestCycle);
  }
 else {
    try {
      component.attach();
      component.renderComponent();
    }
  finally {
      component.getPage().detach();
    }
  }
  if (page != null) {
    page.endComponentRender(component);
  }
}
