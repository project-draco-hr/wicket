{
  Page page=component.getPage();
  if (page != null) {
    page.startComponentRender(component);
  }
  if (component instanceof Page) {
    new PageRequestTarget((Page)component).respond(requestCycle);
  }
 else {
    try {
      if (component instanceof MarkupContainer) {
        MarkupContainer container=(MarkupContainer)component;
        container.visitChildren(IFeedback.class,new IVisitor(){
          public Object component(          Component component){
            ((IFeedback)component).updateFeedback();
            return IVisitor.CONTINUE_TRAVERSAL;
          }
        }
);
      }
      if (component instanceof IFeedback) {
        ((IFeedback)component).updateFeedback();
      }
      component.attach();
      component.renderComponent();
    }
  finally {
      component.getPage().detach();
    }
  }
  if (page != null) {
    page.endComponentRender(component);
  }
}
