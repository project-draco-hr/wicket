{
  GenericApplicationContext ctx=new GenericApplicationContext();
  String configLocation=portletapp.getWicketPortlet().getInitParameter("contextConfigLocation");
  Resource resource=null;
  try {
    resource=new UrlResource(ResourceUtils.getURL(configLocation));
  }
 catch (  FileNotFoundException e) {
    throw new RuntimeException(e.getMessage());
  }
  new XmlBeanDefinitionReader(ctx).loadBeanDefinitions(resource);
  ctx.refresh();
  portletapp.setMetaData(CONTEXT_KEY,new ApplicationContextHolder(ctx));
  InjectorHolder.setInjector(new AnnotSpringInjector(new ContextLocator()));
}
