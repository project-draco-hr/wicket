{
  this.filterContext=filterContext;
  HttpServletRequest servletRequest=request.getHttpServletRequest();
  portletConfig=(PortletConfig)servletRequest.getAttribute("javax.portlet.config");
  portletRequest=(PortletRequest)servletRequest.getAttribute("javax.portlet.request");
  portletResponse=(PortletResponse)servletRequest.getAttribute("javax.portlet.response");
  wicketUrlPortletParameter=(String)portletRequest.getAttribute(WicketPortlet.WICKET_URL_PORTLET_PARAMETER_ATTR);
  ajax=request.isAjax();
  resourceRequest=portletRequest.getAttribute(PortletRequest.LIFECYCLE_PHASE).equals(PortletRequest.RESOURCE_PHASE);
  mimeResponse=resourceRequest || portletRequest.getAttribute(PortletRequest.LIFECYCLE_PHASE).equals(PortletRequest.RENDER_PHASE) ? (MimeResponse)portletResponse : null;
  embedded=!(ajax || resourceRequest);
  headerResponse=embedded ? newPortletHeaderResponse(response) : null;
}
