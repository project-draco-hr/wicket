{
  final Iterator iterator=application.getResourceSettings().getStringResourceLoaders().iterator();
  String string=null;
  while (iterator.hasNext() && (string == null)) {
    IStringResourceLoader loader=(IStringResourceLoader)iterator.next();
    String prefix=path;
    if ((searchStack != null) && (searchStack.size() > 0)) {
      for (int i=searchStack.size() - 1; (i >= 0) && (string == null); i--) {
        Class clazz=(Class)searchStack.get(i);
        string=loader.loadStringResource(clazz,key,locale,style);
        if ((string == null) && (path != null) && (prefix.length() > 0)) {
          string=loader.loadStringResource(clazz,prefix + '.' + key,locale,style);
          if (string == null) {
            prefix=Strings.afterFirst(prefix,'.');
          }
        }
      }
    }
 else {
      string=loader.loadStringResource(null,key,locale,style);
      if ((string == null) && (path != null) && (prefix.length() > 0)) {
        string=loader.loadStringResource(null,prefix + '.' + key,locale,style);
      }
    }
  }
  return string;
}
