{
  final String radio1="radio1-selection";
  MockModelObject modelObject=new MockModelObject();
  Model<String> model=new Model<String>();
  MockPage page=new MockPage();
  final Form<MockModelObject> form=new Form<MockModelObject>("form",new CompoundPropertyModel<MockModelObject>(modelObject)){
    private static final long serialVersionUID=1L;
    @Override public String getMarkupId(){
      return "foo";
    }
  }
;
  final RadioGroup<String> group=new RadioGroup<String>("prop1");
  final WebMarkupContainer container=new WebMarkupContainer("container");
  final Radio<String> choice1=new Radio<String>("radio1",new Model<String>(radio1));
  final Radio<String> choice2=new Radio<String>("prop2");
  final RadioGroup<String> group2=new RadioGroup<String>("group2",model);
  final Radio<String> choice3=new Radio<String>("radio3",new Model<String>(radio1));
  page.add(form);
  form.add(group);
  group.add(container);
  container.add(choice1);
  group.add(choice2);
  form.add(group2);
  group2.add(choice3);
  modelObject.setProp1(radio1);
  form.onFormSubmitted();
  assertTrue("group: running with nothing selected - model must be set to null",modelObject.getProp1() == null);
  assertTrue("group2: running with nothing selected - model must be set to null",model.getObject() == null);
  tester.getRequest().getPostParameters().setParameterValue(group.getInputName(),choice1.getValue());
  tester.getRequest().getPostParameters().setParameterValue(group2.getInputName(),choice3.getValue());
  tester.applyRequest();
  form.onFormSubmitted();
  assertEquals("group: running with choice1 selected - model must be set to value of radio1",modelObject.getProp1(),choice1.getDefaultModelObject());
  assertEquals("group2: running with choice3 selected - model must be set to value of radio1",model.getObject(),choice3.getDefaultModelObject());
  tester.getRequest().getPostParameters().setParameterValue(group.getInputName(),choice2.getValue());
  tester.applyRequest();
  form.onFormSubmitted();
  assertEquals("group: running with choice2 selected - model must be set to value of radio2",modelObject.getProp1(),choice2.getDefaultModelObject());
  tester.getRequest().getPostParameters().setParameterValue(group2.getInputName(),choice1.getValue());
  tester.applyRequest();
  try {
    form.onFormSubmitted();
    fail("group2: ran with an invalid choice selected but did not fail");
  }
 catch (  WicketRuntimeException e) {
  }
}
