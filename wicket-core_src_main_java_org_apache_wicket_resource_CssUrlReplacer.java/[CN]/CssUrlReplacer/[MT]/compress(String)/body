{
  Matcher matcher=CssUrlReplacer.urlPattern.matcher(original);
  while (matcher.find()) {
    Collection<String> pageNames=this.pageNames.keySet();
    for (    String pageName : pageNames) {
      try {
        Class<Page> pageClass=(Class<Page>)Class.forName(pageName);
        String url=matcher.group(1);
        if (!url.contains("/")) {
          URL urlResource=pageClass.getResource(url);
          if (urlResource != null) {
            PackageResourceReference packageResourceReference=new PackageResourceReference(pageClass,url);
            String replacedUrl=RequestCycle.get().urlFor(packageResourceReference,null).toString();
            StringBuilder urlBuilder=new StringBuilder();
            urlBuilder.append("url('");
            urlBuilder.append(replacedUrl);
            urlBuilder.append("')");
            original=matcher.replaceFirst(urlBuilder.toString());
          }
        }
      }
 catch (      Exception e) {
        throw new WicketRuntimeException("A problem occurred during CSS url replacement.",e);
      }
    }
  }
  return original;
}
