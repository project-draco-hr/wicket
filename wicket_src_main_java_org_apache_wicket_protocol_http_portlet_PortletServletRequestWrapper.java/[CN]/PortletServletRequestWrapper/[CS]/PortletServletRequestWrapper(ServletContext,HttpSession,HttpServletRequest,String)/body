{
  super(request);
  session=proxiedSession;
  if (proxiedSession == null) {
    session=request.getSession(false);
  }
  servletPath=makeServletPath(filterPath);
  if ((contextPath=(String)request.getAttribute("javax.servlet.include.context_path")) != null) {
    requestURI=(String)request.getAttribute("javax.servlet.include.request_uri");
    queryString=(String)request.getAttribute("javax.servlet.include.query_string");
  }
 else   if ((contextPath=(String)request.getAttribute("javax.servlet.forward.context_path")) != null) {
    requestURI=(String)request.getAttribute("javax.servlet.forward.request_uri");
    queryString=(String)request.getAttribute("javax.servlet.forward.query_string");
  }
 else {
    contextPath=request.getContextPath();
    requestURI=request.getRequestURI();
    queryString=request.getQueryString();
  }
}
