{
  final IResource resource=getResource();
  if (resource == null) {
    throw new WicketRuntimeException("Could not get resource");
  }
 else {
    try {
      final OutputStream out=new BufferedOutputStream(httpServletResponse.getOutputStream());
      try {
        Streams.writeStream(new BufferedInputStream(resource.getInputStream()),out);
      }
  finally {
        resource.close();
        out.flush();
      }
    }
 catch (    Exception e) {
      throw new WicketRuntimeException("Unable to render resource " + resource,e);
    }
  }
}
