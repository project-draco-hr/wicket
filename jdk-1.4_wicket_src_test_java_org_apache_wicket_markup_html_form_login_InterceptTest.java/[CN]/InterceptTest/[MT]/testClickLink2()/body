{
  application.setupRequestAndResponse();
  application.processRequestCycle();
  MockLoginPage loginPage=(MockLoginPage)application.getLastRenderedPage();
  assertEquals(((MyMockWebApplication)application.getApplication()).getLoginPage(),loginPage.getClass());
  application.setupRequestAndResponse();
  WebRequestCycle requestCycle=application.createRequestCycle();
  assertTrue(((MockLoginPage)application.getLastRenderedPage()).login("admin"));
  application.processRequestCycle(requestCycle);
}
