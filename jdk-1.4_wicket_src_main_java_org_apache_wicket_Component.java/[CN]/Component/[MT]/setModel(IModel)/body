{
  if (this.model != null) {
    this.model.detach();
  }
  IModel prevModel=this.model;
  if (prevModel instanceof IWrapModel) {
    prevModel=((IWrapModel)prevModel).getWrappedModel();
  }
  if (prevModel != model) {
    if (prevModel != null) {
      addStateChange(new ComponentModelChange(prevModel));
    }
    this.model=wrap(model);
  }
  modelChanged();
  return this;
}
