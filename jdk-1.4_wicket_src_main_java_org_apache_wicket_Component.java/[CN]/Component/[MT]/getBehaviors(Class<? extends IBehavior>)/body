{
  List<IBehavior> behaviors=getBehaviorsImpl();
  if (behaviors == null) {
    return Collections.emptyList();
  }
  List<IBehavior> subset=new ArrayList<IBehavior>(behaviors.size());
  for (Iterator<IBehavior> i=behaviors.iterator(); i.hasNext(); ) {
    Object behavior=i.next();
    if (type == null || type.isAssignableFrom(behavior.getClass())) {
      subset.add((IBehavior)behavior);
    }
  }
  return Collections.unmodifiableList(subset);
}
