{
  RequestCycle rc=RequestCycle.get();
  if (rc == null) {
    throw new IllegalStateException("This exception can only be thrown from within request processing cycle");
  }
 else {
    Response r=rc.getResponse();
    if (!(r instanceof WebResponse)) {
      throw new IllegalStateException("This exception can only be thrown when wicket is processing an http request");
    }
    rc.setRequestTarget(new RedirectRequestHandler(url));
  }
}
