{
  for (int i=0; i < size(); i++) {
    MarkupElement element=get(i);
    if (element instanceof MarkupFragment) {
      MarkupFragment frag=(MarkupFragment)element;
      if (frag.getTag().hasNoCloseTag()) {
        while (frag.size() > 1) {
          addMarkupElement(i + 1,frag.removeMarkupElement(frag.size() - 1));
        }
      }
 else {
        frag.handleUnclosedTags();
      }
    }
  }
}
