{
  int firstListItem=startIndex;
  int viewSize=Math.min(getViewSize(),pageable.getPageCount());
  int margin=getMargin();
  int currentPage=pageable.getCurrentPage();
  if (currentPage < (firstListItem + margin)) {
    firstListItem=currentPage - margin;
  }
 else   if ((currentPage >= (firstListItem + viewSize - margin))) {
    firstListItem=(currentPage + margin + 1) - viewSize;
  }
  if ((firstListItem + viewSize) >= pageable.getPageCount()) {
    firstListItem=pageable.getPageCount() - viewSize;
  }
  if (firstListItem < 0) {
    firstListItem=0;
  }
  if ((viewSize != getIterations()) || (startIndex != firstListItem)) {
    modelChanging();
    addStateChange(new StartIndexChange(startIndex));
    startIndex=firstListItem;
    setIterations(Math.min(viewSize,pageable.getPageCount()));
    modelChanged();
    removeAll();
  }
}
