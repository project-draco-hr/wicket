{
  final MarkupStream markupStream=new MarkupStream(getAssociatedMarkup(false));
  markupStream.setCurrentIndex(index);
  final ComponentTag tag=markupStream.getTag(false);
  if ((tag != null) && tag.isWicketHeadTag()) {
    final String headerId=Component.AUTO_COMPONENT_PREFIX + Classes.simpleName(markupClass) + getVariation()+ "Header"+ index;
    String scope=tag.getAttributes().getString(markupStream.getWicketNamespace() + ":scope");
    final HeaderPartContainer headerContainer=newHeaderPartContainer(parent,headerId,scope);
    headerContainer.setMyMarkupStream(markupStream);
    headerContainer.setRenderBodyOnly(true);
    return headerContainer;
  }
  throw new WicketRuntimeException("Programming error: expected a WicketTag: " + markupStream.toString());
}
