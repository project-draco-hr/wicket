{
  final XmlTag xmlTag=(XmlTag)getParent().nextTag();
  if (xmlTag == null) {
    return xmlTag;
  }
  final String namespace=this.markup.getWicketNamespace();
  ComponentTag tag=new ComponentTag(xmlTag);
  if (namespace.equalsIgnoreCase(xmlTag.getNamespace())) {
    tag.setWicketTag(true);
    String id=Component.AUTO_COMPONENT_PREFIX + tag.getName();
    if (requiresUniqueId.contains(tag.getName())) {
      id=id + this.index++;
    }
    tag.setId(id);
    if (wellKnownTagNames.contains(xmlTag.getName()) == false) {
      throw new ParseException("Unkown tag name with Wicket namespace: '" + xmlTag.getName() + "'. Might be you haven't installed the appropriate resolver?",tag.getPos());
    }
  }
  final String value=tag.getAttributes().getString(namespace + ":id");
  if (value != null) {
    if (value.trim().length() == 0) {
      throw new ParseException("The wicket:id attribute value must not be empty. May be unmatched quotes?!?",tag.getPos());
    }
    tag.setId(value);
  }
  return tag;
}
