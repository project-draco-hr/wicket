{
  while (stop == Boolean.FALSE) {
    while (pagesToSaveActive.isEmpty() && stop == false) {
      try {
        Thread.sleep(getSavingThreadSleepTime());
      }
 catch (      InterruptedException ignore) {
      }
    }
    for (Iterator i=pagesToSaveActive.entrySet().iterator(); i.hasNext(); ) {
      Map.Entry entry=(Map.Entry)i.next();
      String sessionId=(String)entry.getKey();
      List<SerializedPage> pages=(List<SerializedPage>)entry.getValue();
synchronized (pages) {
        try {
          flushPagesToSaveList(sessionId,pages);
        }
 catch (        Exception e) {
          log.error("Error flushing serialized pages from worker thread for session " + sessionId,e);
        }
        i.remove();
      }
    }
  }
  stop=null;
}
