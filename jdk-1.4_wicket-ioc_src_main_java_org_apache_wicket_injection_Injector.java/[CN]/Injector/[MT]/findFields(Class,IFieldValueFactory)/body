{
  List matched=new ArrayList();
  while (clazz != null && !isBoundaryClass(clazz)) {
    Field[] fields=clazz.getDeclaredFields();
    for (int i=0; i < fields.length; i++) {
      final Field field=fields[i];
      if (factory.supportsField(field)) {
        matched.add(field);
      }
    }
    clazz=clazz.getSuperclass();
  }
  return (Field[])matched.toArray(new Field[matched.size()]);
}
