{
  final String displayValue=(String)getConverter().convert(renderer.getDisplayValue(choice),String.class);
  buffer.append("\n<option ");
  if (isSelected(choice,index,selected)) {
    buffer.append("selected=\"selected\" ");
  }
  buffer.append("value=\"");
  buffer.append(renderer.getIdValue(choice,index));
  buffer.append("\">");
  String display=displayValue;
  if (localizeDisplayValues()) {
    display=getLocalizer().getString(displayValue,this,displayValue);
  }
  String escaped=Strings.escapeMarkup(display,false,true);
  buffer.append(escaped);
  buffer.append("</option>");
}
