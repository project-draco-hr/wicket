{
  final WebSession session=WebSession.getSession(webApplication,servletRequest);
  final WebRequest request=new WebRequest(servletRequest);
  final WebResponse response=webApplication.getSettings().getBufferResponse() ? new BufferedWebResponse(servletResponse) : new WebResponse(servletResponse);
  try {
    new WebRequestCycle(webApplication,session,request,response).respond();
  }
  finally {
    response.close();
  }
}
