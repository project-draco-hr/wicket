{
  getRequestCycle().setRequestTarget(new IRequestTarget(){
    public void detach(    RequestCycle requestCycle){
    }
    public void respond(    RequestCycle requestCycle){
      WebResponse r=(WebResponse)requestCycle.getResponse();
      r.setAttachmentHeader(fileName);
      try {
        r.write(new FileInputStream(file));
        r.setContentLength(file.length());
        r.detectContentType(requestCycle,fileName);
      }
 catch (      Exception e) {
        throw new WicketRuntimeException(e);
      }
    }
  }
);
}
