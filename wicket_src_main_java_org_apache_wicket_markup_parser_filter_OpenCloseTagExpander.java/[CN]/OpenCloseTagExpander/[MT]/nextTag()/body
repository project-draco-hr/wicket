{
  if (next != null) {
    MarkupElement tmp=next;
    next=null;
    return tmp;
  }
 else {
    ComponentTag tag=nextComponentTag();
    if (tag != null && tag.isOpenClose() && replaceForTags.contains(tag.getName().toLowerCase())) {
      tag.setType(XmlTag.OPEN);
      if (tag.getId() == null) {
        tag.setId(WicketMessageTagHandler.WICKET_MESSAGE_CONTAINER_ID);
        tag.setAutoComponentTag(true);
      }
      next=new ComponentTag(tag.getName(),XmlTag.CLOSE);
      next.setNamespace(tag.getNamespace());
      next.setOpenTag(tag);
    }
    return tag;
  }
}
