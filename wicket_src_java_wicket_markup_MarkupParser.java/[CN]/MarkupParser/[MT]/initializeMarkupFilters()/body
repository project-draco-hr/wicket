{
  this.markupFilterChain=xmlParser;
  appendMarkupFilter(new WicketTagIdentifier(markup));
  appendMarkupFilter(new TagTypeHandler());
  appendMarkupFilter(new HtmlHandler());
  appendMarkupFilter(new WicketRemoveTagHandler());
  appendMarkupFilter(new WicketLinkTagHandler());
  appendMarkupFilter(new WicketNamespaceHandler(markup));
  final MarkupResourceStream resource=markup.getResource();
  if (resource != null) {
    final ContainerInfo containerInfo=resource.getContainerInfo();
    if (containerInfo != null) {
      if (WicketMessageTagHandler.enable) {
        appendMarkupFilter(new WicketMessageTagHandler(containerInfo));
      }
      appendMarkupFilter(new BodyOnLoadHandler(null));
      if (Page.class.isAssignableFrom(containerInfo.getContainerClass())) {
        appendMarkupFilter(new HtmlHeaderSectionHandler(this.markup));
      }
    }
  }
}
