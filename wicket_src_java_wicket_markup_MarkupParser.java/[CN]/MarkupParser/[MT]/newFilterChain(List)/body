{
  IMarkupFilter filter=new WicketTagIdentifier(markup,xmlParser);
  filter=new TagTypeHandler(filter);
  filter=new HtmlHandler(filter);
  filter=new WicketRemoveTagHandler(filter);
  filter=new WicketLinkTagHandler(filter);
  if (getMarkupResourceStream() != null && getMarkupResourceStream().getContainerInfo() != null) {
    filter=new HeadForceTagIdHandler(filter,getMarkupResourceStream().getContainerInfo().getContainerClass());
  }
  MarkupResourceStream resource=markup.getResource();
  if ((resource != null) && (resource.getContainerInfo() != null)) {
    if (WicketMessageTagHandler.enable) {
      filter=new WicketMessageTagHandler(filter,resource.getContainerInfo());
    }
    filter=new BodyOnLoadHandler(filter);
    if (Page.class.isAssignableFrom(resource.getContainerInfo().getContainerClass())) {
      filter=new HtmlHeaderSectionHandler(tagList,filter);
    }
  }
  return filter;
}
