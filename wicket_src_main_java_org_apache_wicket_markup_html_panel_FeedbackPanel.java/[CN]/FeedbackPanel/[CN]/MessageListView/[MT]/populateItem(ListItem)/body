{
  final FeedbackMessage message=(FeedbackMessage)listItem.getModelObject();
  message.markRendered();
  final IModel<String> replacementModel=new Model<String>(){
    private static final long serialVersionUID=1L;
    /** 
 * Returns feedbackPanel + the message level, eg 'feedbackPanelERROR'. This is used
 * as the class of the li / span elements.
 * @see org.apache.wicket.model.IModel#getObject()
 */
    @Override public String getObject(){
      return getCSSClass(message);
    }
  }
;
  final Component label=newMessageDisplayComponent("message",message);
  final AttributeModifier levelModifier=new AttributeModifier("class",replacementModel);
  label.add(levelModifier);
  listItem.add(levelModifier);
  listItem.add(label);
}
