{
  String expectedEncrypted="ywKWg-Qpk7YQBiYCmj9MaAJSIV1gtssNinjiALijtet62VMQc2-sMK_RchttkidUpYM_cplXKeZSfGxBkvWzH_E_zWv4Ii7MNSm5nXKno7o/ywK6c/MK_c0/nji3c/Qpk1b/XKnba/c2-cd";
  PageParameters expectedParameters=new PageParameters();
  expectedParameters.add("namedKey1","namedValue1",INamedParameters.Type.MANUAL);
  expectedParameters.add("namedKey2","namedValue2",INamedParameters.Type.MANUAL);
  expectedParameters.set(0,"indexedValue1");
  expectedParameters.set(1,"indexedValue2");
  RenderPageRequestHandler renderPageRequestHandler=new RenderPageRequestHandler(new PageProvider(DummyHomePage.class,expectedParameters));
  Url url=mapper.mapHandler(renderPageRequestHandler);
  assertEquals(expectedEncrypted,url.toString());
  Request request=getRequest(url);
  IRequestHandler requestHandler=mapper.mapRequest(request);
  assertThat(requestHandler,instanceOf(RequestSettingRequestHandler.class));
  requestHandler=((RequestSettingRequestHandler)requestHandler).getDelegateHandler();
  assertThat(requestHandler,instanceOf(RenderPageRequestHandler.class));
  RenderPageRequestHandler handler=(RenderPageRequestHandler)requestHandler;
  assertEquals(DummyHomePage.class,handler.getPageClass());
  PageParameters actualParameters=handler.getPageParameters();
  assertEquals(expectedParameters,actualParameters);
}
