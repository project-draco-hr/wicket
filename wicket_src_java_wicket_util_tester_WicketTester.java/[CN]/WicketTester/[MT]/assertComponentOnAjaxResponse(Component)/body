{
  String failMessage="A component which is null could not have been added to the AJAX response";
  Assert.assertNotNull(failMessage,component);
  String ajaxResponse=getServletResponse().getDocument();
  failMessage="The Previous response was not an AJAX response. " + "You need to execute an AJAX event, using clickLink, before using this assert";
  boolean isAjaxResponse=ajaxResponse.startsWith("<?xml version=\"1.0\" encoding=\"UTF-8\"?><ajax-response>");
  Assert.assertTrue(failMessage,isAjaxResponse);
  String markupId=component.getMarkupId();
  failMessage="The component doesn't have a markup id, " + "which means that it can't have been added to the AJAX response";
  Assert.assertFalse(failMessage,Strings.isEmpty(markupId));
  boolean isComponentInAjaxResponse=ajaxResponse.matches(".*<component id=\"" + markupId + "\" ?>.*");
  failMessage="Component wasn't found in the AJAX response";
  Assert.assertTrue(failMessage,isComponentInAjaxResponse);
}
