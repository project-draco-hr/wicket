{
  if (url.startsWith("http://")) {
    int index=url.indexOf("/",7);
    url=url.substring(index);
  }
  this.url=url;
  if (url.startsWith(getContextPath())) {
    url=url.substring(getContextPath().length());
  }
  if (url.startsWith(getServletPath())) {
    url=url.substring(getServletPath().length());
  }
  int index=url.indexOf("?");
  if (index == -1) {
    path=url;
  }
 else {
    path=url.substring(0,index);
    String queryString=url.substring(index + 1);
    Map<String,String[]> params=new HashMap<String,String[]>();
    RequestUtils.decodeUrlParameters(queryString,params);
    parameters.putAll(params);
  }
}
