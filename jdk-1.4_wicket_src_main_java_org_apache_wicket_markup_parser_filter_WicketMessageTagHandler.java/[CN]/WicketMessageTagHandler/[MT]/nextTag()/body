{
  final ComponentTag tag=nextComponentTag();
  if ((tag == null) || tag.isClose()) {
    return tag;
  }
  final String wicketMessageAttribute=tag.getAttributes().getString(WICKET_MESSAGE_ATTRIBUTE_NAME);
  if ((wicketMessageAttribute != null) && (wicketMessageAttribute.trim().length() > 0)) {
    if (tag.getId() == null) {
      tag.setId(WICKET_MESSAGE_CONTAINER_ID);
      tag.setAutoComponentTag(true);
      tag.setModified(true);
    }
    tag.addBehavior(new AttributeLocalizer());
  }
  return tag;
}
