{
  int index=component.getBehaviorsRawList().indexOf(behaviour);
  if (index == -1) {
    throw new IllegalArgumentException("Behavior " + this + " was not registered with this component: "+ component.toString());
  }
  RequestParameters params=new RequestParameters();
  params.setBehaviorId(String.valueOf(index));
  if (request instanceof ServletWebRequest) {
    ServletWebRequest swr=(ServletWebRequest)request;
    int urlDepth=swr.getRequestParameters().getUrlDepth();
    params.setUrlDepth(urlDepth > -1 ? urlDepth : swr.getDepthRelativeToWicketHandler());
  }
  final IRequestTarget target=new BehaviorRequestTarget(component.getPage(),component,listener,params);
  return encodeUrlFor(target);
}
