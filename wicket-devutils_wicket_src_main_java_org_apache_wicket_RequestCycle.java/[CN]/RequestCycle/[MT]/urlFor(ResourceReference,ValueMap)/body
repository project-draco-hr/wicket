{
  RequestParameters requestParameters=new RequestParameters();
  requestParameters.setResourceKey(resourceReference.getSharedResourceKey());
  if (getApplication().getResourceSettings().getAddLastModifiedTimeToResourceReferenceUrl() && !Strings.isEmpty(resourceReference.getName())) {
    Time time=resourceReference.lastModifiedTime();
    if (time != null) {
      if (parameters == null) {
        parameters=new ValueMap();
        parameters.put("wicket:lm",new Long(time.getMilliseconds()));
      }
    }
  }
  requestParameters.setParameters(parameters);
  return encodeUrlFor(new SharedResourceRequestTarget(requestParameters));
}
