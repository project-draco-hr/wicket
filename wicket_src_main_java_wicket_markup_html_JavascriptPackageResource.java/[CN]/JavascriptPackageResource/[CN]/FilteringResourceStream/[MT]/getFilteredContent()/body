{
  IResourceStream stream=getOriginalResourceStream();
  try {
    byte ret[]=(byte[])cache.get();
    if (ret != null && timeStamp != null) {
      if (timeStamp.equals(stream.lastModifiedTime())) {
        return ret;
      }
    }
    int length=(int)stream.length();
    ByteArrayOutputStream out=new ByteArrayOutputStream(length > 0 ? length : 0);
    Streams.copy(stream.getInputStream(),out);
    stream.close();
    ret=filterContent(out.toByteArray());
    timeStamp=stream.lastModifiedTime();
    cache=new SoftReference(ret);
    return ret;
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
catch (  ResourceStreamNotFoundException e) {
    throw new RuntimeException(e);
  }
}
