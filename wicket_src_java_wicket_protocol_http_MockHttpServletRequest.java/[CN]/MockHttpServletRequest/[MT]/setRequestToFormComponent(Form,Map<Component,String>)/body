{
  setRequestToComponent(form);
  final Map<String,Component> valuesApplied=new HashMap<String,Component>();
  form.visitChildren(new Component.IVisitor(){
    public Object component(    final Component component){
      if (component instanceof FormComponent) {
        String value=values.get(component);
        if (value != null) {
          parameters.put(((FormComponent)component).getInputName(),(String)values.get(component));
          valuesApplied.put(component.getId(),component);
        }
      }
      return CONTINUE_TRAVERSAL;
    }
  }
);
  if (values.size() != valuesApplied.size()) {
    Map<Component,String> diff=new HashMap<Component,String>();
    diff.putAll(values);
    Iterator<String> iter=valuesApplied.keySet().iterator();
    while (iter.hasNext()) {
      diff.remove(iter.next());
    }
    log.error("Parameter mismatch: didn't find all components referenced in parameter 'values': " + diff.keySet());
  }
}
