{
  final ComponentTag tag=markupStream.getTag().mutable();
  checkComponentTag(tag,"img");
  tag.put("usemap","#" + getPath());
  renderComponentTag(tag);
  markupStream.next();
  final StringBuffer imageMap=new StringBuffer();
  imageMap.append("\n<map name=\"").append(getPath()).append("\"> ");
  for (Iterator<ShapeLink> iterator=shapeLinks.iterator(); iterator.hasNext(); ) {
    final ShapeLink shapeLink=iterator.next();
    imageMap.append('\n');
    imageMap.append(shapeLink.toString());
    getPage().componentRendered(shapeLink.link);
  }
  imageMap.append("\n</map>");
  getResponse().write(imageMap.toString());
}
