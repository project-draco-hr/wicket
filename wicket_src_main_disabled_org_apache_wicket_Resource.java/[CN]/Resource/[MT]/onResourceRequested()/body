{
  try {
    final RequestCycle cycle=RequestCycle.get();
    IResourceStream resourceStream=init();
    final WebResponse response=(WebResponse)cycle.getResponse();
    if (isCacheable()) {
      response.setLastModifiedTime(resourceStream.lastModifiedTime().getMilliseconds());
    }
 else {
      response.setLastModifiedTime(-1);
    }
    configureResponse(response);
    cycle.scheduleRequestHandlerAfterCurrent(new ResourceStreamRequestHandler(resourceStream));
  }
  finally {
    parameters.set(null);
  }
}
