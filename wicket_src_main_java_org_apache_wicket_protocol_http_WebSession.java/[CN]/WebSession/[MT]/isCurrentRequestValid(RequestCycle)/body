{
  WebRequest lockedRequest=(WebRequest)lockedRequestCycle.getRequest();
  if (lockedRequest.isAjax() == true) {
    return true;
  }
  if (IResourceListener.INTERFACE.equals(lockedRequest.getRequestParameters().getInterface())) {
    return true;
  }
  RequestCycle currentRequestCycle=RequestCycle.get();
  WebRequest currentRequest=(WebRequest)currentRequestCycle.getRequest();
  if (currentRequest.isAjax() == false) {
    return true;
  }
  String lockedPageId=Strings.firstPathComponent(lockedRequest.getRequestParameters().getComponentPath(),Component.PATH_SEPARATOR);
  String currentPageId=Strings.firstPathComponent(currentRequestCycle.getRequest().getRequestParameters().getComponentPath(),Component.PATH_SEPARATOR);
  int lockedVersion=lockedRequest.getRequestParameters().getVersionNumber();
  int currentVersion=currentRequest.getRequestParameters().getVersionNumber();
  if (currentPageId.equals(lockedPageId) && currentVersion == lockedVersion) {
    return false;
  }
  return true;
}
