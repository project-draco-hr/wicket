{
  Args.notNull(behavior,"behavior");
  Url url=Url.parse(behavior.getCallbackUrl().toString(),Charset.forName(request.getCharacterEncoding()));
  transform(url);
  request.setUrl(url);
  request.addHeader("Wicket-Ajax-BaseURL",url.toString());
  request.addHeader("Wicket-Ajax","true");
  if (behavior instanceof AjaxFormSubmitBehavior) {
    AjaxFormSubmitBehavior formSubmitBehavior=(AjaxFormSubmitBehavior)behavior;
    Form<?> form=formSubmitBehavior.getForm();
    getRequest().setUseMultiPartContentType(form.isMultiPart());
  }
  processRequest();
}
