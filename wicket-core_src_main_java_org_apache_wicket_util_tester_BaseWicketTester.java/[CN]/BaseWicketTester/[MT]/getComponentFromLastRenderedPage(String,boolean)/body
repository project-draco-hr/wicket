{
  if (componentInPage != null && componentInPage.isInstantiated) {
    path=componentInPage.component.getId() + ":" + path;
  }
  Component component=getLastRenderedPage().get(path);
  if (component == null) {
    fail("path: '" + path + "' does not exist for page: "+ getLastRenderedPage().getClass().getSimpleName());
    return null;
  }
  if (!wantVisibleInHierarchy || component.isVisibleInHierarchy()) {
    return component;
  }
  return null;
}
