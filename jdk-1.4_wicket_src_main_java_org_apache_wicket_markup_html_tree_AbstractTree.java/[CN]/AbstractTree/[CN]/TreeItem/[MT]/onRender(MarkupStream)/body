{
  if (this == rootItem && isRootLess() == true) {
    getResponse().write("<div style=\"display:none\" id=\"" + getMarkupId() + "\"></div>");
    markupStream.skipComponent();
  }
 else {
    final int index=markupStream.getCurrentIndex();
    super.onRender(markupStream);
    if (isRenderChildren()) {
      visitItemChildren(this,new IItemCallback(){
        public void visitItem(        TreeItem item){
          try {
            item.beforeRender();
            markupStream.setCurrentIndex(index);
            item.onRender(markupStream);
          }
  finally {
            item.afterRender();
          }
        }
      }
);
      setRenderChildren(false);
    }
  }
}
