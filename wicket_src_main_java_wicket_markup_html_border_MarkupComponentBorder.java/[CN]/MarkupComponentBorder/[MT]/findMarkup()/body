{
  final IResourceStreamLocator locator=Application.get().getResourceSettings().getResourceStreamLocator();
  final Session session=Session.get();
  MarkupResourceStream markupResourceStream=null;
  Class containerClass=getClass();
  while (containerClass != MarkupComponentBorder.class) {
    final IResourceStream resourceStream=locator.locate(containerClass,containerClass.getName().replace('.','/'),session.getStyle(),session.getLocale(),"html");
    if (resourceStream != null) {
      ContainerInfo ci=new ContainerInfo(containerClass,session.getLocale(),session.getStyle(),null,"html",null);
      markupResourceStream=new MarkupResourceStream(resourceStream,ci,containerClass);
    }
    containerClass=containerClass.getSuperclass();
  }
  MarkupFragment markup;
  try {
    markup=Application.get().getMarkupSettings().getMarkupParserFactory().newMarkupParser(markupResourceStream).readAndParse();
  }
 catch (  Exception e) {
    throw new WicketRuntimeException(e);
  }
  return markup;
}
