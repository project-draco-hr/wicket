{
  Object modelObject=listItem.getModelObject();
  if (modelObject instanceof List) {
    NestedList nested=new NestedList(listItem,"nested",(List)modelObject);
    listItem.add(nested);
    WebMarkupContainer row=new WebMarkupContainer(listItem,"row");
    row.setVisible(false);
    row.add(new WebMarkupContainer(row,"label"));
    listItem.add(row);
  }
 else {
    NestedList nested=new NestedList(listItem,"nested",null);
    nested.setVisible(false);
    listItem.add(nested);
    WebMarkupContainer row=new WebMarkupContainer(listItem,"row");
    row.add(new Label(row,"label",modelObject.toString()));
    listItem.add(row);
  }
}
