{
  if (isAllowSelectMultiple() == false && selectedNodes.size() > 0) {
    for (Iterator<Object> i=selectedNodes.iterator(); i.hasNext(); ) {
      Object current=i.next();
      if (current.equals(node) == false) {
        i.remove();
        for (        ITreeStateListener listener : listeners)         listener.nodeUnselected(current);
      }
    }
  }
  if (selected == true && selectedNodes.contains(node) == false) {
    selectedNodes.add(node);
    for (    ITreeStateListener listener : listeners)     listener.nodeSelected(node);
  }
 else   if (selected == false && selectedNodes.contains(node) == true) {
    selectedNodes.remove(node);
    for (    ITreeStateListener listener : listeners)     listener.nodeUnselected(node);
  }
}
