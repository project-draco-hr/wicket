{
  String targetId=target.getPath();
  AppendingStringBuffer b=new AppendingStringBuffer("\nCalendar.setup(\n{");
  b.append("\n\t\tinputField : \"").append(targetId).append("\",");
  b.append("\n\t\tbutton : \"").append(triggerButton.getPath()).append("\",");
  String pattern=null;
  if (dateConverter == null) {
    IConverter converter=target.getConverter();
    if (converter instanceof Converter) {
      ITypeConverter typeConverter=((Converter)converter).get(Date.class);
      if (typeConverter instanceof DateConverter) {
        dateConverter=(DateConverter)typeConverter;
      }
    }
    if (dateConverter == null)     dateConverter=new DateConverter();
  }
  DateFormat df=dateConverter.getDateFormat(target.getLocale());
  if (df instanceof SimpleDateFormat) {
    pattern=((SimpleDateFormat)df).toPattern();
  }
  b.append(settings.toScript(target.getLocale(),pattern));
  int last=b.length() - 1;
  if (',' == b.charAt(last)) {
    b.deleteCharAt(last);
  }
  b.append("\n});");
  return b;
}
