{
  Class<?> pageClass=getPageClass(requestHandler);
  if (pageClass != null) {
    if (hasSecureAnnotation(pageClass)) {
      return Protocol.HTTPS;
    }
 else {
      return Protocol.HTTP;
    }
  }
 else {
    return Protocol.PRESERVE_CURRENT;
  }
}
