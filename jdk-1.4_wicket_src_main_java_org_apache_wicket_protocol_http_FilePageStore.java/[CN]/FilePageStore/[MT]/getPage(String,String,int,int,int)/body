{
  if (versionNumber == -1 || ajaxVersionNumber == -1) {
    PageVersions versions=findPageVersion(sessionId,pagemapName,id,versionNumber);
    if (versions == null) {
      return null;
    }
 else {
      versionNumber=versions.versionid;
      ajaxVersionNumber=versions.ajaxversionid;
    }
  }
  SessionPageKey currentKey=new SessionPageKey(sessionId,id,versionNumber,ajaxVersionNumber,pagemapName,null);
  long t1=System.currentTimeMillis();
  byte[] bytes=testMap(currentKey);
  if (bytes != null) {
    return readPage(versionNumber,bytes);
  }
  long t2=System.currentTimeMillis();
  byte pageData[]=loadPage(currentKey);
  if (pageData != null) {
    Page page=readPage(versionNumber,pageData);
    if (page != null && log.isDebugEnabled()) {
      long t3=System.currentTimeMillis();
      log.debug("restoring page " + page.getClass() + "["+ page.getNumericId()+ ","+ page.getCurrentVersionNumber()+ "] size: "+ pageData.length+ " for session "+ sessionId+ " took "+ (t2 - t1)+ " miliseconds to read in and "+ (t3 - t2)+ " miliseconds to deserialize");
    }
    return page;
  }
 else {
    return null;
  }
}
