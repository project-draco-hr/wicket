{
  final ComponentTag tag=nextComponentTag();
  if (tag == null) {
    return tag;
  }
  final String wicketMessageAttribute=tag.getAttributes().getString(WICKET_MESSAGE_ATTRIBUTE_NAME);
  if ((wicketMessageAttribute != null) && (wicketMessageAttribute.trim().length() > 0)) {
    if (tag.getId() == null) {
      tag.setId(getClass().getSimpleName());
      tag.setRawWicketMessageTag(true);
    }
 else {
      tag.addBehavior(ATTRIBUTE_LOCALIZER);
    }
  }
  return tag;
}
