{
  if (!(markupStream.get() instanceof RawMarkup)) {
    return;
  }
  AppendingStringBuffer markup=readBodyMarkup(markupStream);
  int[] range=findLabelTextRange(markup);
  final int start=range[0];
  final int end=range[1];
  if (start < 0) {
    super.onComponentTagBody(markupStream,openTag);
    return;
  }
  String label=getLabelText();
  if (label != null) {
    markup=markup.replace(start,end,label);
    replaceComponentTagBody(markupStream,openTag,markup);
  }
 else {
    if (component instanceof FormComponent) {
      FormComponent<?> fc=(FormComponent<?>)component;
      String markupLabel=markup.substring(start,end);
      fc.setLabel(Model.of(markupLabel));
      super.onComponentTagBody(markupStream,openTag);
    }
  }
}
