{
  StringResponse markupHeaderResponse=new StringResponse();
  Response oldResponse=getResponse();
  RequestCycle.get().setResponse(markupHeaderResponse);
  try {
    boolean ret=super.renderNext(markupStream);
    getHeaderResponse().render(new PageHeaderItem(markupHeaderResponse.getBuffer()));
    return ret;
  }
  finally {
    RequestCycle.get().setResponse(oldResponse);
  }
}
