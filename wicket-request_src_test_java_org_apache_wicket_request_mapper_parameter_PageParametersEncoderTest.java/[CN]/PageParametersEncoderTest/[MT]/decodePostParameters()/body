{
  PageParametersEncoder encoder=new PageParametersEncoder();
  Request request=new Request(){
    @Override public Url getUrl(){
      return Url.parse("idx1/idx2?named1=value1&named2=value2");
    }
    @Override public Url getClientUrl(){
      return null;
    }
    @Override public Locale getLocale(){
      return null;
    }
    @Override public Charset getCharset(){
      return null;
    }
    @Override public Object getContainerRequest(){
      return null;
    }
    @Override public IRequestParameters getPostParameters(){
      return new PostParameters();
    }
  }
;
  PageParameters pageParameters=encoder.decodePageParameters(request);
  assertEquals("idx1",pageParameters.get(0).toOptionalString());
  assertEquals("idx2",pageParameters.get(1).toOptionalString());
  assertEquals("value1",pageParameters.get("named1").toOptionalString());
  assertEquals("value2",pageParameters.get("named2").toOptionalString());
  assertEquals("1",pageParameters.get("postOne").toOptionalString());
  assertEquals("2",pageParameters.getValues("postTwo").get(0).toOptionalString());
  assertEquals("2.1",pageParameters.getValues("postTwo").get(1).toOptionalString());
}
