{
  RequestCycle requestCycle=RequestCycle.get();
  ServletWebRequest request=(ServletWebRequest)requestCycle.getRequest();
  Meteor meteor=Meteor.build(request.getContainerRequest());
  String uuid=meteor.getAtmosphereResource().uuid();
  component.getPage().setMetaData(ATMOSPHERE_UUID,uuid);
  findEventBus().registerPage(uuid,component.getPage());
  meteor.addListener(this);
  String transport=request.getHeader(HeaderConfig.X_ATMOSPHERE_TRANSPORT);
  if (HeaderConfig.LONG_POLLING_TRANSPORT.equalsIgnoreCase(transport)) {
    meteor.suspend(-1,false);
  }
 else {
    meteor.suspend(-1);
  }
}
