{
  final MarkupStream markupStream=findMarkupStream();
  final int markupStart=markupStream.getCurrentIndex();
  final int size=getViewSize();
  if (size > 0) {
    if (optimizeRenderProcess == false) {
      removeAll();
    }
 else {
      final int maxIndex=firstIndex + size;
      for (final Iterator iterator=iterator(); iterator.hasNext(); ) {
        final ListItem child=(ListItem)iterator.next();
        if (child != null) {
          final int index=child.getIndex();
          if (index < firstIndex || index >= maxIndex) {
            iterator.remove();
          }
        }
      }
    }
    for (int i=0; i < size; i++) {
      final int index=firstIndex + i;
      ListItem listItem=(ListItem)get(Integer.toString(index));
      if (listItem == null) {
        listItem=newItem(index);
        onBeginPopulateItem(listItem);
        populateItem(listItem);
        add(listItem);
      }
      markupStream.setCurrentIndex(markupStart);
      renderItem(listItem,i >= (size - 1));
    }
  }
 else {
    removeAll();
    markupStream.skipComponent();
  }
}
