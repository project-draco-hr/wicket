{
  super.renderHead(component,response);
  response.render(JavaScriptHeaderItem.forReference(WicketWebSocketJQueryResourceReference.get()));
  PackageTextTemplate webSocketSetupTemplate=new PackageTextTemplate(WicketWebSocketJQueryResourceReference.class,"res/js/wicket-websocket-setup.js.tmpl");
  Map<String,Object> variables=Generics.newHashMap();
  int pageId=component.getPage().getPageId();
  variables.put("pageId",Integer.valueOf(pageId));
  Url baseUrl=component.getRequestCycle().getUrlRenderer().getBaseUrl();
  CharSequence ajaxBaseUrl=Strings.escapeMarkup(baseUrl.toString());
  variables.put("baseUrl",ajaxBaseUrl);
  String webSocketSetupScript=webSocketSetupTemplate.asString(variables);
  response.render(OnDomReadyHeaderItem.forScript(webSocketSetupScript));
}
