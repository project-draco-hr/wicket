{
  if (tag instanceof WicketTag) {
    WicketTag wtag=(WicketTag)tag;
    if (wtag.isMessageTag()) {
      String messageKey=wtag.getAttributes().getString("key");
      if ((messageKey == null) || (messageKey.trim().length() == 0)) {
        throw new MarkupException("Wrong format of <wicket:message key='xxx'>: attribute 'key' is missing");
      }
      final String value=container.getApplication().getResourceSettings().getLocalizer().getString(messageKey,container,"");
      final String id="_message_" + container.getPage().getAutoIndex();
      Component component=null;
      if ((value != null) && (value.trim().length() > 0)) {
        component=new MyLabel(id,value);
      }
 else {
        log.info("No value found for message key: " + messageKey);
        component=new WebMarkupContainer(id);
      }
      component.setRenderBodyOnly(container.getApplication().getMarkupSettings().getStripWicketTags());
      container.autoAdd(component,markupStream);
      return true;
    }
  }
  return false;
}
