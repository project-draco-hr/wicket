{
  super.onComponentTag(tag);
  CharSequence url=getURL();
  url=appendAnchor(tag,url);
  if (isLinkEnabled()) {
    if (tag.getName().equalsIgnoreCase("a") || tag.getName().equalsIgnoreCase("link") || tag.getName().equalsIgnoreCase("area")) {
      tag.put("href",Strings.replaceAll(url,"&","&amp;"));
      if (popupSettings != null) {
        tag.put("onclick",popupSettings.getPopupJavaScript());
      }
    }
 else     if (tag.getName().equalsIgnoreCase("script") || tag.getName().equalsIgnoreCase("style")) {
      tag.put("src",Strings.replaceAll(url,"&","&amp;"));
    }
 else {
      if (popupSettings != null) {
        popupSettings.setTarget("'" + url + "'");
        String popupScript=popupSettings.getPopupJavaScript();
        tag.put("onclick",popupScript);
      }
 else {
        tag.put("onclick","window.location.href='" + url + "';return false;");
      }
    }
    final CharSequence onClickJavaScript=getOnClickScript(url);
    if (onClickJavaScript != null) {
      tag.put("onclick",onClickJavaScript);
    }
  }
 else {
    disableLink(tag);
  }
  if (popupSettings != null) {
    IPageMap popupPageMap=popupSettings.getPageMap(this);
    if (popupPageMap != null) {
      tag.put("target",popupPageMap.getName());
    }
  }
}
