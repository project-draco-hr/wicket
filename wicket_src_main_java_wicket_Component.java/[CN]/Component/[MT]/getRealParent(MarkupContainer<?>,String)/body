{
  if (parent == null) {
    if (!(this instanceof Page)) {
      throw new WicketRuntimeException("Component without a parent is not allowed.");
    }
  }
 else   if (parent instanceof IAlternateParentProvider) {
    while (parent instanceof IAlternateParentProvider) {
      MarkupContainer<?> oldParent=parent;
      parent=((IAlternateParentProvider)parent).getAlternateParent(this.getClass(),id);
      if (parent == oldParent) {
        return parent;
      }
      if (!oldParent.contains(parent,true)) {
        throw new WicketRuntimeException("IAlternateParentProvider cannot return alternate parent containers that are outside its hierarchy.");
      }
    }
  }
  return parent;
}
