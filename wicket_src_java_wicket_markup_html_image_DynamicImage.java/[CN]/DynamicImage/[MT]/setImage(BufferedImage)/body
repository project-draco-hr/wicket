{
  try {
    out=new ByteArrayOutputStream();
    final ImageWriter writer=(ImageWriter)ImageIO.getImageWritersByFormatName(extension).next();
    writer.setOutput(ImageIO.createImageOutputStream(out));
    writer.write(image);
    setInputStream(new ByteArrayInputStream(out.toByteArray()));
  }
 catch (  IOException e) {
    throw new RenderException("Unable to convert image to stream",e);
  }
  return this;
}
