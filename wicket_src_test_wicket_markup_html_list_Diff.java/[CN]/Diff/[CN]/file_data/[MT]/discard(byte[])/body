{
  final int end=buffered_lines;
  int j=0;
  for (int i=0; i < end; ++i) {
    if (no_discards || discards[i] == 0) {
      undiscarded[j]=equivs[i];
      realindexes[j++]=i;
    }
 else {
      changed_flag[1 + i]=true;
    }
  }
  nondiscarded_lines=j;
}
