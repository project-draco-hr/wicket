{
  final Response response=requestCycle.getResponse();
  configure(requestCycle,response,resourceStream);
  try {
    if (resourceStream instanceof IResourceStreamWriter)     ((IResourceStreamWriter)resourceStream).write(response.getOutputStream());
 else     response.write(resourceStream.getInputStream());
  }
 catch (  ResourceStreamNotFoundException e) {
    requestCycle.setRequestTarget(new WebErrorCodeResponseTarget(HttpServletResponse.SC_NOT_FOUND));
  }
}
