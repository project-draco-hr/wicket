{
  this.markupFilterChain=xmlParser;
  registerMarkupFilter(new WicketTagIdentifier(this.markup));
  registerMarkupFilter(new TagTypeHandler());
  registerMarkupFilter(new HtmlHandler());
  registerMarkupFilter(new WicketRemoveTagHandler());
  registerMarkupFilter(new WicketLinkTagHandler());
  registerMarkupFilter(new WicketNamespaceHandler(this.markup));
  final MarkupResourceStream resource=this.markup.getResource();
  if (resource != null) {
    final ContainerInfo containerInfo=resource.getContainerInfo();
    if (containerInfo != null) {
      registerMarkupFilter(new WicketMessageTagHandler());
      registerMarkupFilter(new BodyOnLoadHandler());
      if (Page.class.isAssignableFrom(containerInfo.getContainerClass())) {
        registerMarkupFilter(new HtmlHeaderSectionHandler(this));
      }
      registerMarkupFilter(new HeadForceTagIdHandler(containerInfo.getContainerClass()));
    }
  }
}
