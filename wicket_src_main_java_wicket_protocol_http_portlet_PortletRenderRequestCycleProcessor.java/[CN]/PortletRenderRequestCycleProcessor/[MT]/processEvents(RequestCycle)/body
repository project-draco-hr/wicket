{
  PortletPage<?> page=(PortletPage<?>)requestCycle.getRequest().getPage();
  if (page != null) {
    PortletRequestCycle cycle=(PortletRequestCycle)requestCycle;
    page.setPortletMode(cycle.getPortletRequest().getPortletRequest().getPortletMode());
    page.setWindowState(cycle.getPortletRequest().getPortletRequest().getWindowState());
  }
}
