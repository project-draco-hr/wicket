{
  Response response=requestCycle.getResponse();
  response.reset();
  if (redirectUrl.startsWith("/")) {
    RequestContext rc=RequestContext.get();
    if (rc.isPortletRequest() && ((PortletRequestContext)rc).isEmbedded()) {
      response.redirect(redirectUrl);
    }
 else {
      String location=RequestCycle.get().getProcessor().getRequestCodingStrategy().rewriteStaticRelativeUrl(redirectUrl.substring(1));
      if (location.startsWith("./")) {
        location=location.length() == 2 ? "." : location.substring(2);
      }
      response.redirect(location);
    }
  }
 else   if (redirectUrl.contains("://")) {
    response.redirect(redirectUrl);
  }
 else {
    response.redirect(RequestCycle.get().getRequest().getRelativePathPrefixToWicketHandler() + redirectUrl);
  }
}
