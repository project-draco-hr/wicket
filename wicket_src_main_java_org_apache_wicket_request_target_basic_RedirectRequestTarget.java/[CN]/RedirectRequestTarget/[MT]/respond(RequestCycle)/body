{
  Response response=requestCycle.getResponse();
  response.reset();
  if (redirectUrl.startsWith("/")) {
    RequestContext rc=RequestContext.get();
    String continueTo=null;
    if (rc.isPortletRequest() && ((PortletRequestContext)rc).isEmbedded()) {
      response.redirect(redirectUrl);
    }
 else {
      response.redirect(RequestCycle.get().getRequest().getRelativePathPrefixToContextRoot() + redirectUrl.substring(1));
    }
  }
 else   if (redirectUrl.contains("://")) {
    response.redirect(redirectUrl);
  }
 else {
    response.redirect(RequestCycle.get().getRequest().getRelativePathPrefixToWicketHandler() + redirectUrl);
  }
}
