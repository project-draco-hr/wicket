{
  Page page=component.getPage();
  if (page != null) {
    page.startComponentRender(component);
  }
  try {
    if (component instanceof Page) {
      new PageRequestTarget((Page)component).respond(requestCycle);
    }
 else {
      component.render();
    }
  }
  finally {
    if (page != null) {
      try {
        page.endComponentRender(component);
      }
  finally {
        page.detach();
      }
    }
  }
}
