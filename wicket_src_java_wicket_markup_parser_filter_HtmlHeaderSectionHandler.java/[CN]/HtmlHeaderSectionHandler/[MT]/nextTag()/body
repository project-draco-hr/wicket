{
  ComponentTag tag=(ComponentTag)getParent().nextTag();
  if (tag == null) {
    return tag;
  }
  if (done == true) {
    return tag;
  }
  if ("head".equalsIgnoreCase(tag.getName())) {
    if (tag instanceof WicketTag) {
      if (tag.isClose() == true) {
        done=true;
      }
    }
 else {
      withinHead=!withinHead;
      if (tag.isClose() == true) {
        if (done == false) {
          insertWicketHeadTag();
        }
        done=true;
      }
    }
    return tag;
  }
  if ("body".equalsIgnoreCase(tag.getName())) {
    done=true;
    tagList.add(new RawMarkup("<head>"));
    insertWicketHeadTag();
    tagList.add(new RawMarkup("</head>"));
    return tag;
  }
  if (!(tag instanceof WicketTag)) {
    return tag;
  }
  final WicketTag wtag=(WicketTag)tag;
  if ((withinHead == false) && (wtag.isHeadTag() == true)) {
    throw new MarkupException("<wicket:head> is only allow within <head> section.");
  }
  return tag;
}
