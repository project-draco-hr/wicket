{
  ComponentTag tag=(ComponentTag)getParent().nextTag();
  if (tag == null) {
    return tag;
  }
  if (done == true) {
    return tag;
  }
  if (!(tag instanceof WicketTag) && "head".equalsIgnoreCase(tag.getName())) {
    withinHead=!withinHead;
    if (tag.isClose() == true) {
      done=true;
    }
    return tag;
  }
  if ("body".equalsIgnoreCase(tag.getName())) {
    done=true;
    return tag;
  }
  if (!(tag instanceof WicketTag)) {
    return tag;
  }
  final WicketTag wtag=(WicketTag)tag;
  if ((withinHead == false) && (wtag.isHeadTag() == true)) {
    throw new MarkupException("<wicket:head> is only allow within <head> section.");
  }
  return tag;
}
