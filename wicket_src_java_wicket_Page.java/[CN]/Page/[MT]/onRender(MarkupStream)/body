{
  visitChildren(new IVisitor(){
    public Object component(    final Component component){
      final boolean renderAllowed=component.authorize(RENDER);
      if (renderAllowed) {
        component.resetMarkupStream();
      }
      component.setRenderAllowed(renderAllowed);
      return IVisitor.CONTINUE_TRAVERSAL;
    }
  }
);
  final MarkupStream associatedMarkupStream=getAssociatedMarkupStream();
  setMarkupStream(associatedMarkupStream);
  configureResponse();
  setFlag(FLAG_IS_RENDERING,true);
  try {
    renderAll(associatedMarkupStream);
  }
  finally {
    setFlag(FLAG_IS_RENDERING,false);
  }
}
