{
  if (log.isDebugEnabled()) {
    log.debug("ending request for page " + this + ", request "+ getRequest());
  }
  visitChildren(new IVisitor(){
    public Object component(    Component component){
      try {
        component.detachModels();
      }
 catch (      Exception e) {
        log.error("detaching models of component " + component + " failed:",e);
      }
      return IVisitor.CONTINUE_TRAVERSAL;
    }
  }
);
  if (isVersioned()) {
    endVersion();
  }
}
