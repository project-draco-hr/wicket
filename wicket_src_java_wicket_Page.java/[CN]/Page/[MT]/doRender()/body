{
  if (checkAccess()) {
    session.touch(this);
    try {
      visitChildren(IFeedback.class,new IVisitor(){
        public Object component(        Component component){
          ((IFeedback)component).updateFeedback();
          component.internalBeginRequest();
          return IVisitor.CONTINUE_TRAVERSAL;
        }
      }
);
      internalBeginRequest();
      render();
      checkRendering();
    }
  finally {
      internalEndRequest();
    }
  }
 else {
    final RequestCycle requestCycle=getRequestCycle();
    final Page responsePage=requestCycle.getResponsePage();
    if (responsePage != null && responsePage != this) {
      responsePage.doRender();
    }
 else {
      final Class pageClass=requestCycle.getResponsePageClass();
      if (pageClass != null) {
        final PageParameters pageParameters=requestCycle.getResponsePagePageParameters();
        String redirectUrl=requestCycle.urlFor(pageClass,pageParameters);
        getResponse().redirect(redirectUrl);
      }
    }
  }
}
