{
  try {
    detachModels();
  }
 catch (  RuntimeException e1) {
    log.debug("Error detaching models when exception is thrown",e1);
  }
  visitChildren(MarkupContainer.class,new IVisitor(){
    public Object component(    final Component component){
      final MarkupContainer container=(MarkupContainer)component;
      container.setMarkupStream(null);
      return CONTINUE_TRAVERSAL;
    }
  }
);
}
