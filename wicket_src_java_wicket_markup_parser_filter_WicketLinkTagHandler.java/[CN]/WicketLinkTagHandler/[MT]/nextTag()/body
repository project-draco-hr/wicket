{
  final ComponentTag tag=nextComponentTag();
  if (tag == null) {
    return tag;
  }
  if ((autolinking == true) && (analyzeAutolinkCondition(tag) == true)) {
    tag.enableAutolink(true);
    tag.setId(AUTOLINK_ID);
    return tag;
  }
  if (tag.isLinkTag()) {
    if (tag.isOpen() || tag.isOpenClose()) {
      if (tag.isOpen()) {
        if (autolinkStatus == null) {
          autolinkStatus=new ArrayListStack<Boolean>();
        }
        autolinkStatus.push(new Boolean(autolinking));
      }
      final String autolink=tag.getAttributes().getString("autolink");
      try {
        autolinking=Strings.isEmpty(autolink) || Strings.isTrue(autolink);
      }
 catch (      final StringValueConversionException e) {
        throw new WicketRuntimeException("Invalid autolink attribute value \"" + autolink + "\"");
      }
    }
 else     if (tag.isClose()) {
      autolinking=autolinkStatus.pop().booleanValue();
    }
  }
  return tag;
}
