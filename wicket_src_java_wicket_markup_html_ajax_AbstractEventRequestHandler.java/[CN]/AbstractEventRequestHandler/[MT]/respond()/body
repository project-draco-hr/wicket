{
  try {
    final RequestCycle cycle=RequestCycle.get();
    cycle.setResponsePage((Page)null);
    this.resourceStream=getResponse();
    if (this.resourceStream == null) {
      throw new WicketRuntimeException("Could not get resource stream");
    }
    final Response response=cycle.getResponse();
    configure(response);
    respond(response);
  }
  finally {
    resourceStream=null;
  }
}
