{
  for (  Map.Entry<String,Component> stringComponentEntry : markupIdToComponent.entrySet()) {
    final Component component=stringComponentEntry.getValue();
    if (!containsAncestorFor(component)) {
      respondComponent(response,getAjaxRegionMarkupId(component),component);
    }
  }
  if (header != null) {
    header.getHeaderResponse().close();
  }
}
