{
  final RequestCycle requestCycle=RequestCycle.get();
  if (requestCycle != null) {
    if (requestCycle.getActiveRequestHandler() instanceof AjaxRequestTarget) {
      return (AjaxRequestTarget)requestCycle.getActiveRequestHandler();
    }
 else     if (requestCycle.getRequestHandlerScheduledAfterCurrent() instanceof AjaxRequestTarget) {
      return (AjaxRequestTarget)requestCycle.getRequestHandlerScheduledAfterCurrent();
    }
  }
  return null;
}
