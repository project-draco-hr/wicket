{
  Session.get().bind();
  IRequestTarget target=super.resolve(rc,rp);
  Class<?> pageClass=getPageClass(target);
  if (pageClass != null) {
    IRequestTarget redirect=null;
    if (hasSecureAnnotation(pageClass)) {
      redirect=SwitchProtocolRequestTarget.requireProtocol(Protocol.HTTPS);
    }
 else {
      redirect=SwitchProtocolRequestTarget.requireProtocol(Protocol.HTTP);
    }
    if (redirect != null) {
      return redirect;
    }
  }
  return target;
}
