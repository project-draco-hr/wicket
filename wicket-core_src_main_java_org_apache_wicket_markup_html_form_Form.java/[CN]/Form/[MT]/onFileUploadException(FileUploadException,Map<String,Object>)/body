{
  if (e instanceof SizeLimitExceededException) {
    final String defaultValue="Upload must be less than " + getMaxSize();
    String msg=getString(getId() + "." + UPLOAD_TOO_LARGE_RESOURCE_KEY,Model.ofMap(model),defaultValue);
    error(msg);
  }
 else {
    final String defaultValue="Upload failed: " + e.getLocalizedMessage();
    String msg=getString(getId() + "." + UPLOAD_FAILED_RESOURCE_KEY,Model.ofMap(model),defaultValue);
    error(msg);
    log.warn(msg,e);
  }
}
