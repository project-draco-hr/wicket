{
  markFormsSubmitted();
  if (handleMultiPart()) {
    inputChanged();
    String url=getRequest().getRequestParameters().getParameterValue(getHiddenFieldId()).toString();
    if (!Strings.isEmpty(url)) {
      dispatchEvent(getPage(),url);
    }
 else {
      if (submitter == null) {
        submitter=findSubmittingButton();
      }
      if (submitter != null && !submitter.getDefaultFormProcessing()) {
        submitter.onSubmitBeforeForm();
        submitter.onSubmitAfterForm();
      }
 else {
        final Form<?> formToProcess=findFormToProcess(submitter);
        formToProcess.process(submitter);
      }
    }
  }
 else   if (hasError()) {
    callOnError(submitter);
  }
}
