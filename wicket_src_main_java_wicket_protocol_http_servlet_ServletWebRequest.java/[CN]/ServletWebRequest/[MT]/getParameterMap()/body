{
  final Map map=new HashMap();
  for (final Enumeration enumeration=httpServletRequest.getParameterNames(); enumeration.hasMoreElements(); ) {
    final String name=(String)enumeration.nextElement();
    String[] parameterValues=httpServletRequest.getParameterValues(name);
    if (parameterValues.length == 1) {
      map.put(name,parameterValues[0]);
    }
 else {
      map.put(name,parameterValues);
    }
  }
  return map;
}
