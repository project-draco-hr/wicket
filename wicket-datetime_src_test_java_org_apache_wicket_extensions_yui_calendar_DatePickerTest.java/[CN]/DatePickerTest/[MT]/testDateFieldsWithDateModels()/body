{
  TimeZone origJvmDef=TimeZone.getDefault();
  DateTimeZone origJodaDef=DateTimeZone.getDefault();
  TimeZone tzClient=TimeZone.getTimeZone("GMT-12");
  TimeZone tzServer=TimeZone.getTimeZone("GMT+14");
  TimeZone.setDefault(tzServer);
  DateTimeZone.setDefault(DateTimeZone.forTimeZone(tzServer));
  WebClientInfo clientInfo=(WebClientInfo)tester.getSession().getClientInfo();
  clientInfo.getProperties().setTimeZone(tzClient);
  Calendar cal=Calendar.getInstance(tzServer);
  cal.set(2011,5,15,10,30,0);
  cal.set(Calendar.MILLISECOND,0);
  Date date=cal.getTime();
  DateFormat format=DateFormat.getDateInstance(DateFormat.SHORT,Locale.GERMAN);
  format.setTimeZone(tzClient);
  String dateRefString=format.format(date);
  cal.setTimeZone(tzClient);
  String hoursRefString=Integer.toString(cal.get(Calendar.HOUR_OF_DAY));
  String minutesRefString=Integer.toString(cal.get(Calendar.MINUTE));
  DatesPage2 testPage=new DatesPage2();
  testPage.dateTime=date;
  testPage.date=date;
  testPage.time=date;
  tester.getSession().setLocale(Locale.GERMAN);
  tester.startPage(testPage);
  String dateTimeFieldDateValue=tester.getTagByWicketId("dateTimeField").getChild("wicket:id","date").getAttribute("value");
  assertEquals(dateRefString,dateTimeFieldDateValue);
  String dateTimeFieldHoursValue=tester.getTagByWicketId("dateTimeField").getChild("wicket:id","hours").getAttribute("value");
  assertEquals(hoursRefString,dateTimeFieldHoursValue);
  String dateTimeFieldMinutesValue=tester.getTagByWicketId("dateTimeField").getChild("wicket:id","minutes").getAttribute("value");
  assertEquals(minutesRefString,dateTimeFieldMinutesValue);
  String dateFieldValue=tester.getTagByWicketId("dateField").getChild("wicket:id","date").getAttribute("value");
  assertEquals(dateRefString,dateFieldValue);
  String timeFieldHoursValue=tester.getTagByWicketId("timeField").getChild("wicket:id","hours").getAttribute("value");
  assertEquals(hoursRefString,timeFieldHoursValue);
  String timeFieldMinutesValue=tester.getTagByWicketId("timeField").getChild("wicket:id","minutes").getAttribute("value");
  assertEquals(minutesRefString,timeFieldMinutesValue);
  TimeZone.setDefault(origJvmDef);
  DateTimeZone.setDefault(origJodaDef);
}
