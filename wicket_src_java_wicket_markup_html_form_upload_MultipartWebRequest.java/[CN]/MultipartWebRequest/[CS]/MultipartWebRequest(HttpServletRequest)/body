{
  super(httpServletRequest);
  try {
    final boolean isMultipart=FileUpload.isMultipartContent(httpServletRequest);
    if (!isMultipart) {
      throw new IllegalStateException("Request does not contain multipart content");
    }
    final List items=new DiskFileUpload().parseRequest(httpServletRequest);
    for (Iterator i=items.iterator(); i.hasNext(); ) {
      FileItem item=(FileItem)i.next();
      if (item.isFormField()) {
        parameters.put(item.getFieldName(),item.getString());
      }
 else {
        files.put(item.getFieldName(),item);
      }
    }
  }
 catch (  FileUploadException e) {
    throw new WicketRuntimeException(e);
  }
}
