{
  String absolutePath=Packages.absolutePath(scope,path);
  IPackageResourceGuard guard=Application.get().getResourceSettings().getPackageResourceGuard();
  if (!guard.accept(scope,path)) {
    throw new PackageResourceBlockedException("package resource " + absolutePath + " may not be accessed");
  }
  int index=absolutePath.lastIndexOf(".");
  if (index != -1) {
    extension=absolutePath.substring(index + 1);
    absolutePath=absolutePath.substring(0,index);
  }
 else {
    this.extension=null;
  }
  this.absolutePath=absolutePath;
  this.scope=scope;
  this.path=path;
  this.locale=locale;
  this.style=style;
  if (locale != null) {
    getResourceStream();
    invalidate();
  }
}
