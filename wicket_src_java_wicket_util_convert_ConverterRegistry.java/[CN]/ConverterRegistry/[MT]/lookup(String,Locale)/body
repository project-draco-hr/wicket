{
  IFormatter formatter=null;
  if (locale != null) {
    String lockey=getLocKey(key,locale);
    formatter=(LocaleFormatter)localizedConverters.get(lockey);
    if (formatter == null) {
      String globLocKey=getLocKey(key);
      LocaleFormatter _formatter=(LocaleFormatter)localizedConverters.get(globLocKey);
      if (_formatter != null) {
        Class cls=_formatter.getClass();
        LocaleFormatter _newFormatter=(LocaleFormatter)cls.newInstance();
        _newFormatter.setLocale(locale);
        localizedConverters.put(key,_newFormatter);
        formatter=_newFormatter;
      }
    }
  }
  if (formatter == null) {
    formatter=(IFormatter)converters.get(getLocKey(key));
  }
  return formatter;
}
