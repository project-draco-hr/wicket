{
  Request request=getRequest();
  if (!(request instanceof MultipartWebRequest)) {
    throw new IllegalStateException("this component may only " + "be used with upload (multipart) forms");
  }
  MultipartWebRequest multipartRequest=(MultipartWebRequest)request;
  return multipartRequest.getFile(fileFieldName);
}
