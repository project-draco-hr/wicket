{
  if (messages.size() == 0) {
    return 0;
  }
  List toDelete=messages(filter);
  int count=toDelete.size();
  messages.removeAll(toDelete);
  trimToSize();
  return count;
}
