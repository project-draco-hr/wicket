{
  requestHandlers.add(handler);
  try {
    respond(handler);
  }
  finally {
    requestHandlers.poll();
    inactiveRequestHandlers.add(handler);
  }
  IRequestHandler scheduled=scheduledAfterCurrent;
  scheduledAfterCurrent=null;
  return scheduled;
}
