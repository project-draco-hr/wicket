{
  super.onComponentTag(tag);
  checkComponentTag(tag,"form");
  if (!Strings.isEmpty(javascriptId)) {
    tag.put("id",javascriptId);
  }
 else {
    javascriptId=(String)tag.getAttributes().get("id");
    if (Strings.isEmpty(javascriptId)) {
      javascriptId=getJavascriptId();
      tag.put("id",javascriptId);
    }
  }
  if (isRootForm()) {
    tag.put("method",getMethod());
    tag.put("action",Strings.replaceAll(urlFor(IFormSubmitListener.INTERFACE),"&","&amp;"));
    if (multiPart) {
      tag.put("enctype","multipart/form-data");
    }
 else {
      String enctype=(String)tag.getAttributes().get("enctype");
      if ("multipart/form-data".equalsIgnoreCase(enctype)) {
        setMultiPart(true);
      }
    }
  }
 else {
    tag.setName("div");
    tag.remove("method");
    tag.remove("action");
    tag.remove("enctype");
  }
}
