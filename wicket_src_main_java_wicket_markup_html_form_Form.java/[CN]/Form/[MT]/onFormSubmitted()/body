{
  setFlag(FLAG_SUBMITTED,true);
  if (handleMultiPart()) {
    inputChanged();
    String url=getRequest().getParameter(getHiddenFieldId());
    if (!Strings.isEmpty(url)) {
      dispatchEvent(getPage(),url);
    }
 else {
      final Button submittingButton=findSubmittingButton();
      if (submittingButton != null && !submittingButton.getDefaultFormProcessing()) {
        submittingButton.onSubmit();
      }
 else {
        if (process()) {
          delegateSubmit(submittingButton);
        }
      }
    }
  }
 else   if (hasError()) {
    onError();
  }
}
