{
  String fullRootPath=getRootPath(request);
  String url=request.getRequestURI();
  String containerSuppliedContextPath=request.getContextPath();
  if (!fullRootPath.startsWith(containerSuppliedContextPath)) {
    url=url.substring(containerSuppliedContextPath.length());
  }
  if (url.startsWith(fullRootPath)) {
    if (url.equals("/")) {
      return true;
    }
    if (fullRootPath.length() > 0 && fullRootPath.length() == url.length() - 1 && url.endsWith("/")) {
      url=url.substring(0,url.length() - 1);
    }
    if (url.length() == fullRootPath.length()) {
      return true;
    }
    if ((url.length() > fullRootPath.length()) && (url.charAt(fullRootPath.length()) == ';')) {
      return true;
    }
  }
  String tmp=Strings.join("/",new String[]{fullRootPath,RESOURCES_PATH_PREFIX});
  if (url.startsWith(tmp)) {
    return true;
  }
  String path=null;
  if (fullRootPath.length() < url.length()) {
    path=url.substring(fullRootPath.length());
  }
 else {
    path=url;
  }
  if (!path.startsWith("/")) {
    path="/" + path;
  }
  return webApplication.getRequestCycleProcessor().getRequestCodingStrategy().urlCodingStrategyForPath(path) != null;
}
