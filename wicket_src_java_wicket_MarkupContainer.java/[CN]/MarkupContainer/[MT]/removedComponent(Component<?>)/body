{
  final Page page=component.findPage();
  if (page != null) {
    page.componentRemoved(component);
  }
  if (component instanceof MarkupContainer) {
    ((MarkupContainer<?>)component).visitChildren(new IVisitor<Component>(){
      public Object component(      Component component){
        try {
          component.detachModels();
        }
 catch (        Exception e) {
          log.error("detaching models of component " + component + " failed:",e);
        }
        return IVisitor.CONTINUE_TRAVERSAL;
      }
    }
);
  }
  component.detachModels();
  component.setParent(null);
}
