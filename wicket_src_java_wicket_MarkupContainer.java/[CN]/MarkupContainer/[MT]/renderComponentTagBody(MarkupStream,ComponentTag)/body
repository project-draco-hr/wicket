{
  boolean render=openTag.requiresCloseTag();
  if (render == false) {
    int pos=markupStream.getCurrentIndex();
    while (markupStream.hasMore()) {
      MarkupElement elem=markupStream.next();
      if (elem instanceof ComponentTag) {
        if (elem.closes(openTag)) {
          render=true;
          break;
        }
      }
    }
    markupStream.setCurrentIndex(pos);
  }
  if (render == true) {
    while (markupStream.hasMore() && !markupStream.get().closes(openTag)) {
      final int index=markupStream.getCurrentIndex();
      renderNext(markupStream);
      if (index == markupStream.getCurrentIndex()) {
        markupStream.throwMarkupException("Markup element at index " + index + " failed to advance the markup stream");
      }
    }
  }
}
