{
  if (log.isDebugEnabled()) {
    log.debug("Replacing " + child.getId() + " in "+ this);
  }
  if (child.getParent() != this) {
    final Component replaced=put(child);
    addedComponent(child);
    removedComponent(replaced);
    if (replaced == null) {
      throw new IllegalArgumentException(exceptionMessage("A child component with the id '" + child.getId() + "' didn't exist"));
    }
  }
  return this;
}
