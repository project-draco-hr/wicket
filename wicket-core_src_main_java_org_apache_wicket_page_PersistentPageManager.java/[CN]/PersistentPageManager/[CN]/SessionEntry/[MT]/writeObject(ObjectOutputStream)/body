{
  s.defaultWriteObject();
  List<Serializable> l=new ArrayList<Serializable>();
  IPageStore pageStore=getPageStore();
  for (  IManageablePage p : pages) {
    Serializable preparedPage;
    if (pageStore != null) {
      preparedPage=pageStore.prepareForSerialization(sessionId,p);
    }
 else {
      preparedPage=p;
    }
    if (preparedPage != null) {
      l.add(preparedPage);
    }
  }
  s.writeObject(l);
}
