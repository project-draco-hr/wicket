{
  final WebRequest webRequest=(WebRequest)request;
  final int parametersIndex=path.indexOf('?');
  final String pathInfo=parametersIndex == -1 ? path : path.substring(0,parametersIndex);
  final Map parameterMap=new HashMap();
  if (parametersIndex != -1) {
    final String parametersString=path.substring(parametersIndex + 1);
    final String[] parameters=Strings.split(parametersString,'&');
    for (int i=0; i < parameters.length; i++) {
      final String[] s=Strings.split(parameters[i],'=');
      parameterMap.put(s[0],s[1]);
    }
  }
  return new WebRequest(null){
    public String getContextPath(){
      return webRequest.getContextPath();
    }
    public Locale getLocale(){
      return request.getLocale();
    }
    public String getParameter(    String key){
      return (String)parameterMap.get(key.toLowerCase());
    }
    public Map getParameterMap(){
      return parameterMap;
    }
    public String[] getParameters(    String key){
      final String parameter=getParameter(key);
      if (parameter != null) {
        return Strings.split(parameter,';');
      }
      return null;
    }
    public String getPath(){
      return pathInfo;
    }
    public String getRelativeURL(){
      return webRequest.getRelativeURL();
    }
    public String getServletPath(){
      return webRequest.getServletPath();
    }
    public String getURL(){
      return request.getURL();
    }
  }
;
}
