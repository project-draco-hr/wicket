{
  IMarkupFragment markup=getAssociatedMarkup();
  if (markup == null) {
    throw new MarkupException("Failed to find markup file associated with panel. Panel: " + this.toString());
  }
  int index=markup.findComponentIndex(null,"_panel",0);
  if (index == -1) {
    throw new MarkupException("Expected to find <wicket:panel> in associated markup file. Markup: " + markup.toString());
  }
  if (child == null) {
    return new MarkupFragment(markup,index);
  }
  return markup.find(null,child.getId(),index);
}
