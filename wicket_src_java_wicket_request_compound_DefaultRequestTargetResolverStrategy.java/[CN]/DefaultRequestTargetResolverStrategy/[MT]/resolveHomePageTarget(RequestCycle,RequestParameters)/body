{
  Session session=requestCycle.getSession();
  Application application=session.getApplication();
  try {
    Class<? extends Page> homePageClass=application.getHomePage();
    PageParameters<String,Object> parameters=new PageParameters<String,Object>(requestParameters.getParameters());
    BookmarkablePageRequestTarget homepageTarget=null;
    if (requestParameters.getBookmarkableFormName() != null) {
      homepageTarget=new BookmarkableFormPageRequestTarget(null,homePageClass,parameters,requestParameters.getBookmarkableFormName());
    }
 else {
      homepageTarget=new BookmarkablePageRequestTarget(homePageClass,parameters);
      IRequestCodingStrategy requestCodingStrategy=requestCycle.getProcessor().getRequestCodingStrategy();
      CharSequence path=requestCodingStrategy.pathForTarget(homepageTarget);
      if (path != null) {
        requestCycle.setRedirect(true);
      }
    }
    return homepageTarget;
  }
 catch (  MarkupException e) {
    throw e;
  }
catch (  WicketRuntimeException e) {
    throw new WicketRuntimeException("Could not create home page",e);
  }
}
