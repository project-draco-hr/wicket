{
  Session session=requestCycle.getSession();
  Application application=session.getApplication();
  try {
    Class homePageClass=application.getHomePage();
    BookmarkablePageRequestTarget pokeTarget=new BookmarkablePageRequestTarget(homePageClass);
    IRequestCodingStrategy requestCodingStrategy=requestCycle.getProcessor().getRequestCodingStrategy();
    String path=requestCodingStrategy.pathForTarget(pokeTarget);
    if (path != null) {
      requestCycle.setRedirect(true);
      return pokeTarget;
    }
    PageParameters parameters=new PageParameters(requestParameters.getParameters());
    Page newPage=null;
    if (parameters.size() == 0) {
      newPage=session.getPageFactory().newPage(homePageClass);
    }
 else {
      newPage=session.getPageFactory().newPage(homePageClass,parameters);
    }
    IRequestTarget requestTarget=requestCycle.getRequestTarget();
    if (!(requestTarget instanceof IPageRequestTarget || requestTarget instanceof IBookmarkablePageRequestTarget)) {
      requestTarget=new PageRequestTarget(newPage);
    }
    return requestTarget;
  }
 catch (  WicketRuntimeException e) {
    throw new WicketRuntimeException("Could not create home page",e);
  }
}
