{
  TreeStateCache treeStateCache=new TreeStateCache();
  TreeSelectionModel selectionModel=new DefaultTreeSelectionModel();
  selectionModel.setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
  treeStateCache.setModel(model);
  treeStateCache.setSelectionModel(selectionModel);
  treeStateCache.setRootVisible(rootVisible);
  model.addTreeModelListener(treeStateCache);
  return treeStateCache;
}
