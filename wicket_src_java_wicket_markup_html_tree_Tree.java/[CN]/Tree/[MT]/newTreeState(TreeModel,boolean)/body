{
  TreeStateCache treeStateCache=new TreeStateCache();
  TreeSelectionModel selectionModel=new DefaultTreeSelectionModel();
  treeStateCache.setModel(model);
  treeStateCache.setSelectionModel(selectionModel);
  treeStateCache.setRootVisible(rootVisible);
  model.addTreeModelListener(treeStateCache);
  return treeStateCache;
}
