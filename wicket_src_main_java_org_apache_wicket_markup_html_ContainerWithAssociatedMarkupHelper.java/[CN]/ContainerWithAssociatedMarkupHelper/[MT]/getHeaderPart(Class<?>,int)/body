{
  final MarkupStream markupStream=container.getAssociatedMarkupStream(false);
  markupStream.setCurrentIndex(index);
  final MarkupElement element=markupStream.get();
  if (element instanceof WicketTag) {
    final WicketTag wTag=(WicketTag)element;
    if ((wTag.isHeadTag() == true) && (wTag.getNamespace() != null)) {
      final String headerId="_" + Classes.simpleName(markupClass) + (container.getVariation() == null ? "" : container.getVariation())+ "Header"+ index;
      String scope=wTag.getAttributes().getString(markupStream.getWicketNamespace() + ":scope");
      HeaderPartContainer headerContainer=new HeaderPartContainer(headerId,container,scope);
      headerContainer.setMarkup(markupStream.getMarkupFragment());
      headerContainer.setRenderBodyOnly(true);
      return headerContainer;
    }
  }
  throw new WicketRuntimeException("Programming error: expected a WicketTag: " + markupStream.toString());
}
