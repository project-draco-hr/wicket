{
  if (component == null) {
    throw new IllegalArgumentException("argument component must be not null");
  }
  this.component=component;
  final IModel model=component.getModel();
  if (model != null) {
    boolean cloneModel=true;
    if (model instanceof CompoundPropertyModel) {
      if (component instanceof FormComponent) {
        if (((FormComponent)component).getForm().getModel() == model) {
          cloneModel=false;
        }
      }
 else {
        if (component.getPage().getModel() == model) {
          cloneModel=false;
        }
      }
    }
    if (cloneModel) {
      model.detach();
      originalModel=(IModel)Objects.clone(model);
    }
 else {
      originalModel=model;
    }
  }
  if (log.isDebugEnabled()) {
    log.debug("RECORD MODEL CHANGE: changed model of " + " (" + Classes.name(component.getClass()) + "@"+ component.hashCode()+ ")");
  }
}
