{
  dateField.setRequired(isRequired());
  hoursField.setRequired(isRequired());
  minutesField.setRequired(isRequired());
  dateField.setEnabled(isEnabled() && isEnableAllowed());
  hoursField.setEnabled(isEnabled() && isEnableAllowed());
  minutesField.setEnabled(isEnabled() && isEnableAllowed());
  amOrPmChoice.setEnabled(isEnabled() && isEnableAllowed());
  Date d=(Date)getModelObject();
  if (d != null) {
    date=new MutableDateTime(d);
  }
 else {
    date=null;
  }
  if (date != null) {
    TimeZone zone=getClientTimeZone();
    if (zone != null) {
      date.setZone(DateTimeZone.forTimeZone(zone));
    }
    int hourOfHalfDay=date.get(DateTimeFieldType.hourOfHalfday());
    hours=new Integer(hourOfHalfDay == 0 ? 12 : hourOfHalfDay);
    minutes=new Integer(date.getMinuteOfHour());
    amOrPm=(date.get(DateTimeFieldType.halfdayOfDay()) == 0) ? AM_PM.AM : AM_PM.PM;
  }
  super.onBeforeRender();
}
