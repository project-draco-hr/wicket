{
  IntHashMap<Page> pages=getUsedPages(getName());
  Page page=pages.get(id);
  if (page != null) {
    return page;
  }
  String sessionId=getSession().getId();
  if (sessionId != null) {
    if (getLastPage() != null && getLastPage().getNumericId() == id) {
      page=versionNumber != -1 ? getLastPage().getVersion(versionNumber) : getLastPage();
      if (page != null) {
        getStore().pageAccessed(sessionId,page);
        pages.put(id,page);
        return page;
      }
    }
    setLastPage(null);
    page=getStore().getPage(sessionId,getName(),id,versionNumber,-1);
    pages.put(id,page);
    return page;
  }
  return null;
}
