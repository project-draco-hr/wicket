{
  if (componentReference != null) {
    final Component behaviorOwner=(Component)componentReference.get();
    if (behaviorOwner == null) {
      setEnabled(false);
      return currentValue;
    }
    if (!(behaviorOwner instanceof Page) && behaviorOwner.findParent(Page.class) == null) {
      setEnabled(false);
      return currentValue;
    }
    if (behaviorOwner.isVisibleInHierarchy() == false) {
      return currentValue;
    }
  }
  if (currentValue != null && !currentValue.trim().endsWith(";")) {
    return currentValue + ";" + replacementValue;
  }
  return (currentValue == null ? replacementValue : currentValue + replacementValue);
}
