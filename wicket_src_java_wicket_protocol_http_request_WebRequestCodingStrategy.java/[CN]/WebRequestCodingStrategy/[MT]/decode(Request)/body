{
  final RequestParameters parameters=new RequestParameters();
  String pathInfo=getRequestPath(request);
  if (pathInfo != null && !pathInfo.startsWith("/")) {
    pathInfo="/" + pathInfo;
  }
  parameters.setPath(pathInfo);
  parameters.setPageMapName(request.getParameter(PAGEMAP));
  addInterfaceParameters(request,parameters);
  addBookmarkablePageParameters(request,parameters);
  addResourceParameters(request,parameters);
  parameters.setBehaviorId(request.getParameter(BEHAVIOR_ID_PARAMETER_NAME));
  Map<String,? extends Object> map=request.getParameterMap();
  Iterator<String> iterator=map.keySet().iterator();
  while (iterator.hasNext()) {
    String key=iterator.next();
    if (key.startsWith(NAME_SPACE)) {
      iterator.remove();
    }
  }
  parameters.setParameters(map);
  return parameters;
}
