{
  final String classname=clazz.getName();
  final Locale locale=container.getLocale();
  final String style=container.getStyle();
  final String markupType=container.getMarkupType();
  final AppendingStringBuffer buffer=new AppendingStringBuffer(classname.length() + 64);
  buffer.append(classname);
  if (locale != null) {
    final boolean l=locale.getLanguage().length() != 0;
    final boolean c=locale.getCountry().length() != 0;
    final boolean v=locale.getVariant().length() != 0;
    buffer.append(locale.getLanguage());
    if (c || (l && v)) {
      buffer.append('_').append(locale.getCountry());
    }
    if (v && (l || c)) {
      buffer.append('_').append(locale.getVariant());
    }
  }
  if (style != null) {
    buffer.append(style);
  }
  buffer.append(markupType);
  return buffer.toString();
}
