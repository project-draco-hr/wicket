{
  Application.set(this);
  context=new MockServletContext(this,path);
  setWicketServlet(new WicketServlet(){
    private static final long serialVersionUID=1L;
    @Override public ServletContext getServletContext(){
      return context;
    }
    /** 
 * @see javax.servlet.GenericServlet#getInitParameter(java.lang.String)
 */
    @Override public String getInitParameter(    String name){
      return null;
    }
    /** 
 * @see javax.servlet.GenericServlet#getServletName()
 */
    @Override public String getServletName(){
      return "WicketMockServlet";
    }
  }
);
  this.internalInit();
  this.init();
  this.initializeComponents();
  servletSession=new MockHttpSession(context);
  servletRequest=new MockHttpServletRequest(this,servletSession,context);
  servletResponse=new MockHttpServletResponse();
  wicketRequest=newWebRequest(servletRequest);
  wicketSession=getSession(wicketRequest);
  getApplicationSettings().setContextPath(context.getServletContextName());
  getRequestCycleSettings().setRenderStrategy(RenderStrategy.ONE_PASS_RENDER);
  getResourceSettings().setResourceFinder(new WebApplicationPath(context));
  getPageSettings().setAutomaticMultiWindowSupport(false);
  createRequestCycle();
}
