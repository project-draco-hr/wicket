{
  Application.set(this);
  context=new MockServletContext(this,path);
  setWicketFilter(new WicketFilter(){
    private static final long serialVersionUID=1L;
    @Override public FilterConfig getFilterConfig(){
      return new FilterConfig(){
        public ServletContext getServletContext(){
          return context;
        }
        public Enumeration getInitParameterNames(){
          return null;
        }
        public String getInitParameter(        String name){
          return null;
        }
        public String getFilterName(){
          return "WicketMockServlet";
        }
      }
;
    }
  }
);
  this.internalInit();
  this.init();
  this.initializeComponents();
  servletSession=new MockHttpSession(context);
  servletRequest=new MockHttpServletRequest(this,servletSession,context);
  servletResponse=new MockHttpServletResponse();
  wicketRequest=newWebRequest(servletRequest);
  wicketSession=getSession(wicketRequest);
  getApplicationSettings().setContextPath(context.getServletContextName());
  getRequestCycleSettings().setRenderStrategy(RenderStrategy.ONE_PASS_RENDER);
  getResourceSettings().setResourceFinder(new WebApplicationPath(context));
  getPageSettings().setAutomaticMultiWindowSupport(false);
  createRequestCycle();
}
