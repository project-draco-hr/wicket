{
  checkTag(tag,"input");
  checkAttribute(tag,"type","checkbox");
  super.handleComponentTag(tag);
  Object value=getModelObject();
  if (value != null) {
    final boolean tagValue;
    if (value instanceof String) {
      tagValue=Boolean.parseBoolean((String)value);
    }
 else     if (value instanceof Boolean) {
      tagValue=((Boolean)value).booleanValue();
    }
 else {
      throw new WicketRuntimeException("Model objects for checkboxes have to be of type Boolean");
    }
    if (tagValue)     tag.put("checked","checked");
 else     tag.remove("checked");
  }
}
