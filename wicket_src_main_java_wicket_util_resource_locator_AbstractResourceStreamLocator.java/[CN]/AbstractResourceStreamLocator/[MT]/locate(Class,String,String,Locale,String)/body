{
  String[] extensions;
  if (extension == null) {
    extensions=new String[]{"." + Strings.lastPathComponent(path,'.')};
    path=Strings.beforeLastPathComponent(path,'.');
  }
 else {
    extensions=Strings.split(extension,',');
    for (int i=extensions.length - 1; i >= 0; i--) {
      extensions[i]=extensions[i].trim();
      if (!extensions[i].startsWith(".")) {
        extensions[i]="." + extensions[i];
      }
    }
  }
  if (style != null && locale != null) {
    for (    String ext : extensions) {
      final IResourceStream resource=locate(clazz,path + '_' + style,locale,ext);
      if (resource != null) {
        return resource;
      }
    }
  }
  if (locale != null) {
    for (    String ext : extensions) {
      final IResourceStream resource=locate(clazz,path,locale,ext);
      if (resource != null) {
        return resource;
      }
    }
  }
  if (style != null) {
    for (    String ext : extensions) {
      final IResourceStream resource=locate(clazz,path + '_' + style+ ext);
      if (resource != null) {
        return resource;
      }
    }
  }
  for (  String ext : extensions) {
    final IResourceStream resource=locate(clazz,path + ext);
    if (resource != null) {
      return resource;
    }
  }
  return null;
}
