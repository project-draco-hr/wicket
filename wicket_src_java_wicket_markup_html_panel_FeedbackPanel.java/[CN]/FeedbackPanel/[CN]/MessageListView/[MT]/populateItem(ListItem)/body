{
  final FeedbackMessage message=(FeedbackMessage)listItem.getModelObject();
  message.markRendered();
  final IModel<String> replacementModel=new Model<String>(){
    private static final long serialVersionUID=1L;
    /** 
 * Returns feedbackPanel + the message level, eg
 * 'feedbackPanelERROR'. This is used as the class of the li /
 * span elements.
 * @see wicket.model.IModel#getObject(Component)
 */
    @Override public String getObject(    final Component component){
      return getCSSClass(message);
    }
  }
;
  final Label label=new Label(listItem,"message",message.getMessage());
  label.setEscapeModelStrings(getEscapeMessages());
  final AttributeModifier levelModifier=new AttributeModifier("class",replacementModel);
  label.add(levelModifier);
  listItem.add(levelModifier);
  listItem.add(label);
}
