{
  System.out.println("=== " + pageClass.getName() + " : "+ component.getPageRelativePath()+ " : "+ listener.getClass().getName()+ " ===");
  assertNotNull(component);
  assertNotNull(listener);
  application.setupRequestAndResponse();
  WebRequestCycle cycle=application.createRequestCycle();
  Page page=application.getLastRenderedPage();
  String url=cycle.urlFor(component,listener);
  application.getServletRequest().setRequestToRedirectString(url);
  application.processRequestCycle(cycle);
  String document=application.getServletResponse().getDocument();
  assertTrue(DiffUtil.validatePage(document,pageClass,filename));
}
