{
  System.setProperty("wicket.configuration","development");
  Server server=new Server();
  SelectChannelConnector connector=new SelectChannelConnector();
  connector.setMaxIdleTime(1000 * 60 * 60);
  connector.setSoLingerTime(-1);
  connector.setPort(8080);
  server.setConnectors(new Connector[]{connector});
  Resource keystore=Resource.newClassPathResource("/keystore");
  if (keystore != null && keystore.exists()) {
    connector.setConfidentialPort(8443);
    SslContextFactory factory=new SslContextFactory();
    factory.setKeyStoreResource(keystore);
    factory.setKeyStorePassword("wicket");
    factory.setTrustStoreResource(keystore);
    factory.setKeyManagerPassword("wicket");
    SslSocketConnector sslConnector=new SslSocketConnector(factory);
    int timeout=(int)Duration.ONE_HOUR.getMilliseconds();
    sslConnector.setMaxIdleTime(timeout);
    sslConnector.setPort(8443);
    sslConnector.setAcceptors(4);
    server.addConnector(sslConnector);
    System.out.println("SSL access to the examples has been enabled on port 8443");
    System.out.println("You can access the application using SSL on https://localhost:8443");
    System.out.println();
  }
  WebAppContext bb=new WebAppContext();
  bb.setServer(server);
  bb.setContextPath("/");
  bb.setWar("src/main/webapp");
  server.setHandler(bb);
  MBeanServer mBeanServer=ManagementFactory.getPlatformMBeanServer();
  MBeanContainer mBeanContainer=new MBeanContainer(mBeanServer);
  server.getContainer().addEventListener(mBeanContainer);
  try {
    mBeanContainer.start();
    server.start();
    server.join();
  }
 catch (  Exception e) {
    e.printStackTrace();
    System.exit(100);
  }
}
