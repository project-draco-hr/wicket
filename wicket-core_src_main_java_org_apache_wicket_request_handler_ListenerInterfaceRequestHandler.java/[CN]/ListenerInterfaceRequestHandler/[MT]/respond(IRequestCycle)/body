{
  final IRequestablePage page=getPage();
  final boolean freshPage=pageComponentProvider.isPageInstanceFresh();
  final boolean isAjax=((WebRequest)requestCycle.getRequest()).isAjax();
  if (getComponent().getPage() == page) {
    if (page instanceof Page) {
      ((Page)page).internalInitialize();
    }
    final boolean isStateless=page.isPageStateless();
    RedirectPolicy policy=isStateless ? RedirectPolicy.NEVER_REDIRECT : RedirectPolicy.AUTO_REDIRECT;
    final IPageProvider pageProvider=new PageProvider(page);
    if (freshPage && isStateless == false) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("A ListenerInterface '{}' assigned to '{}' is executed on an expired stateful page. " + "Scheduling re-create of the page and ignoring the listener interface...",listenerInterface,getComponentPath());
      }
      if (isAjax) {
        policy=RedirectPolicy.ALWAYS_REDIRECT;
      }
      requestCycle.scheduleRequestHandlerAfterCurrent(new RenderPageRequestHandler(pageProvider,policy));
      return;
    }
    if (isAjax == false && listenerInterface.isRenderPageAfterInvocation()) {
      requestCycle.scheduleRequestHandlerAfterCurrent(new RenderPageRequestHandler(pageProvider,policy));
    }
    invokeListener();
  }
 else {
    throw new WicketRuntimeException("Component " + getComponent() + " has been removed from page.");
  }
}
