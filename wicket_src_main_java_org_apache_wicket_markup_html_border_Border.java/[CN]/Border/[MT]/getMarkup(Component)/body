{
  if ((child != null) && (BODY_ID.equals(child.getId()) == false)) {
    IMarkupFragment markup=getMarkup();
    if (markup == null) {
      return null;
    }
    markup=markup.find(null,child.getId(),0);
    if (markup != null) {
      return markup;
    }
  }
  IMarkupFragment markup=getAssociatedMarkup();
  if (markup == null) {
    throw new MarkupException("Unable to find associated markup file for Border: " + this.toString());
  }
  int i;
  for (i=0; i < markup.size(); i++) {
    MarkupElement elem=markup.get(i);
    if (elem instanceof WicketTag) {
      WicketTag tag=(WicketTag)elem;
      if (tag.isBorderTag()) {
        break;
      }
    }
  }
  if (child == null) {
    return new MarkupFragment(markup,i);
  }
  if (BODY_ID.equals(child.getId())) {
    int index=markup.findComponentIndex(null,child.getId(),i);
    if (index == -1) {
      throw new MarkupException("Unable to find <wicket:body> tag. Border: " + this.toString() + ". Associated Markup: "+ markup.toString());
    }
    return new MarkupFragment(markup,index);
  }
  return markup.find(null,child.getId(),i);
}
