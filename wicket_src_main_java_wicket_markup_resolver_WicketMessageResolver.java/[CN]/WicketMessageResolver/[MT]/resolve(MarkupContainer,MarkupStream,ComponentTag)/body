{
  if (tag.isMessageTag()) {
    String messageKey=tag.getAttributes().getString("key");
    if ((messageKey == null) || (messageKey.trim().length() == 0)) {
      throw new MarkupException("Wrong format of <wicket:message key='xxx'>: attribute 'key' is missing");
    }
    final String value=container.getApplication().getResourceSettings().getLocalizer().getString(messageKey,container,"");
    final String id=newAutoId(container);
    Component component=null;
    if ((value != null) && (value.trim().length() > 0)) {
      component=new MyLabel(container,id,value);
    }
 else {
      log.info("No value found for message key: " + messageKey);
      component=new WebMarkupContainer(container,id);
    }
    component.setRenderBodyOnly(container.getApplication().getMarkupSettings().getStripWicketTags());
    component.autoAdded();
    return true;
  }
  if (tag.getId().equals(WicketMessageTagHandler.WICKET_MESSAGE_CONTAINER_ID)) {
    final String id=newAutoId(container);
    MarkupContainer messageContainer=new WebMarkupContainer(container,id){
      private static final long serialVersionUID=1L;
      @Override public boolean isTransparentResolver(){
        return true;
      }
    }
;
    messageContainer.add(WicketMessageTagHandler.ATTRIBUTE_LOCALIZER);
    messageContainer.autoAdded();
    return true;
  }
  return false;
}
