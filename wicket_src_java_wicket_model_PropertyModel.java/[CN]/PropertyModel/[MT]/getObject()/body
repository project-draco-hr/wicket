{
  if (getExpression() == null || getExpression().trim().length() == 0) {
    return model.getObject();
  }
  IModel theModel=getModel();
  if (theModel == null) {
    return null;
  }
  Object modelObject=theModel.getObject();
  if (modelObject == null) {
    return null;
  }
  try {
    Object raw=Ognl.getValue(getExpression(),getContext(),modelObject);
    if (applyFormatting) {
      FormattingUtils formattingUtils=converterRegistry.getFormattingUtils();
      return formattingUtils.getObjectFormatted(raw,getLocale(),getFormatPattern(),getFormatPattern());
    }
 else {
      return raw;
    }
  }
 catch (  OgnlException e) {
    throw new WicketRuntimeException(e);
  }
}
