{
  CharSequence cacheKey=markupResourceStream.getCacheKey();
  try {
    Markup markup=application.getMarkupSettings().getMarkupParserFactory().newMarkupParser(markupResourceStream).parse();
    markup=checkForMarkupInheritance(container,markup);
    if (cacheKey != null) {
      markupCache.put(cacheKey,markup);
    }
    afterLoadListeners.notifyListeners(markupResourceStream);
    return markup;
  }
 catch (  ResourceStreamNotFoundException e) {
    log.error("Unable to find markup from " + markupResourceStream,e);
  }
catch (  IOException e) {
    log.error("Unable to read markup from " + markupResourceStream,e);
  }
synchronized (markupCache) {
    if (cacheKey != null) {
      markupCache.remove(cacheKey);
      afterLoadListeners.remove(markupResourceStream);
    }
  }
  return Markup.NO_MARKUP;
}
