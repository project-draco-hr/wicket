{
  Checks.argumentNotEmpty(tagName,"tagName");
  IMarkupFragment markup=getAssociatedMarkup();
  if (markup == null) {
    throw new MarkupException("Unable to find associated markup file for: " + this.toString());
  }
  IMarkupFragment panelMarkup=findTag(markup,tagName);
  if (panelMarkup == null) {
    throw new MarkupNotFoundException("Expected to find <wicket:" + tagName + "> in associated markup file. Markup: "+ markup.toString());
  }
  if (child == null) {
    return panelMarkup;
  }
  panelMarkup=panelMarkup.find(child.getId());
  if (panelMarkup != null) {
    return panelMarkup;
  }
  return findMarkupInAssociatedFileHeader(markup,child);
}
