{
  if (object == null) {
    return 0;
  }
  try {
    final ByteCountingOutputStream out=new ByteCountingOutputStream();
    new ObjectOutputStream(out).writeObject(object);
    out.close();
    return out.size();
  }
 catch (  IOException e) {
    if (log.isWarnEnabled()) {
      log.warn("Unable to determine object size: " + object.toString(),e);
    }
    return -1;
  }
}
