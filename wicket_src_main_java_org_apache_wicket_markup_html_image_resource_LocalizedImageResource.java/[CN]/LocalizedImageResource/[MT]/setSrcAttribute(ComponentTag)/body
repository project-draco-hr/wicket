{
  Locale l=component.getLocale();
  String s=component.getStyle();
  String v=component.getVariation();
  if (resourceKind == null && (!Objects.equal(locale,l) || !Objects.equal(style,s) || !Objects.equal(variation,v))) {
    locale=l;
    style=s;
    variation=v;
    resourceReference=null;
    resource=null;
  }
 else {
  }
  Object modelObject=component.getDefaultModelObject();
  if (modelObject instanceof ResourceReference) {
    resourceReference=(ResourceReference)modelObject;
  }
 else   if (modelObject instanceof IResource) {
    resource=(IResource)modelObject;
  }
  final CharSequence url;
  if (resourceReference != null) {
    IRequestHandler handler=new ResourceReferenceRequestHandler(resourceReference,resourceParameters);
    url=RequestCycle.get().renderUrlFor(handler);
  }
 else {
    url=component.urlFor(IResourceListener.INTERFACE);
  }
  tag.put("src",RequestCycle.get().getOriginalResponse().encodeURL(Strings.replaceAll(url,"&","&amp;")));
}
