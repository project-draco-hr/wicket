{
  List<EncoderWithSegmentsCount> list=new ArrayList<EncoderWithSegmentsCount>(mappers.size());
  for (  IRequestMapper encoder : mappers) {
    int score=encoder.getCompatibilityScore(request);
    list.add(new EncoderWithSegmentsCount(encoder,score));
  }
  Collections.sort(list);
  for (  EncoderWithSegmentsCount encoder : list) {
    IRequestHandler handler=encoder.getMapper().mapRequest(request);
    if (handler != null) {
      return handler;
    }
  }
  return null;
}
