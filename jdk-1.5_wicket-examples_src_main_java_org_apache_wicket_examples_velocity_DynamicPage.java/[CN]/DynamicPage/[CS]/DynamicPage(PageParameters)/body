{
  final IStringResourceStream template=new PackageResourceStream(DynamicPage.class,"fields.vm");
  Map<String,List<Field>> map=new HashMap<String,List<Field>>();
  List<Field> fields=VelocityTemplateApplication.getFields();
  map.put("fields",fields);
  VelocityPanel panel;
  add(panel=new VelocityPanel("templatePanel",Model.valueOf(map)){
    @Override protected IStringResourceStream getTemplateResource(){
      return template;
    }
    @Override protected boolean parseGeneratedMarkup(){
      return true;
    }
  }
);
  for (  Field field : fields) {
    panel.add(new TextField(field.getFieldName()));
    panel.add(new Label("label_" + field.getFieldName(),new ResourceModel(field.getFieldName())));
  }
}
