{
  if (isRootForm()) {
    String nameAndId=getHiddenFieldId();
    AppendingStringBuffer buffer=new AppendingStringBuffer("<div style=\"display:none\"><input type=\"hidden\" name=\"").append(nameAndId).append("\" id=\"").append(nameAndId).append("\" />");
    if (encodeUrlInHiddenFields()) {
      String url=urlFor(IFormSubmitListener.INTERFACE).toString();
      int i=url.indexOf('?');
      String[] params=((i > -1) ? url.substring(i + 1) : url).split("&");
      writeParamsAsHiddenFields(params,buffer);
    }
    buffer.append("</div>");
    getResponse().write(buffer);
    if (defaultSubmittingComponent instanceof Component) {
      final Component submittingComponent=(Component)defaultSubmittingComponent;
      if (submittingComponent.isVisibleInHierarchy() && submittingComponent.isEnabled()) {
        appendDefaultButtonField(markupStream,openTag);
      }
    }
  }
  super.onComponentTagBody(markupStream,openTag);
}
