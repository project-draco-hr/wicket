{
  Args.notNull(duration,"duration");
  Args.notNull(scope,"scope");
  if (duration.compareTo(MAX_CACHE_DURATION) > 0)   duration=MAX_CACHE_DURATION;
  long now=System.currentTimeMillis();
  setDateHeader("Date",now);
  setDateHeader("Expires",now + duration.getMilliseconds());
  setHeader("Cache-Control",scope.cacheControl + ", max-age=" + duration.getMilliseconds());
  setHeader("Vary","Accept-Encoding");
}
