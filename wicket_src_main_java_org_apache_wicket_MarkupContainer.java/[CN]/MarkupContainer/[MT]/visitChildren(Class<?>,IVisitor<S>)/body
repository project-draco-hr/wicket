{
  if (visitor == null) {
    throw new IllegalArgumentException("argument visitor may not be null");
  }
  for (int i=0; i < children_size(); i++) {
    final Component<?> child=children_get(i);
    Object value=null;
    if (clazz == null || clazz.isInstance(child)) {
      @SuppressWarnings("unchecked") S s=(S)child;
      value=visitor.component(s);
      if ((value != IVisitor.CONTINUE_TRAVERSAL) && (value != IVisitor.CONTINUE_TRAVERSAL_BUT_DONT_GO_DEEPER)) {
        return value;
      }
    }
    if ((child instanceof MarkupContainer) && (value != IVisitor.CONTINUE_TRAVERSAL_BUT_DONT_GO_DEEPER)) {
      value=((MarkupContainer<?>)child).visitChildren(clazz,visitor);
      if ((value != IVisitor.CONTINUE_TRAVERSAL) && (value != IVisitor.CONTINUE_TRAVERSAL_BUT_DONT_GO_DEEPER)) {
        return value;
      }
    }
  }
  return null;
}
