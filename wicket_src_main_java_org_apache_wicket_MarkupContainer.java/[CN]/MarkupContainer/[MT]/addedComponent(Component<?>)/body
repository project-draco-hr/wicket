{
  if (component == this) {
    throw new IllegalArgumentException("Component can't be added to itself");
  }
  MarkupContainer<?> parent=component.getParent();
  if (parent != null) {
    parent.remove(component);
  }
  component.setParent(this);
  final Page<?> page=findPage();
  final IDebugSettings debugSettings=Application.get().getDebugSettings();
  if (debugSettings.isLinePreciseReportingOnAddComponentEnabled()) {
    component.setMetaData(ADDED_AT_KEY,Strings.toString(component,new MarkupException("added")));
  }
  if (page != null) {
    page.componentAdded(component);
  }
  if (isPreparedForRender()) {
    component.beforeRender();
  }
}
