{
  final String updateTimeIsExecuted="updateTime is executed!";
  WicketTester tester=new WicketTester();
  HomePage page=new HomePage(new PageParameters()){
    @Subscribe public void updateTime(    AjaxRequestTarget target,    Date event){
      super.updateTime(target,event);
      target.appendJavaScript(updateTimeIsExecuted);
    }
    @Subscribe(contextAwareFilter=ReceiverFilter.class) public void receiveMessage(    AjaxRequestTarget target,    ChatMessage message){
      super.receiveMessage(target,message);
      System.err.println("receiveMessage");
    }
  }
;
  AtmosphereTester waTester=new AtmosphereTester(tester,page);
  Date payload=new Date();
  waTester.post(payload);
  tester.assertContains(updateTimeIsExecuted);
  tester.destroy();
}
