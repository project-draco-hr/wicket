{
  final String cacheKey=markupResourceStream.getCacheKey();
  if (cacheKey != null) {
    String locationString=markupResourceStream.locationAsString();
    if (locationString == null) {
      locationString=cacheKey;
    }
    Markup markup=markupCache.get(locationString);
    if (markup != null) {
      markupKeyCache.put(cacheKey,locationString);
      return markup;
    }
    final IModificationWatcher watcher=Application.get().getResourceSettings().getResourceWatcher(true);
    if (watcher != null) {
      watcher.add(markupResourceStream,new IChangeListener(){
        public void onChange(){
          if (log.isDebugEnabled()) {
            log.debug("Remove markup from cache: " + markupResourceStream);
          }
          watcher.remove(markupResourceStream);
          removeMarkup(cacheKey);
        }
      }
);
    }
  }
  if (log.isDebugEnabled()) {
    log.debug("Loading markup from " + markupResourceStream);
  }
  return loadMarkup(container,markupResourceStream,enforceReload);
}
