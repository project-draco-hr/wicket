{
  String cacheKey=markupResourceStream.getCacheKey();
  String locationString=markupResourceStream.locationAsString();
  if (locationString == null) {
    locationString=cacheKey;
  }
  try {
    Markup markup=getMarkupLoader().loadMarkup(container,markupResourceStream,null,enforceReload);
    if (cacheKey != null) {
      if (markup.locationAsString() != null) {
        locationString=markup.locationAsString();
      }
      markupKeyCache.put(cacheKey,locationString);
      return putIntoCache(locationString,container,markup);
    }
    return markup;
  }
 catch (  ResourceStreamNotFoundException e) {
    log.error("Unable to find markup from " + markupResourceStream,e);
  }
catch (  IOException e) {
    log.error("Unable to read markup from " + markupResourceStream,e);
  }
  if (cacheKey != null) {
    removeMarkup(cacheKey);
  }
  return Markup.NO_MARKUP;
}
