{
  checkComponentTag(tag,"form");
  setOutputMarkupId(true);
  super.onComponentTag(tag);
  tag.put("method","post");
  Page page=getPage();
  boolean addAction=true;
  if (bookmarkableHint && page.isStateless()) {
    try {
      if (page.getClass().getConstructor((Class[])null) != null || page.getClass().getConstructor(new Class[]{PageParameters.class}) != null) {
        BookmarkableListenerInterfaceRequestTarget target=new BookmarkableListenerInterfaceRequestTarget(page.getPageMap().getName(),page.getClass(),new PageParameters(),this,IFormSubmitListener.INTERFACE);
        tag.put("action",urlFor(target));
        addAction=false;
      }
    }
 catch (    Exception e) {
    }
  }
  if (addAction) {
    tag.put("action",Strings.replaceAll(urlFor(IFormSubmitListener.INTERFACE),"&","&amp;"));
  }
  if (multiPart) {
    tag.put("enctype","multipart/form-data");
  }
 else {
    String enctype=(String)tag.getAttributes().get("enctype");
    if ("multipart/form-data".equalsIgnoreCase(enctype)) {
      setMultiPart(true);
    }
  }
}
