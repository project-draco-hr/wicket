{
  Form<MockDomainObject> form=new Form<MockDomainObject>("form",new CompoundPropertyModel<MockDomainObject>(new MockDomainObject()));
  add(form);
  final Button submit=new Button("submit");
  submit.setOutputMarkupId(true);
  submit.setEnabled(false);
  form.add(submit);
  final TextField<String> text=new TextField<String>("text");
  text.setRequired(true);
  text.add(StringValidator.minimumLength(4));
  text.add(new AjaxFormValidatingBehavior(form,"onkeyup"){
    private static final long serialVersionUID=1L;
    @Override protected void onEvent(    AjaxRequestTarget target){
      text.validate();
      submit.setEnabled(text.isValid());
      target.add(submit);
    }
  }
);
  form.add(text);
}
