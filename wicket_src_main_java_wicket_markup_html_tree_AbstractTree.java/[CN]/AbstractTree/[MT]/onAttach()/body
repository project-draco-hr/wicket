{
  if (attached == false) {
    onBeforeAttach();
    checkModel();
    if (dirtyAll && rootItem != null) {
      clearAllItem();
    }
 else {
      rebuildDirty();
    }
    if (rootItem == null) {
      TreeNode rootNode=(TreeNode)getModelObject().getRoot();
      if (rootNode != null) {
        if (isRootLess()) {
          rootItem=newTreeItem(rootNode,-1);
        }
 else {
          rootItem=newTreeItem(rootNode,0);
        }
        buildItemChildren(rootItem);
      }
    }
    attached=true;
  }
  super.onAttach();
}
