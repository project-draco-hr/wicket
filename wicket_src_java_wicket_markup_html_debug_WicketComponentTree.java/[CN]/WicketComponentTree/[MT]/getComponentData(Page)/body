{
  final List data=new ArrayList();
  page.visitChildren(new IVisitor(){
    public Object component(    final Component component){
      if (!component.getPath().startsWith(WicketComponentTree.this.getPath())) {
        final ComponentData object=new ComponentData();
        String name=component.getClass().getName();
        if (name.indexOf("$") > 0) {
          name=component.getClass().getSuperclass().getName();
        }
        name=Strings.lastPathComponent(name,':');
        object.path=component.getPageRelativePath();
        object.type=name;
        try {
          object.value=component.getModelObjectAsString();
        }
 catch (        Exception e) {
          object.value=e.getMessage();
        }
        data.add(object);
      }
      return IVisitor.CONTINUE_TRAVERSAL;
    }
  }
);
  return data;
}
