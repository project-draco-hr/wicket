{
  boolean copy=false;
  for (int i=0; i < extendIndex; i++) {
    final MarkupElement elem=markup.get(i);
    if (elem instanceof ComponentTag) {
      final ComponentTag etag=(ComponentTag)elem;
      if (etag.isWicketHeadTag()) {
        if (etag.isOpen()) {
          copy=true;
        }
 else {
          addMarkupElement(elem);
          break;
        }
      }
    }
    if (copy == true) {
      addMarkupElement(elem);
    }
  }
}
