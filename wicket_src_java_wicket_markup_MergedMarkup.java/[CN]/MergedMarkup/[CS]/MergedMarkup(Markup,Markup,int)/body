{
  setResource(markup.getResource());
  setXmlDeclaration(markup.getXmlDeclaration());
  setEncoding(markup.getEncoding());
  setWicketNamespace(markup.getWicketNamespace());
  if (log.isDebugEnabled()) {
    String derivedResource=Strings.afterLast(markup.getResource().toString(),'/');
    String baseResource=Strings.afterLast(baseMarkup.getResource().toString(),'/');
    log.debug("Merge markup: derived markup: " + derivedResource + "; base markup: "+ baseResource);
  }
  merge(markup,baseMarkup,extendIndex);
  initialize();
  if (log.isDebugEnabled()) {
    log.debug("Merge markup: " + toDebugString());
  }
}
