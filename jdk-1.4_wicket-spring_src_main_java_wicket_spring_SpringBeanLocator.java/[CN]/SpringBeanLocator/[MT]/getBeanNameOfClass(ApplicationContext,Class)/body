{
  String[] names=BeanFactoryUtils.beanNamesForTypeIncludingAncestors(ctx,clazz);
  if (names.length == 0) {
    throw new IllegalStateException("bean of type [" + clazz.getName() + "] not found");
  }
  if (names.length > 1) {
    throw new IllegalStateException("more then one bean of type [" + clazz.getName() + "] found, you have to specify the name of the bean (@SpringBean(name=\"foo\")) in order to resolve this conflict");
  }
  return names[0];
}
