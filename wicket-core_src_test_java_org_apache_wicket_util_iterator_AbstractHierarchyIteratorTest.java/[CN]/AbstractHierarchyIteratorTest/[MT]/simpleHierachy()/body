{
  Page page=new MyPage();
  WebComponent a;
  page.add(a=new WebComponent("a"));
  WebMarkupContainer b;
  page.add(b=new WebMarkupContainer("b"));
  WebMarkupContainer b1;
  b.add(b1=new WebMarkupContainer("b1"));
  WebMarkupContainer b2;
  b.add(b2=new WebMarkupContainer("b2"));
  WebMarkupContainer b21;
  b2.add(b21=new WebMarkupContainer("b21"));
  ComponentHierarchyIterator iter=new ComponentHierarchyIterator(page);
  assertTrue(iter.hasNext());
  assertEquals("a",iter.next().getId());
  assertTrue(iter.hasNext());
  assertEquals("b",iter.next().getId());
  assertTrue(iter.hasNext());
  assertEquals("b1",iter.next().getId());
  assertTrue(iter.hasNext());
  assertEquals("b2",iter.next().getId());
  assertTrue(iter.hasNext());
  assertEquals("b21",iter.next().getId());
  assertFalse(iter.hasNext());
  assertNull(iter.next());
}
