{
  final MarkupStream associatedMarkupStream=getApplication().getMarkupCache().getMarkupStream(this,null,false);
  if (associatedMarkupStream == null) {
    return null;
  }
  do {
    final MarkupElement element=associatedMarkupStream.get();
    if (element instanceof WicketTag) {
      final WicketTag wTag=(WicketTag)element;
      if (wTag.isHeadTag() == true) {
        final String headerId="_" + Classes.name(this.getClass()) + "Header";
        WebMarkupContainer headerContainer=new HtmlHeaderContainer(headerId,associatedMarkupStream);
        if (this.headerComponents != null) {
          for (Iterator iter=headerComponents.iterator(); iter.hasNext(); ) {
            headerContainer.add((Component)iter.next());
          }
          this.headerComponents=null;
        }
        return headerContainer;
      }
    }
  }
 while (associatedMarkupStream.next() != null);
  if (this.headerComponents == null) {
    throw new MarkupException("You have added header components but did not specific a <wicket:head> region in your markup");
  }
  return null;
}
