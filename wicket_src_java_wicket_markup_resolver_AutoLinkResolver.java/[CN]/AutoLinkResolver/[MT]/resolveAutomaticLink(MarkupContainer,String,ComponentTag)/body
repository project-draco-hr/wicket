{
  final Page page=container.getPage();
  final String autoId=id + Integer.toString(page.getAutoIndex());
  final String tagName=tag.getName();
  tag.setId(autoId);
  ITagReferenceResolver referenceResolver=(ITagReferenceResolver)tagNameToTagReferenceResolvers.get(tagName);
  if (referenceResolver == null) {
    referenceResolver=DEFAULT_ATTRIBUTE_RESOLVER;
  }
  String reference=referenceResolver.getReference(tag);
  IAutolinkResolverDelegate autolinkResolverDelegate=(IAutolinkResolverDelegate)tagNameToAutolinkResolverDelegates.get(tagName);
  if (autolinkResolverDelegate == null) {
    autolinkResolverDelegate=DEFAULT_RESOLVER_DELEGATE;
  }
  PathInfo pathInfo=new PathInfo(reference);
  Component autoComponent=autolinkResolverDelegate.newAutoComponent(container,autoId,pathInfo);
  if (autoComponent == null) {
    autoComponent=DEFAULT_RESOLVER_DELEGATE.newAutoComponent(container,autoId,pathInfo);
  }
  return autoComponent;
}
