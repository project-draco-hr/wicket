{
  String mountPath=(String)mountsOnTarget.get(requestTarget);
  if (mountPath != null) {
    final StringBuffer url=urlPrefix(requestCycle);
    url.append(mountPath);
    if (requestTarget instanceof PageClassRequestTarget) {
      PageClassRequestTarget pageTarget=(PageClassRequestTarget)requestTarget;
      PageClassRequestTarget mountedTarget=(PageClassRequestTarget)getMountedTarget(mountPath);
      url.append(mountedTarget.getParamsEncoder().encode(pageTarget.getPageParameters()));
    }
    return url.toString();
  }
  if (requestTarget instanceof IPageClassRequestTarget) {
    return encode(requestCycle,(IPageClassRequestTarget)requestTarget);
  }
 else   if (requestTarget instanceof IListenerInterfaceRequestTarget) {
    return encode(requestCycle,(IListenerInterfaceRequestTarget)requestTarget);
  }
 else   if (requestTarget instanceof ISharedResourceRequestTarget) {
    return encode(requestCycle,(ISharedResourceRequestTarget)requestTarget);
  }
 else   if (requestTarget instanceof IPageRequestTarget) {
  }
  String url=doEncode(requestCycle,requestTarget);
  if (url != null) {
    return url;
  }
  throw new WicketRuntimeException("unable to encode " + requestTarget);
}
