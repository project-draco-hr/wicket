{
  final RequestParameters parameters=new RequestParameters();
  final String pathInfo=getRequestPath(request);
  parameters.setPath(pathInfo);
  parameters.setPageMapName(WebRequestCodingStrategy.decodePageMapName(request.getParameter(PAGEMAP)));
  addInterfaceParameters(request,parameters);
  addBookmarkablePageParameters(request,parameters);
  addResourceParameters(request,parameters);
  if (request.getParameter(IGNORE_IF_NOT_ACTIVE_PARAMETER_NAME) != null) {
    parameters.setOnlyProcessIfPathActive(true);
  }
  Map map=request.getParameterMap();
  Iterator iterator=map.keySet().iterator();
  while (iterator.hasNext()) {
    String key=(String)iterator.next();
    if (key.startsWith(NAME_SPACE)) {
      iterator.remove();
    }
  }
  parameters.setParameters(map);
  return parameters;
}
