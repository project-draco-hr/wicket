{
  application=new MockApplication(){
    @Override protected void init(){
      super.init();
      setPageManagerProvider(new IPageManagerProvider(){
        public IPageManager get(        IPageManagerContext pageManagerContext){
          IPageStore pageStore=new DefaultPageStore(application.getName(),dataStore,4);
          return new PersistentPageManager(application.getName(),pageStore,pageManagerContext);
        }
      }
);
    }
  }
;
  dataStore=new InMemoryPageStore(){
    @Override public void storeData(    String sessionId,    int pageId,    byte[] pageAsBytes){
      super.storeData(sessionId,pageId,pageAsBytes);
      storeCount++;
    }
  }
;
  tester=new WicketTester(application);
}
