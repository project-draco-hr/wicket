{
  resetHeadRendered();
  if (!isActionAuthorized(RENDER)) {
    if (log.isDebugEnabled()) {
      log.debug("Page not allowed to render: " + this);
    }
    throw new UnauthorizedActionException(this,Component.RENDER);
  }
  if (Application.get().getDebugSettings().getComponentUseCheck()) {
    RequestCycle.get().getDebugHelper().resetRenderedComponentsSet();
  }
  this.stateless=null;
  setFormComponentValuesFromCookies();
  visitChildren(IFeedback.class,new IVisitor(){
    public Object component(    Component component){
      ((IFeedback)component).updateFeedback();
      component.internalAttach();
      return IVisitor.CONTINUE_TRAVERSAL;
    }
  }
);
  if (this instanceof IFeedback) {
    ((IFeedback)this).updateFeedback();
  }
  internalAttach();
  setRenderAllowed(isActionAuthorized(RENDER));
  visitChildren(new IVisitor(){
    public Object component(    final Component component){
      component.resetHeadRendered();
      final boolean renderAllowed=component.isActionAuthorized(RENDER);
      component.setRenderAllowed(renderAllowed);
      return IVisitor.CONTINUE_TRAVERSAL;
    }
  }
);
  render(null);
  if (Application.get().getDebugSettings().getComponentUseCheck()) {
    RequestCycle.get().getDebugHelper().onEndComponentRender(this);
  }
  if (!isPageStateless()) {
    Session.get().getSessionStore().getSessionId(RequestCycle.get().getRequest(),true);
    getSession().touch(this);
  }
}
