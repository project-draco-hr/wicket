{
  ClassLoader classLoader=null;
  if (clazz != null) {
    classLoader=clazz.getClassLoader();
  }
  if (classLoader == null) {
    classLoader=Thread.currentThread().getContextClassLoader();
  }
  if (classLoader == null) {
    classLoader=getClass().getClassLoader();
  }
  if (log.isDebugEnabled()) {
    log.debug("Attempting to locate resource '" + path + "' using classloader "+ classLoader);
  }
  final URL url=classLoader.getResource(path);
  if (url != null) {
    return new UrlResourceStream(url);
  }
  return null;
}
