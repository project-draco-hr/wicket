{
  tester.setupRequestAndResponse();
  tester.processRequestCycle();
  MockLoginPage loginPage=(MockLoginPage)tester.getLastRenderedPage();
  assertEquals(application.getLoginPage(),loginPage.getClass());
  tester.setupRequestAndResponse();
  WebRequestCycle requestCycle=tester.createRequestCycle();
  assertTrue(((MockLoginPage)tester.getLastRenderedPage()).login("admin"));
  tester.processRequestCycle(requestCycle);
  assertEquals(application.getHomePage(),tester.getLastRenderedPage().getClass());
  tester.setupRequestAndResponse();
  tester.getServletRequest().setRequestToComponent(tester.getLastRenderedPage().get("link"));
  tester.processRequestCycle();
  assertEquals(PageA.class,tester.getLastRenderedPage().getClass());
}
