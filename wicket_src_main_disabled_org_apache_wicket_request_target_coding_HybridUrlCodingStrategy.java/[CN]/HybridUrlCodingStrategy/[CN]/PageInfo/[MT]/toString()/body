{
  String pageMapName=this.pageMapName;
  if ((pageMapName != null) && (pageId != null) && Application.exists()&& Application.get().getSessionSettings().isPageIdUniquePerSession()) {
    pageMapName=null;
  }
  AppendingStringBuffer buffer=new AppendingStringBuffer(5);
  final boolean pmEmpty=Strings.isEmpty(pageMapName);
  final boolean pmContainsLetter=!pmEmpty && !isNumber(pageMapName);
  if ((pageId != null) && pmEmpty && (versionNumber.intValue() == 0)) {
    buffer.append(pageId);
  }
 else   if ((pageId != null) && pmEmpty && (versionNumber.intValue() != 0)) {
    buffer.append(pageId);
    buffer.append(getPageInfoSeparator());
    buffer.append(versionNumber);
  }
 else   if ((pageId == null) && pmContainsLetter) {
    buffer.append(pageMapName);
  }
 else   if ((pageId == null) && !pmEmpty && !pmContainsLetter) {
    buffer.append(getPageInfoSeparator());
    buffer.append(pageMapName);
  }
 else   if (pmContainsLetter && (pageId != null) && (versionNumber.intValue() == 0)) {
    buffer.append(pageMapName);
    buffer.append(getPageInfoSeparator());
    buffer.append(pageId);
  }
 else   if (!pmEmpty && (pageId != null)) {
    buffer.append(pageMapName);
    buffer.append(getPageInfoSeparator());
    buffer.append(pageId);
    buffer.append(getPageInfoSeparator());
    buffer.append(versionNumber);
  }
  return buffer.toString();
}
