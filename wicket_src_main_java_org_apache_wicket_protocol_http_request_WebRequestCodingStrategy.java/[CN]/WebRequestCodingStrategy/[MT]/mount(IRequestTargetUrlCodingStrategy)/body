{
  if (encoder == null) {
    throw new IllegalArgumentException("Argument encoder must not be null");
  }
  String path=encoder.getMountPath();
  if (path == null) {
    throw new IllegalArgumentException("Argument path must not be null");
  }
  if (path.equals("/") || path.equals("")) {
    throw new IllegalArgumentException("The mount path '/' is reserved for the application home page");
  }
  if (path.startsWith("/")) {
    path=path.substring(1);
  }
synchronized (mountsOnPath) {
    if (mountsOnPath.strategyForMount(path) != null) {
      throw new WicketRuntimeException(path + " is already mounted for " + mountsOnPath.strategyForMount(path));
    }
    mountsOnPath.mount(path,encoder);
  }
}
