{
  final RequestCycle requestCycle=RequestCycle.get();
  try {
    BufferedWebResponse response=(BufferedWebResponse)requestCycle.getResponse();
    CharSequence output=transform(component,response.getText());
    response.setText(output);
    response.writeTo(webResponse);
  }
 catch (  Exception ex) {
    throw new WicketRuntimeException("Error while transforming the output: " + this,ex);
  }
 finally {
    requestCycle.setResponse(webResponse);
  }
}
