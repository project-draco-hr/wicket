{
class FindFormVisitor implements Component.IVisitor {
    Form form=null;
    public Object component(    Component component){
      form=(Form)component;
      return Component.IVisitor.STOP_TRAVERSAL;
    }
  }
  Form form=findParent(Form.class);
  if (form == null) {
    final Border border=findParent(Border.class);
    if (border != null) {
      FindFormVisitor formVisitor=new FindFormVisitor();
      border.visitChildren(Form.class,formVisitor);
      form=formVisitor.form;
    }
    if (form == null) {
      throw new WicketRuntimeException("Could not find Form parent for " + this);
    }
  }
  return form;
}
