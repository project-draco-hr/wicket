{
  final HttpServletRequest request=((WebRequest)getRequest()).getHttpServletRequest();
  try {
    final MultipartWebRequest multipartWebRequest=new MultipartWebRequest(this,request);
    getRequestCycle().setRequest(multipartWebRequest);
    super.process();
  }
 catch (  FileUploadException e) {
    final HashMap model=new HashMap();
    model.put("exception",e);
    model.put("maxSize",maxSize);
    if (e instanceof SizeLimitExceededException) {
      final String defaultValue="Upload must be less than " + maxSize;
      String msg=getString(getId() + ".uploadTooLarge",Model.valueOf(model),defaultValue);
      error(msg);
      if (log.isDebugEnabled()) {
        log.error(msg,e);
      }
 else {
        log.error(msg);
      }
    }
 else {
      final String defaultValue="Upload failed: " + e.getLocalizedMessage();
      String msg=getString(getId() + ".uploadFailed",Model.valueOf(model),defaultValue);
      error(msg);
      log.error(msg,e);
    }
  }
}
