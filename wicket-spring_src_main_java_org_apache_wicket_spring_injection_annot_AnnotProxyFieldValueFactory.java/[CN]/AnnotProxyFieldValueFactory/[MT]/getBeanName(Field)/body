{
  SpringBean annot=field.getAnnotation(SpringBean.class);
  String name;
  boolean required;
  if (annot != null) {
    name=annot.name();
    required=annot.required();
  }
 else {
    Named named=field.getAnnotation(Named.class);
    name=named != null ? named.value() : "";
    required=false;
  }
  if (Strings.isEmpty(name)) {
    name=beanNameCache.get(field.getType());
    if (name == null) {
      name=getBeanNameOfClass(contextLocator.getSpringContext(),field.getType(),required);
      if (name != null) {
        String tmpName=beanNameCache.putIfAbsent(field.getType(),name);
        if (tmpName != null) {
          name=tmpName;
        }
      }
    }
  }
  return name;
}
