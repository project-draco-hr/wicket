{
  if (supportsField(field)) {
    String beanName=getBeanName(field);
    if (beanName == null) {
      return null;
    }
    SpringBeanLocator locator=new SpringBeanLocator(beanName,field.getType(),contextLocator);
    Object cachedValue=cache.get(locator);
    if (cachedValue != null) {
      return cachedValue;
    }
    Object target;
    if (wrapInProxies) {
      target=LazyInitProxyFactory.createProxy(field.getType(),locator);
    }
 else {
      target=locator.locateProxyTarget();
    }
    if (locator.isSingletonBean()) {
      Object tmpTarget=cache.putIfAbsent(locator,target);
      if (tmpTarget != null) {
        target=tmpTarget;
      }
    }
    return target;
  }
  return null;
}
