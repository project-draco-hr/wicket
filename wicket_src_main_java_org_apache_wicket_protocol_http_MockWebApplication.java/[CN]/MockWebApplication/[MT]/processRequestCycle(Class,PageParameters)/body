{
  setupRequestAndResponse();
  final WebRequestCycle cycle=createRequestCycle();
  try {
    BaseWicketTester.callOnBeginRequest(cycle);
    cycle.request(new BookmarkablePageRequestTarget(pageClass,params));
  }
  finally {
    cycle.getResponse().close();
  }
  postProcessRequestCycle(cycle);
}
