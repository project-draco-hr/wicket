{
  TreeStateNode aChild;
  int retCount=stopIndex + 1;
  for (int counter=0, maxCounter=getChildCount(); counter < maxCounter; counter++) {
    aChild=(TreeStateNode)getChildAt(counter);
    if (aChild.childIndex >= stopIndex)     counter=maxCounter;
 else     retCount+=aChild.getTotalChildCount();
  }
  if (parent != null)   return retCount + ((TreeStateNode)getParent()).getCountTo(childIndex);
  if (!isRootVisible())   return (retCount - 1);
  return retCount;
}
