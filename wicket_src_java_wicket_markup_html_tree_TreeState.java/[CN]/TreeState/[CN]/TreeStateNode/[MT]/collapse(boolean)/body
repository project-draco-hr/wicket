{
  if (isExpanded) {
    if (isVisible() && adjustRows) {
      int childCount=getTotalChildCount();
      isExpanded=false;
      adjustRowCountBy(-childCount);
      adjustRowBy(-childCount,0);
    }
 else {
      isExpanded=false;
    }
    if (adjustRows && isVisible() && treeSelectionModel != null) {
      treeSelectionModel.resetRowSelection();
    }
  }
}
