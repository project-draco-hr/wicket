{
  return new IRequestCycleFactory(){
    private static final long serialVersionUID=1L;
    public RequestCycle newRequestCycle(    Session session,    Request request,    Response response){
      if (request instanceof WicketPortletRequest) {
        WicketPortletRequest req=(WicketPortletRequest)request;
        WicketPortletResponse res=(WicketPortletResponse)response;
        PortletRequest preq=req.getPortletRequest();
        PortletResponse pres=res.getPortletResponse();
        if (preq instanceof ActionRequest) {
          return new PortletActionRequestCycle((WicketPortletSession)session,(WicketPortletRequest)request,(WicketPortletResponse)response);
        }
 else {
          return new PortletRenderRequestCycle((WicketPortletSession)session,(WicketPortletRequest)request,(WicketPortletResponse)response);
        }
      }
      return new WebRequestCycle((WebSession)session,(WebRequest)request,(WebResponse)response);
    }
  }
;
}
