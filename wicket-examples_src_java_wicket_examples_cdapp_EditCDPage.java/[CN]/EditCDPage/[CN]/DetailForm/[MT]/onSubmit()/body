{
  CD cd=(CD)getModelObject();
  boolean isNew=(cd.getId() == null);
  Session session=null;
  Transaction tx=null;
  try {
    session=HibernateHelper.getSession();
    tx=session.beginTransaction();
    session.saveOrUpdate(cd);
    tx.commit();
    searchCDPage.setInfoMessageForNextRendering("cd " + cd.getTitle() + " saved");
    searchCDPage.modelChangedStructure();
    if (isNew) {
      searchCDPage.setCurrentResultPageToFirst();
    }
    getRequestCycle().setPage(searchCDPage);
  }
 catch (  HibernateException e) {
    try {
      tx.rollback();
    }
 catch (    HibernateException ex) {
      ex.printStackTrace();
    }
    throw new WicketRuntimeException(e);
  }
}
