{
  Iterator<URL> wicketResources=getApplicationSettings().getClassResolver().getResources("META-INF/wicket/");
  while (wicketResources.hasNext()) {
    URL metaInfWicket=wicketResources.next();
    String protocol=metaInfWicket.getProtocol();
    if ("jar".equals(protocol)) {
      JarURLConnection jarURLConnection=(JarURLConnection)metaInfWicket.openConnection();
      JarFile jarFile=jarURLConnection.getJarFile();
      Enumeration<JarEntry> jarEntries=jarFile.entries();
      while (jarEntries.hasMoreElements()) {
        JarEntry jarEntry=jarEntries.nextElement();
        String entryName=jarEntry.getName();
        if (entryName.startsWith("META-INF/wicket/") && entryName.endsWith(".properties")) {
          try (InputStream jarEntryStream=jarFile.getInputStream(jarEntry)){
            Properties properties=new Properties();
            properties.load(jarEntryStream);
            load(properties);
            break;
          }
         }
      }
    }
 else     if ("vfs".equals(protocol)) {
      URLConnection connection=metaInfWicket.openConnection();
      JarInputStream inputStream=(JarInputStream)connection.getInputStream();
      int offset=0;
      JarEntry jarEntry;
      while ((jarEntry=inputStream.getNextJarEntry()) != null) {
        String jarEntryName=jarEntry.getName();
        int size=(int)jarEntry.getSize();
        if (jarEntryName.endsWith(PROPERTIES_FILE_EXTENSION)) {
          byte[] buf=new byte[size];
          int read=inputStream.read(buf,offset,size);
          if (read == size) {
            Properties properties=new Properties();
            properties.load(new ByteArrayInputStream(buf));
            load(properties);
          }
 else {
            log.warn("Expected to read '{}' bytes from '{}' but actually read '{}'",size,jarEntryName,read);
          }
        }
        offset+=size;
      }
    }
 else     if ("file".equals(protocol)) {
      Folder metaInfWicketFolder=new Folder(metaInfWicket.toURI());
      File[] files=metaInfWicketFolder.getFiles(new Folder.FileFilter(){
        @Override public boolean accept(        File file){
          String fileName=file.getAbsolutePath();
          return fileName.contains("/META-INF/wicket/") && fileName.endsWith(PROPERTIES_FILE_EXTENSION);
        }
      }
);
      for (      File wicketPropertiesFile : files) {
        try (InputStream stream=wicketPropertiesFile.inputStream()){
          Properties properties=new Properties();
          properties.load(stream);
          load(properties);
        }
       }
    }
 else {
      log.error("Cannot load '{}'. The protocol '{}' is not supported!",metaInfWicket,protocol);
    }
  }
}
