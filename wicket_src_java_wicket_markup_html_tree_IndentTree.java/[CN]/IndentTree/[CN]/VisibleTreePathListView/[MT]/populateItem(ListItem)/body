{
  TreeNodeModel treeNodeModel=(TreeNodeModel)listItem.getModelObject();
  int level=treeNodeModel.getLevel();
  List spacerList=new ArrayList(level);
  for (int i=0; i < level; i++) {
    spacerList.add(treeNodeModel);
  }
  listItem.add(new SpacerList("spacers",spacerList));
  HtmlContainer nodeContainer=new HtmlContainer("node");
  Serializable userObject=treeNodeModel.getUserObject();
  if (userObject == null) {
    throw new RuntimeException("User object cannot be null");
  }
  TreeNodeLink expandCollapsLink=IndentTree.this.createJunctionLink(treeNodeModel);
  nodeContainer.add(expandCollapsLink);
  TreeNodeLink selectLink=IndentTree.this.createNodeLink(treeNodeModel);
  nodeContainer.add(selectLink);
  listItem.add(nodeContainer);
  listItem.add(new ComponentTagAttributeModifier("class",true,new SelectedPathReplacementModel(treeNodeModel)));
}
