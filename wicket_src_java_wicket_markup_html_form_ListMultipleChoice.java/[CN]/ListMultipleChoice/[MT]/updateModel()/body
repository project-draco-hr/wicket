{
  final String[] ids=inputAsStringArray();
  if (ids != null) {
    Collection selectedValues=(Collection)getModelObject();
    if (selectedValues != null) {
      selectedValues.clear();
    }
 else {
      selectedValues=new ArrayList();
      setModelObject(selectedValues);
    }
    if (ids != null && ids.length > 0 && !Strings.isEmpty(ids[0])) {
      final List choices=getChoices();
      for (int i=0; i < ids.length; i++) {
        for (int index=0; index < choices.size(); index++) {
          final Object choice=choices.get(index);
          if (getChoiceRenderer().getIdValue(choice,index).equals(ids[i])) {
            selectedValues.add(choice);
            break;
          }
        }
      }
    }
  }
}
