{
  Collection selectedValues=(Collection)getModelObject();
  if (selectedValues != null) {
    selectedValues.clear();
  }
 else {
    selectedValues=new ArrayList();
    setModelObject(selectedValues);
  }
  final String[] indicesOrIds=getRequestStrings();
  if (indicesOrIds != null) {
    final List list=getValues();
    for (int i=0; i < indicesOrIds.length; i++) {
      if (list instanceof IDetachableChoiceList) {
        selectedValues.add(((IDetachableChoiceList)list).objectForId(indicesOrIds[i]));
      }
 else {
        final int index=Integer.parseInt(indicesOrIds[i]);
        selectedValues.add(list.get(index));
      }
    }
  }
}
