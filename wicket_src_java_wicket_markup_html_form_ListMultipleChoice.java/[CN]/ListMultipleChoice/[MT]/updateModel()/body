{
  Collection selectedValues=(Collection)getModelObject();
  if (selectedValues != null) {
    selectedValues.clear();
  }
 else {
    selectedValues=new ArrayList();
    setModelObject(selectedValues);
  }
  final String[] ids=inputAsStringArray();
  if (ids != null && ids.length > 0 && !Strings.isEmpty(ids[0])) {
    final Collection choices=getChoices();
    for (int i=0; i < ids.length; i++) {
      Iterator it=getChoices().iterator();
      int index=-1;
      while (it.hasNext()) {
        index++;
        Object object=it.next();
        if (getChoiceRenderer().getIdValue(object,index).equals(ids[i])) {
          selectedValues.add(object);
          break;
        }
      }
    }
  }
}
