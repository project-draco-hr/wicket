{
  try {
    final RequestCycle cycle=RequestCycle.get();
    IResourceStream resourceStream=init();
    final Response response=cycle.getResponse();
    if (isCacheable()) {
      response.setLastModifiedTime(resourceStream.lastModifiedTime());
    }
 else {
      response.setLastModifiedTime(Time.valueOf(-1));
    }
    configureResponse(response);
    cycle.setRequestTarget(new ResourceStreamRequestTarget(resourceStream));
  }
  finally {
    parameters.set(null);
  }
}
