{
  Map<String,Object> map=pages.get();
  String wicketState=request.getParameter("wicketState");
  if (wicketState != null) {
    byte[] bytes=Base64.decodeBase64(wicketState.getBytes());
    ByteArrayInputStream in=new ByteArrayInputStream(bytes);
    try {
      GZIPInputStream gzip=new GZIPInputStream(in);
      ObjectInputStream ois=new ObjectInputStream(gzip);
      Page page=(Page)ois.readObject();
      ois.close();
      String name=page.getPageMap().attributeForId(page.getNumericId());
      map.put(name,page);
    }
 catch (    Exception ex) {
      throw new RuntimeException(ex);
    }
  }
}
