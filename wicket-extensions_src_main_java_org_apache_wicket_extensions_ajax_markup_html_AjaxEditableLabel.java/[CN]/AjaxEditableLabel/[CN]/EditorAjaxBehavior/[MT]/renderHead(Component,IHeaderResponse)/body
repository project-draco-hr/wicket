{
  super.renderHead(component,response);
  AjaxRequestAttributes saveAttributes=getAttributes();
  saveAttributes.getExtraParameters().put("save","true");
  saveAttributes.getDynamicExtraParameters().add("this.name+'='+Wicket.Form.encode(this.value)");
  saveAttributes.setEventName("blur");
  AjaxRequestAttributes cancelAttributes=getAttributes();
  cancelAttributes.getExtraParameters().put("save","false");
  cancelAttributes.setEventName("keyup");
  CharSequence saveAttributesJson=renderAjaxAttributes(component,saveAttributes);
  String saveCall="Wicket.Ajax.ajax(" + saveAttributesJson + ");";
  CharSequence cancelAttributesJson=renderAjaxAttributes(component,cancelAttributes);
  String cancelCall="Wicket.Ajax.ajax(" + cancelAttributesJson + ");";
  final String keyup="var kc=Wicket.Event.keyCode(attrs.event); if (kc===27) " + cancelCall + " else if (kc===13) "+ saveCall;
  AjaxRequestTarget target=AjaxRequestTarget.get();
  if (target != null) {
    target.appendJavaScript(saveCall);
    target.appendJavaScript(keyup);
  }
 else {
    response.render(JavaScriptHeaderItem.forScript(saveCall,"editable-blur-" + component.getMarkupId()));
    response.render(JavaScriptHeaderItem.forScript(keyup,"editable-keydown-" + component.getMarkupId()));
  }
}
