{
  if (associatedMarkupStream == null) {
    return -1;
  }
  MarkupElement elem=associatedMarkupStream.get();
  while (elem != null) {
    if (elem instanceof WicketTag) {
      WicketTag tag=(WicketTag)elem;
      if (tag.isOpen() && tag.isHeadTag()) {
        if (this.noMoreWicketHeadTagsAllowed == true) {
          throw new MarkupException("<wicket:head> tags are only allowed before <body>, </head>, <wicket:panel> etc. tag");
        }
        return associatedMarkupStream.getCurrentIndex();
      }
 else       if (tag.isOpen() && (tag.isPanelTag() || tag.isBorderTag() || tag.isExtendTag())) {
        this.noMoreWicketHeadTagsAllowed=true;
      }
    }
 else     if (elem instanceof ComponentTag) {
      ComponentTag tag=(ComponentTag)elem;
      if (tag.isClose() && TagUtils.isHeadTag(tag)) {
        this.noMoreWicketHeadTagsAllowed=true;
      }
 else       if (tag.isOpen() && TagUtils.isBodyTag(tag)) {
        this.noMoreWicketHeadTagsAllowed=true;
      }
    }
    elem=associatedMarkupStream.next();
  }
  return -1;
}
