{
  super(id);
  this.form=form;
  form.setOutputMarkupId(true);
  if (fileUploadField != null) {
    fileUploadField.setOutputMarkupId(true);
  }
  setRenderBodyOnly(true);
  add(HeaderContributor.forJavaScript(JS));
  ResourceReference css=getCss();
  if (css != null) {
    add(HeaderContributor.forCss(css));
  }
  final WebMarkupContainer barDiv=new WebMarkupContainer("bar");
  barDiv.setOutputMarkupId(true);
  add(barDiv);
  final WebMarkupContainer statusDiv=new WebMarkupContainer("status");
  statusDiv.setOutputMarkupId(true);
  add(statusDiv);
  if (!(RequestCycle.get().getRequest() instanceof UploadWebRequest) && !(RequestCycle.get().getRequest() instanceof MultipartRequest)) {
    log.warn("UploadProgressBar will not work without an UploadWebRequest. See the javadoc for details.");
  }
  form.add(new FormEnabler(this,statusDiv,barDiv,fileUploadField));
}
