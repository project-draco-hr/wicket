{
  super(id);
  uploadField=fileUploadField;
  this.form=form;
  form.setOutputMarkupId(true);
  if (fileUploadField != null) {
    fileUploadField.setOutputMarkupId(true);
  }
  setRenderBodyOnly(true);
  barDiv=new WebMarkupContainer("bar");
  barDiv.setOutputMarkupId(true);
  add(barDiv);
  statusDiv=new WebMarkupContainer("status");
  statusDiv.setOutputMarkupId(true);
  add(statusDiv);
  if (!(RequestCycle.get().getRequest() instanceof UploadWebRequest) && !(RequestCycle.get().getRequest() instanceof MultipartRequest)) {
    log.warn("UploadProgressBar will not work without an UploadWebRequest. See the javadoc for details.");
  }
}
