{
  super.renderHead(response);
  response.renderJavaScriptReference(WicketEventReference.INSTANCE);
  response.renderJavaScriptReference(WicketAjaxReference.INSTANCE);
  response.renderJavaScriptReference(JS);
  ResourceReference css=getCss();
  if (css != null) {
    response.renderCSSReference(css);
  }
  ResourceReference ref=new SharedResourceReference(RESOURCE_NAME);
  final String uploadFieldId=(uploadField == null) ? "" : uploadField.getMarkupId();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  PrintStream js=new PrintStream(out);
  js.printf("  var def=new Wicket.WUPB.Def('%s', '%s', '%s', '%s','%s');",getMarkupId(),statusDiv.getMarkupId(),barDiv.getMarkupId(),urlFor(ref,null),uploadFieldId);
  js.printf(" new Wicket.WUPB(def).bind('%s');",getCallbackForm().getMarkupId());
  response.renderOnDomReadyJavaScript(new String(out.toByteArray()));
}
