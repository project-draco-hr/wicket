{
  super.renderHead(response);
  response.renderJavaScriptReference(WicketEventReference.INSTANCE);
  response.renderJavaScriptReference(WicketAjaxReference.INSTANCE);
  response.renderJavaScriptReference(JS);
  ResourceReference css=getCss();
  if (css != null) {
    response.renderCSSReference(css);
  }
  ResourceReference ref=new SharedResourceReference(RESOURCE_NAME);
  final String uploadFieldId=(uploadField == null) ? "" : uploadField.getMarkupId();
  final String status=new StringResourceModel("UploadProgressBar.starting",this,(IModel<?>)null,"Upload starting...").getString();
  CharSequence url=urlFor(ref,null);
  StringBuilder builder=new StringBuilder(128);
  Formatter formatter=new Formatter(builder);
  formatter.format("new Wicket.WUPB('%s', '%s', '%s', '%s', '%s', '%s').bind('%s')",getMarkupId(),statusDiv.getMarkupId(),barDiv.getMarkupId(),url,uploadFieldId,status,getCallbackForm().getMarkupId());
  response.renderOnDomReadyJavaScript(builder.toString());
}
