{
  if (locale != null && locale != getLocale()) {
    imageResource=null;
  }
  if (imageResource == null) {
    final String modelString=getModelObjectAsString();
    final String resourcePath;
    if (Strings.isEmpty(modelString)) {
      resourcePath=tag.getString("src");
    }
 else {
      resourcePath=modelString;
    }
    final Package basePackage=findParentWithAssociatedMarkup().getClass().getPackage();
    this.imageResource=StaticImageResource.get(basePackage,resourcePath,getLocale(),getStyle());
    if (this.imageResource == null) {
      throw new WicketRuntimeException("Unable to find image resource [basePackage = " + basePackage + ", resourcePath = "+ resourcePath+ ", locale = "+ getLocale()+ ", style = "+ getStyle()+ "]");
    }
    this.locale=getLocale();
  }
  super.onComponentTag(tag);
}
