{
  final IResource image=getResource(resourceToLoad);
  if (image == null) {
    throw new WicketRuntimeException("Could not find image resource " + resourceToLoad);
  }
  final RequestCycle cycle=getRequestCycle();
  cycle.setPage((Page)null);
  final HttpServletResponse response=((WebResponse)cycle.getResponse()).getHttpServletResponse();
  response.setContentType("image/" + image.getExtension());
  try {
    final OutputStream out=new BufferedOutputStream(response.getOutputStream());
    try {
      Streams.writeStream(new BufferedInputStream(image.getInputStream()),out);
    }
  finally {
      image.close();
      out.flush();
    }
  }
 catch (  IOException e) {
    throw new WicketRuntimeException("Unable to render resource " + image,e);
  }
catch (  ResourceNotFoundException e) {
    throw new WicketRuntimeException("Unable to render resource " + image,e);
  }
}
