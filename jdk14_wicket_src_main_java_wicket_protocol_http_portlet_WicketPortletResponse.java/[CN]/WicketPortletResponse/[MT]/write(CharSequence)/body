{
  try {
    if (res instanceof RenderResponse) {
      ((RenderResponse)res).getWriter().write(string.toString());
    }
 else {
      throw new WicketRuntimeException("Writer not available during ActionRequest");
    }
  }
 catch (  final IOException e) {
    throw new WicketRuntimeException("Error while writing to portlet output writer.",e);
  }
}
