{
  URL configUrl=DBUtil.class.getResource(configFile);
  HibernateHelper.setConfigURL(configUrl);
  HibernateHelper.init();
  Session session=HibernateHelper.getSession();
  Connection conn=session.connection();
  Statement stmt=conn.createStatement();
  boolean exists;
  try {
    stmt.executeQuery("select 1 from Comment");
    exists=true;
  }
 catch (  SQLException e) {
    exists=false;
  }
  try {
    if ((!exists) || Boolean.getBoolean("createdb")) {
      SessionFactoryImpl sf=(SessionFactoryImpl)HibernateHelper.getSessionFactory();
      Dialect dialect=sf.getDialect();
      Configuration config=HibernateHelper.getConfiguration();
      String[] drops=config.generateDropSchemaScript(dialect);
      String[] creates=config.generateSchemaCreationScript(dialect);
      execStmt(conn,stmt,splitAltTables(drops,true));
      execStmt(conn,stmt,splitAltTables(drops,false));
      execStmt(conn,stmt,creates);
      insertTestData(session);
    }
  }
  finally {
    HibernateHelper.closeSession();
  }
}
