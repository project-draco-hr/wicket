{
  String prefix=getValidatorKeyPrefix();
  if (Strings.isEmpty(prefix)) {
    prefix="";
  }
  final HashMap<String,Object> fullArgs;
  if (args == null) {
    fullArgs=new HashMap<String,Object>(6);
  }
 else {
    fullArgs=new HashMap<String,Object>(args.size() + 6);
    fullArgs.putAll(args);
  }
  if (!fullArgs.containsKey("input")) {
    fullArgs.put("input",getInput());
  }
  if (!fullArgs.containsKey("name")) {
    fullArgs.put("name",getId());
  }
  if (!fullArgs.containsKey("label")) {
    Object label=null;
    if (getLabel() != null) {
      label=getLabel().getObject();
    }
    if (label != null) {
      fullArgs.put("label",label);
    }
 else {
      fullArgs.put("label",getLocalizer().getString(getId(),getParent(),getId()));
    }
  }
  final IModel<HashMap<String,Object>> argsModel=new Model<HashMap<String,Object>>(fullArgs);
  final Localizer localizer=getLocalizer();
  final Iterator<String> keys=resourceKeys.iterator();
  String message=null;
  while (keys.hasNext()) {
    final String key=keys.next();
    String resource=prefix + getId() + "."+ key;
    message=localizer.getString(resource,getParent(),argsModel,"");
    if (Strings.isEmpty(message)) {
      resource=prefix + key;
      if (keys.hasNext()) {
        message=localizer.getString(resource,this,argsModel,"");
      }
 else {
        message=localizer.getString(resource,this,argsModel);
      }
    }
    if (!Strings.isEmpty(message)) {
      break;
    }
  }
  error(message);
}
