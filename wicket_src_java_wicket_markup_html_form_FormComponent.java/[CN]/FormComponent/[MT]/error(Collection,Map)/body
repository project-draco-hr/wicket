{
  final Map fullArgs=new HashMap(args.size() + 4);
  fullArgs.putAll(args);
  if (!fullArgs.containsKey("input")) {
    fullArgs.put("input",getInput());
  }
  if (!fullArgs.containsKey("name")) {
    fullArgs.put("name",getId());
  }
  if (!fullArgs.containsKey("label")) {
    Object label=null;
    if (getLabel() != null) {
      label=getLabel().getObject(this);
    }
    if (label != null) {
      fullArgs.put("label",label);
    }
 else {
      fullArgs.put("label",getLocalizer().getString(getId(),getParent(),getId()));
    }
  }
  final IModel argsModel=new Model((Serializable)fullArgs);
  final Localizer localizer=getLocalizer();
  final Iterator keys=resourceKeys.iterator();
  String message=null;
  while (keys.hasNext()) {
    final String key=(String)keys.next();
    String resource=getId() + "." + key;
    message=localizer.getString(resource,getParent(),argsModel,"");
    if (Strings.isEmpty(message)) {
      resource=key;
      if (keys.hasNext()) {
        message=localizer.getString(resource,getParent(),argsModel,"");
      }
 else {
        message=localizer.getString(resource,getParent(),argsModel);
      }
    }
    if (!Strings.isEmpty(message)) {
      break;
    }
  }
  error(message);
}
