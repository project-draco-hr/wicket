{
  if (this == rootItem && isRootLess() == true) {
    getResponse().write("<div style=\"display:none\" id=\"" + getMarkupId() + "\"></div>");
    markupStream.skipComponent();
  }
 else {
    final int index=markupStream.getCurrentIndex();
    super.onRender(markupStream);
    if (isRenderChildren()) {
      visitItemChildren(this,new IItemCallback(){
        public void visitItem(        TreeItem item){
          markupStream.setCurrentIndex(index);
          item.onRender(markupStream);
          List behaviors=item.getBehaviors();
          for (Iterator i=behaviors.iterator(); i.hasNext(); ) {
            IBehavior behavior=(IBehavior)i.next();
            behavior.afterRender(item);
          }
        }
      }
);
    }
  }
}
