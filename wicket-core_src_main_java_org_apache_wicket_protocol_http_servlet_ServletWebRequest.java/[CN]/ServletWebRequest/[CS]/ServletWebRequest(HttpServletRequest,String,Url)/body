{
  Args.notNull(httpServletRequest,"httpServletRequest");
  Args.notNull(filterPrefix,"filterPrefix");
  this.httpServletRequest=httpServletRequest;
  errorAttributes=ErrorAttributes.of(httpServletRequest);
  forwardAttributes=ForwardAttributes.of(httpServletRequest);
  if (forwardAttributes != null || errorAttributes != null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Setting filterPrefix('{}') to '' because there is either an error or a forward. {}, {}",new Object[]{filterPrefix,forwardAttributes,errorAttributes});
    }
    this.filterPrefix="";
  }
 else {
    this.filterPrefix=filterPrefix;
  }
  if (url != null) {
    this.url=url;
  }
 else {
    this.url=getContextRelativeUrl(httpServletRequest.getRequestURI(),filterPrefix);
  }
}
