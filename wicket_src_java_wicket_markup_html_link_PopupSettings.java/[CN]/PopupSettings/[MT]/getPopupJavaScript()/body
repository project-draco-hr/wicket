{
  String windowTitle=getWindowName();
  if (windowTitle == null) {
    windowTitle="";
  }
 else {
    windowTitle=windowTitle.replace('.','_');
  }
  String target=getTarget();
  StringBuffer script=new StringBuffer("if (!window.focus) return true; window.open(" + target + ", '").append(windowTitle).append("', '");
  script.append("scrollbars=").append(getScrollBars() ? "yes" : "no");
  script.append(", location=").append(getLocationBar() ? "yes" : "no");
  script.append(", menuBar=").append(getMenuBar() ? "yes" : "no");
  script.append(", resizable=").append(isResizable() ? "yes" : "no");
  script.append(", scrollbars=").append(getScrollBars() ? "yes" : "no");
  script.append(", status=").append(getStatusBar() ? "yes" : "no");
  script.append(", toolbar=").append(getToolbar() ? "yes" : "no");
  if (getWidth() != -1) {
    script.append(", width=").append(getWidth());
  }
  if (getHeight() != -1) {
    script.append(", height=").append(getHeight());
  }
  if (getLeft() != -1) {
    script.append(", left=").append(getLeft());
  }
  if (getTop() != -1) {
    script.append(", top=").append(getTop());
  }
  script.append("'); ").append(" return false;");
  return script.toString();
}
