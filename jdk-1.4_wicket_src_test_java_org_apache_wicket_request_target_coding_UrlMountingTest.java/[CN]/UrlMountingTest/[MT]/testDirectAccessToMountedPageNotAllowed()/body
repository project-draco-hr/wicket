{
  tester.getApplication().getSecuritySettings().setEnforceMounts(true);
  tester.setupRequestAndResponse();
  tester.getServletRequest().setURL("?wicket:bookmarkablePage=:" + TestPage.class.getName() + "");
  try {
    WebRequestCycle requestCycle=tester.createRequestCycle();
    tester.processRequestCycle(requestCycle);
    IRequestTarget requestTarget=requestCycle.getRequestTarget();
    assertTrue(requestTarget instanceof WebErrorCodeResponseTarget);
    WebErrorCodeResponseTarget error=(WebErrorCodeResponseTarget)requestTarget;
    assertEquals(HttpServletResponse.SC_FORBIDDEN,error.getErrorCode());
  }
  finally {
    tester.getApplication().getSecuritySettings().setEnforceMounts(false);
  }
}
