{
  if (target == null) {
    return;
  }
  checkModel();
  if (dirtyAll) {
    target.addComponent(this);
  }
 else {
    if (deleteIds.length() != 0) {
      String js=getElementsDeleteJavascript();
      System.out.println(js);
      target.addJavascript(js);
    }
    for (    TreeItem item : dirtyItemsCreateDOM) {
      TreeItem parent=item.getParentItem();
      int index=parent.getChildren().indexOf(item);
      TreeItem previous;
      if (index == 0) {
        previous=parent;
      }
 else {
        previous=parent.getChildren().get(index - 1);
        while (previous.getChildren() != null && previous.getChildren().size() > 0) {
          previous=previous.getChildren().get(previous.getChildren().size() - 1);
        }
      }
      target.addJavascript("Wicket.Tree.createElement(\"" + item.getMarkupId() + "\","+ "\""+ previous.getMarkupId()+ "\")");
    }
    for (    TreeItem item : dirtyItems) {
      if (item.getChildren() == null) {
        buildItemChildren(item);
        item.setRenderChildren(true);
      }
      target.addComponent(item);
    }
  }
  updated();
}
