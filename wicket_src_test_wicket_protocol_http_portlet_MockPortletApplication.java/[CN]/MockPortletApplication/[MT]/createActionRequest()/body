{
  MockHttpServletRequest req=new MockHttpServletRequest(null,servletSession,context);
  MockHttpServletResponse res=new MockHttpServletResponse();
  portletRequest=new MockPortletRequest(this,portletSession,req);
  portletResponse=new MockPortletActionResponse(res);
  portletRequest.initialize();
  portletResponse.initialize();
  portletRequest.setParameters(parametersForNextRequest);
  parametersForNextRequest.clear();
  wicketPortletRequest=new WicketPortletRequest(portletRequest);
  wicketPortletResponse=new WicketPortletResponse(portletResponse);
  wicketPortletSession=getSession(wicketPortletRequest);
}
