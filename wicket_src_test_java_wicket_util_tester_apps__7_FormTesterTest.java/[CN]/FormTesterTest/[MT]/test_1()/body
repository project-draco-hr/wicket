{
  tester=new WicketTester(EmailPage.class);
  tester.setupRequestAndResponse();
  tester.processRequestCycle();
  String document=tester.getServletResponse().getDocument();
  DiffUtil.validatePage(document,this.getClass(),"ExpectedResult-1.html",true);
  assertEquals(EmailPage.class,tester.getLastRenderedPage().getClass());
  EmailPage page=(EmailPage)tester.getLastRenderedPage();
  FormTester formTester=tester.newFormTester("form");
  formTester.setValue("email","a");
  formTester.submit();
  page=(EmailPage)tester.getLastRenderedPage();
  assertEquals(EmailPage.class,page.getClass());
  document=tester.getServletResponse().getDocument();
  DiffUtil.validatePage(document,this.getClass(),"ExpectedResult-2.html",true);
}
