{
  super.renderHead(component,response);
  CoreLibrariesContributor.contributeAjax(component.getApplication(),response);
  RequestCycle requestCycle=component.getRequestCycle();
  Url baseUrl=requestCycle.getUrlRenderer().getBaseUrl();
  CharSequence ajaxBaseUrl=Strings.escapeMarkup(baseUrl.toString());
  response.render(JavaScriptHeaderItem.forScript("Wicket.Ajax.baseUrl=\"" + ajaxBaseUrl + "\";","wicket-ajax-base-url"));
  renderExtraHeaderContributors(component,response);
  if (component.isEnabledInHierarchy()) {
    StringBuilder js=new StringBuilder();
    js.append("Wicket.Ajax.ajax(");
    js.append(renderAjaxAttributes(component));
    js.append(");");
    AjaxRequestTarget target=requestCycle.find(AjaxRequestTarget.class);
    if (target == null) {
      response.render(OnDomReadyHeaderItem.forScript(js.toString()));
    }
 else {
      target.appendJavaScript(js);
    }
  }
}
