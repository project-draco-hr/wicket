{
  final Page page=tester.getLastRenderedPage();
  final TestForm form=(TestForm)page.get("form");
  final TextField<String> textField=(TextField<String>)form.get("input");
  final WebRequestCycle cycle=tester.createRequestCycle();
  assertNull(getRequestCookies(cycle));
  assertEquals(0,getResponseCookies(cycle).size());
  final CookieUtils persister=new CookieUtils();
  persister.remove(textField);
  assertNull(getRequestCookies(cycle));
  assertEquals(0,getResponseCookies(cycle).size());
  persister.save(textField);
  assertNull(getRequestCookies(cycle));
  assertEquals(1,getResponseCookies(cycle).size());
  assertEquals("test",(getResponseCookies(cycle).get(0)).getValue());
  assertEquals("form.input",(getResponseCookies(cycle).get(0)).getName());
  assertEquals("/WicketTester$DummyWebApplication/WicketTester$DummyWebApplication",(getResponseCookies(cycle).get(0)).getPath());
  persister.remove(textField);
  assertNull(getRequestCookies(cycle));
  assertEquals(1,getResponseCookies(cycle).size());
  assertEquals("test",(getResponseCookies(cycle).get(0)).getValue());
  assertEquals("form.input",(getResponseCookies(cycle).get(0)).getName());
  assertEquals("/WicketTester$DummyWebApplication/WicketTester$DummyWebApplication",(getResponseCookies(cycle).get(0)).getPath());
  persister.load(textField);
  assertEquals("test",textField.getDefaultModelObjectAsString());
  assertEquals("test",textField.getDefaultModelObjectAsString());
  textField.setDefaultModelObject("new text");
  assertEquals("new text",textField.getDefaultModelObjectAsString());
  copyCookieFromResponseToRequest(cycle);
  assertEquals(1,getRequestCookies(cycle).length);
  assertEquals(1,getResponseCookies(cycle).size());
  persister.load(textField);
  assertEquals("test",textField.getDefaultModelObjectAsString());
  assertEquals(1,getRequestCookies(cycle).length);
  assertEquals(1,getResponseCookies(cycle).size());
  persister.remove(textField);
  assertEquals(1,getRequestCookies(cycle).length);
  assertEquals(1,getResponseCookies(cycle).size());
  assertEquals("form.input",(getResponseCookies(cycle).get(0)).getName());
  assertEquals(0,(getResponseCookies(cycle).get(0)).getMaxAge());
}
