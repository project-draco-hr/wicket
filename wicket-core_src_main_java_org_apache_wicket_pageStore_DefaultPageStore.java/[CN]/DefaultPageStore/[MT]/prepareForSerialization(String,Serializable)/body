{
  if (dataStore.isReplicated()) {
    return null;
  }
  SerializedPage result=null;
  if (page instanceof IManageablePage) {
    IManageablePage _page=(IManageablePage)page;
    result=serializedPagesCache.getPage(sessionId,_page.getPageId());
    if (result == null) {
      result=serializePage(sessionId,_page);
      if (result != null) {
        serializedPagesCache.storePage(sessionId,_page.getPageId(),result);
      }
    }
  }
 else   if (page instanceof SerializedPage) {
    SerializedPage _page=(SerializedPage)page;
    if (_page.getData() == null) {
      result=restoreStrippedSerializedPage(_page);
    }
 else {
      result=_page;
    }
  }
  if (result != null) {
    return result;
  }
  return page;
}
