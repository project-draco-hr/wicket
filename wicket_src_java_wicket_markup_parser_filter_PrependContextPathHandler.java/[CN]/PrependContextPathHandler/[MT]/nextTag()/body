{
  final ComponentTag tag=(ComponentTag)getParent().nextTag();
  if (tag == null || tag.getId() != null) {
    return tag;
  }
  if (contextPath == null) {
    contextPath=((WebRequestCycle)RequestCycle.get()).getWebRequest().getContextPath();
    if (contextPath == null) {
      contextPath="";
    }
 else     if (contextPath.endsWith("/") == false) {
      contextPath+="/";
    }
  }
  if (contextPath.length() > 0) {
    for (int i=0; i < attributeNames.length; i++) {
      String attrName=attributeNames[i];
      String attrValue=tag.getAttributes().getString(attrName);
      if ((attrValue != null) && (attrValue.startsWith("/") == false) && (attrValue.indexOf(":") < 0)) {
        String url=contextPath + attrValue;
        tag.getAttributes().put(attrName,url);
        tag.setModified(true);
      }
    }
  }
  return tag;
}
