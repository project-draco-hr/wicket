{
  prepare();
  IRequestCycleProcessor processor=getRequestCycleProcessor();
  if (processor == null) {
    throw new WicketRuntimeException("request cycle processor must be not-null");
  }
  try {
    setRequestTarget(target);
    Object synchronizeLock=target.getSynchronizationLock();
    if (synchronizeLock != null) {
synchronized (synchronizeLock) {
        processEventsAndRespond(processor);
      }
    }
 else {
      processEventsAndRespond(processor);
    }
  }
  finally {
    cleanUp();
  }
}
