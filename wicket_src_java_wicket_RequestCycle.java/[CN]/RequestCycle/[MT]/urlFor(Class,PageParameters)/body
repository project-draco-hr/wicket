{
  if (pageClass == null) {
    throw new NullPointerException("argument pageClass may not be null");
  }
  final StringBuffer buffer=urlPrefix();
  buffer.append("?bookmarkablePage=");
  String pageReference=application.getPages().aliasForClass(pageClass);
  if (pageReference == null)   pageReference=pageClass.getName();
  buffer.append(pageReference);
  if (parameters != null) {
    for (final Iterator iterator=parameters.keySet().iterator(); iterator.hasNext(); ) {
      final String key=(String)iterator.next();
      buffer.append('&');
      buffer.append(key);
      buffer.append('=');
      buffer.append(parameters.getString(key));
    }
  }
  return getResponse().encodeURL(buffer.toString());
}
