{
synchronized (session) {
    try {
      threadAttach();
      internalOnBeginRequest();
      onBeginRequest();
      if (parseRequest()) {
        respond();
      }
      internalOnEndRequest();
      onEndRequest();
    }
 catch (    RuntimeException e) {
      onRuntimeException(null,e);
    }
 finally {
      threadDetach();
    }
  }
}
