{
  final ApplicationSettings settings=application.getSettings();
  if (settings.getUnexpectedExceptionDisplay() != ApplicationSettings.SHOW_NO_EXCEPTION_PAGE) {
    if (settings.getUnexpectedExceptionDisplay() == ApplicationSettings.SHOW_INTERNAL_ERROR_PAGE) {
      setResponsePage(session.getPageFactory(page).newPage(application.getPages().getInternalErrorPage()));
    }
 else {
      setResponsePage(new ExceptionErrorPage(e,getResponsePage()));
    }
    redirectTo(getResponsePage());
  }
}
