{
  final MarkupStream markupStream=new MarkupStream(getAssociatedMarkup(false));
  if (markupStream == null) {
    return;
  }
  this.noMoreWicketHeadTagsAllowed=false;
  while (nextHeaderMarkup(markupStream) != -1) {
    Class markupClass=markupStream.getTag().getMarkupClass();
    if (markupClass == null) {
      markupClass=markupStream.getContainerClass();
    }
    final HeaderPartContainer headerPart=getHeaderPart(htmlContainer,markupClass,markupStream.getCurrentIndex());
    if (headerPart != null) {
      if (htmlContainer.okToRenderComponent(headerPart.getScope(),headerPart.getId())) {
        headerPart.autoAdded();
        if (checkedBody == false) {
          checkedBody=true;
          checkBodyOnLoad();
        }
      }
 else {
        Response response=getRequestCycle().getResponse();
        try {
          getRequestCycle().setResponse(NullResponse.getInstance());
          headerPart.autoAdded();
        }
  finally {
          getRequestCycle().setResponse(response);
        }
      }
    }
    markupStream.skipComponent();
  }
}
