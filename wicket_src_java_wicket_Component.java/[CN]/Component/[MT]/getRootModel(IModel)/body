{
  IModel nestedModelObject=model;
  while (true) {
    final IModel next=((IModel)nestedModelObject).getNestedModel();
    if (next == null) {
      break;
    }
    if (nestedModelObject == next) {
      throw new WicketRuntimeException("Model for " + nestedModelObject + " is self-referential");
    }
    nestedModelObject=next;
  }
  return nestedModelObject;
}
