{
  if (this.model != null) {
    this.model.detach();
  }
  IModel prevModel=this.model;
  if (prevModel instanceof WrapModel) {
    prevModel=model.getNestedModel();
  }
  if (prevModel != model) {
    if (prevModel != null)     addStateChange(new ComponentModelChange(prevModel));
    if (model instanceof ICompoundModel) {
      this.model=new WrapModel<T>(model,true);
    }
 else {
      this.model=model;
    }
  }
  modelChanged();
  return this;
}
