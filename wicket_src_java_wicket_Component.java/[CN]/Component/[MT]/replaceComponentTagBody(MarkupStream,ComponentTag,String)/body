{
  ComponentTag markupOpenTag=null;
  if (tag.isOpen()) {
    markupStream.setCurrentIndex(markupStream.getCurrentIndex() - 1);
    markupOpenTag=markupStream.getTag();
    markupStream.next();
    if (markupOpenTag.isOpen()) {
      markupStream.skipRawMarkup();
    }
  }
  getResponse().write(body);
  if (tag.isOpen()) {
    if ((markupOpenTag != null) && markupOpenTag.isOpen() && !markupStream.atCloseTag()) {
      markupStream.throwMarkupException("Expected close tag.	Possible attempt to embed component(s) " + "in the body of a component which discards its body");
    }
  }
}
