{
  if (this.markupFragment != null) {
    return this.markupFragment;
  }
  MarkupContainer parent=getParent();
  if (parent == null) {
    throw new MarkupNotFoundException("The component is expected to have a parent: " + getId());
  }
  MarkupFragment markupFragment=parent.getMarkupFragment(getId());
  if (markupFragment == null) {
    throw new MarkupNotFoundException("Unable to find markup for Component: " + getId());
  }
  if ((markupFragment.size() > 0) && (markupFragment.get(0) instanceof ComponentTag)) {
    final ComponentTag tag=markupFragment.getTag(0);
    if (tag.hasBehaviors()) {
      Iterator<IBehavior> behaviors=tag.getBehaviors();
      while (behaviors.hasNext()) {
        add(behaviors.next());
      }
    }
  }
  return markupFragment;
}
