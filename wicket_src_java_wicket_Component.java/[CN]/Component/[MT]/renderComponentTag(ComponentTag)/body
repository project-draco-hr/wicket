{
  final ApplicationSettings settings=getApplication().getSettings();
  if (!(tag instanceof WicketTag) || !settings.getStripWicketTags()) {
    if (attributeModifiers != null && tag.getType() != XmlTag.CLOSE) {
      tag=tag.mutable();
      for (AttributeModifier current=attributeModifiers; current != null; current=current.next) {
        current.replaceAttibuteValue(this,tag);
      }
    }
    if (eventRequestHandlers != null) {
      for (Iterator i=eventRequestHandlers.values().iterator(); i.hasNext(); ) {
        IAjaxHandler handler=(IAjaxHandler)i.next();
        handler.onComponentTag(this,tag);
      }
    }
    getResponse().write(tag.toString(settings.getStripWicketTags(),this.findMarkupStream().getWicketNamespace()));
  }
}
