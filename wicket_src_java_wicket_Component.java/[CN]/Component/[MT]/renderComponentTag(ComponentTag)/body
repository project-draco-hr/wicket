{
  final ApplicationSettings settings=getApplication().getSettings();
  if (!(tag instanceof ComponentWicketTag) || !settings.getStripWicketTag()) {
    if ((attributeModifiers != null) && (tag.getType() != XmlTag.CLOSE)) {
      tag=tag.mutable();
      for (Iterator it=attributeModifiers.iterator(); it.hasNext(); ) {
        ((AttributeModifier)it.next()).replaceAttibuteValue(tag);
      }
    }
    if (settings.getStripComponentNames()) {
      tag=tag.mutable();
      tag.removeComponentName(settings.getComponentNameAttribute());
    }
    getResponse().write(tag);
  }
}
