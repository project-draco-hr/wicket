{
  MarkupStream markupStream=new MarkupStream(markupFragment.getMarkup());
  markupStream.setCurrentIndex(0);
  MarkupElement element=markupStream.get();
  if (!(element instanceof ComponentTag) || (element != markupFragment.get(0))) {
    boolean hit=false;
    while (markupStream.hasMore()) {
      element=markupStream.next();
      if ((element instanceof ComponentTag) && (element == markupFragment.get(0))) {
        hit=true;
        break;
      }
    }
    if (hit == false) {
      throw new MarkupException("Something has gone wrong here. We should found the MarkupElement: " + this.toString());
    }
  }
  return markupStream;
}
