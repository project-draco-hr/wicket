{
  try {
    MarkupFragment markupFragment=getMarkupFragment();
    MarkupStream markupStream=Application.get().getMarkupSettings().getMarkupFragmentFinder().find(this);
    ComponentTag tag=markupStream.getTag();
    if (tag.hasAttributes()) {
      markupAttributes=new CopyOnWriteValueMap(tag.getAttributes());
    }
    if (tag.hasBehaviors()) {
      Iterator<IBehavior> behaviors=tag.getBehaviors();
      while (behaviors.hasNext()) {
        add(behaviors.next());
      }
    }
    return markupStream;
  }
 catch (  MarkupException ex) {
    log.warn("MarkupFragmentFinder was unable to find the markup associated with Component '" + id + "'. You will not be able to use the component for AJAX calls.");
    throw ex;
  }
catch (  RuntimeException re) {
    log.warn("MarkupFragmentFinder was unable to find the markup associated with Component '" + id + "'. You will not be able to use the component for AJAX calls.");
    throw new MarkupNotFoundException("Couldn't find the markup of the component '" + id + "' in parent '"+ parent.getPageRelativePath()+ "'",re);
  }
}
