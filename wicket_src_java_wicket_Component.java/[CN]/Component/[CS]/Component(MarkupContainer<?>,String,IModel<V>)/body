{
  if (parent == null) {
    if (!(this instanceof Page)) {
      throw new WicketRuntimeException("component without a parent is not allowed.");
    }
  }
  this.parent=parent;
  setId(id);
  this.model=model;
  if (model instanceof ICompoundModel) {
    setFlag(FLAG_HAS_ROOT_MODEL,true);
  }
  getApplication().notifyComponentInstantiationListeners(this);
  if (id.startsWith(AUTO_COMPONENT_PREFIX)) {
    parent.autoAdd(this);
  }
 else {
    parent.add(this);
  }
}
