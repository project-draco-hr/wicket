{
  headerRendering=true;
  if (header == null) {
    header=new PartialHtmlHeaderContainer(this);
    final Page parentPage=component.getPage();
    parentPage.addOrReplace(header);
  }
  RequestCycle requestCycle=component.getRequestCycle();
  Response oldResponse=requestCycle.setResponse(encodingHeaderResponse);
  try {
    encodingHeaderResponse.reset();
    IHeaderRenderStrategy strategy=AbstractHeaderRenderStrategy.get();
    strategy.renderHeader(header,null,component);
  }
  finally {
    requestCycle.setResponse(oldResponse);
  }
  writeHeaderContribution(response);
  headerRendering=false;
}
