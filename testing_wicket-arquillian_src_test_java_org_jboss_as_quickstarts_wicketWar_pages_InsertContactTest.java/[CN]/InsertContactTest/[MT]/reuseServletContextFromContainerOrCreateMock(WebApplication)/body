{
  try {
    log.info("TRYING TO REUSE CONTAINER'S SERVLETCONTEXT/FILTER.");
    wicketTester=new WicketTester(webApplication);
    assertNotNull(wicketTester.getApplication());
    log.info("USING CONTAINER'S SERVLETCONTEXT/FILTER.");
    log.info("WebApplication after wicketTester Name: " + wicketTester.getApplication().getName());
    log.info("ServletContext after wicketTester Name: " + wicketTester.getServletContext().getServletContextName());
    log.info("Server info: " + wicketTester.getServletContext().getServerInfo());
  }
 catch (  IllegalStateException e) {
    assertEquals("Application name can only be set once.",e.getMessage());
    log.error("CANNOT USE CONTAINER'S SERVLETCONTEXT.\n",e);
  }
  if (wicketTester == null) {
    try {
      wicketTester=new WicketTester(new TestWicketJavaEEApplication());
      assertNotNull(wicketTester.getApplication());
      log.info("USING A MOCK SERVLETCONTEXT.");
      log.info("WebApplication MOCK after wicketTester Name: " + wicketTester.getApplication().getName());
      log.info("ServletContext MOCK after wicketTester Name: " + wicketTester.getServletContext().getServletContextName());
      log.info("Server info: " + wicketTester.getServletContext().getServerInfo());
      assertEquals("Wicket Mock Test Environment v1.0",wicketTester.getServletContext().getServerInfo());
    }
 catch (    IllegalStateException e) {
      log.error("CANNOT USE A MOCK SERVLETCONTEXT.");
    }
  }
}
