{
  ActionResponse response=getActionResponse(requestCycle);
  final Class pageClass=requestTarget.getPageClass();
  final Application application=Application.get();
  String pageMapName=requestTarget.getPageMapName();
  if (pageMapName == null) {
    IRequestTarget currentTarget=requestCycle.getRequestTarget();
    if (currentTarget instanceof IPageRequestTarget) {
      Page currentPage=((IPageRequestTarget)currentTarget).getPage();
      final PageMap pageMap=currentPage.getPageMap();
      if (pageMap.isDefault()) {
        pageMapName="";
      }
 else {
        pageMapName=pageMap.getName();
      }
    }
 else {
      pageMapName="";
    }
  }
  boolean firstParameter=true;
  if (!application.getHomePage().equals(pageClass) || !"".equals(pageMapName)) {
    response.setRenderParameter(PAGEMAP,pageMapName);
    response.setRenderParameter(WebRequestCodingStrategy.BOOKMARKABLE_PAGE_PARAMETER_NAME,pageClass.getName());
  }
  response.setRenderParameters(requestTarget.getPageParameters());
}
