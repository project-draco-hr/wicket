{
  File sessionDir=new File(defaultWorkDir,sessionId);
  sessionDir.mkdirs();
  File pageFile=getPageFile(sessionDir,page.getPageMapName(),page.getPageId(),page.getVersionNumber(),page.getAjaxVersionNumber());
  FileOutputStream fos=null;
  int length=0;
  try {
    fos=new FileOutputStream(pageFile);
    ByteBuffer bb=ByteBuffer.wrap(page.getData());
    fos.getChannel().write(bb);
    length=page.getData().length;
  }
 catch (  Exception e) {
    log.error("Error saving page " + pageFile.getAbsolutePath());
  }
 finally {
    try {
      if (fos != null) {
        fos.close();
      }
    }
 catch (    IOException ex) {
    }
  }
  return length;
}
