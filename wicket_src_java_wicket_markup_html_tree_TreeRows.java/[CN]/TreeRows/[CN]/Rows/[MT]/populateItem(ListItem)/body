{
  Object modelObject=listItem.getModelObject();
  if (modelObject instanceof List) {
    TreeRow row=new TreeRow("row",tree,null);
    row.setVisible(false);
    listItem.add(row);
    TreeRows nested=new TreeRows("nested",(List)modelObject,tree);
    listItem.add(nested);
  }
 else {
    NodeModel nodeModel=(NodeModel)modelObject;
    TreeRow row=new TreeRow("row",tree,nodeModel);
    listItem.add(row);
    TreeRows nested=new TreeRows("nested",null,tree);
    nested.setVisible(false);
    listItem.add(nested);
  }
}
