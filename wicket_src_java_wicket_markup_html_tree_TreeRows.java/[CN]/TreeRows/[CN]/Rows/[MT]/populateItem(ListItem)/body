{
  Object modelObject=listItem.getModelObject();
  if (modelObject instanceof List) {
    Panel row=tree.internalGetTreeRowPanel("row",null);
    row.setVisible(false);
    listItem.add(row);
    TreeRows nested=new TreeRows("nested",(List)modelObject,tree);
    listItem.add(nested);
  }
 else {
    TreeNodeModel nodeModel=(TreeNodeModel)modelObject;
    Panel row=tree.internalGetTreeRowPanel("row",nodeModel);
    listItem.add(row);
    TreeRows nested=new TreeRows("nested",null,tree);
    nested.setVisible(false);
    listItem.add(nested);
  }
}
