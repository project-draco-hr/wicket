{
  TreeNode node=(TreeNode)parent.getLastPathComponent();
  if (node.getChildCount() >= 0) {
    for (Enumeration e=node.children(); e.hasMoreElements(); ) {
      TreeNode n=(TreeNode)e.nextElement();
      TreePath path=parent.pathByAddingChild(n);
      expandAll(path,expand);
    }
  }
  if (expand) {
    expandPath(parent);
  }
 else {
    collapsePath(parent);
  }
}
