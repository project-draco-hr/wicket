{
  IModel wsDetachModel=new AbstractReadOnlyDetachableModel<WeatherStation>(){
    private static final long serialVersionUID=1L;
    private transient WeatherStation station;
    @Override protected void onAttach(){
      station=new WeatherStation();
    }
    @Override protected void onDetach(){
      station=null;
    }
    @Override protected WeatherStation onGetObject(    final Component component){
      return station;
    }
    @Override public IModel getNestedModel(){
      return null;
    }
  }
;
  StringResourceModel model=new StringResourceModel("simple.text",page,wsDetachModel);
  application.setupRequestAndResponse();
  new WebRequestCycle(application.getWicketSession(),application.getWicketRequest(),application.getWicketResponse());
  model.attach();
  Assert.assertNotNull(model.getNestedModel().getObject(page));
  Assert.assertNotNull(model.getLocalizer());
  model.detach();
  Assert.assertNull(model.getLocalizer());
}
