{
  IModel wsDetachModel=new DetachableModel(wsModel){
    protected void doAttach(){
      setObject(new WeatherStation());
    }
    protected void doDetach(){
      setObject(null);
    }
  }
;
  StringResourceModel model=new StringResourceModel("simple.text",page,wsDetachModel);
  application.setupRequestAndResponse();
  RequestCycle cycle=new WebRequestCycle(application,application.getWicketSession(),application.getWicketRequest(),application.getWicketResponse());
  model.attach();
  Assert.assertNotNull(model.getModel().getObject());
  Assert.assertNotNull(model.getLocalizer());
  model.detach();
  Assert.assertNull(model.getModel().getObject());
  Assert.assertNull(model.getLocalizer());
}
