{
  IModel wsDetachModel=new AbstractReadOnlyDetachableModel(){
    private transient WeatherStation station;
    protected void onAttach(){
      station=new WeatherStation();
    }
    protected void onDetach(){
      station=null;
    }
    protected Object onGetObject(    final Component component){
      return station;
    }
    public Object getNestedModel(){
      return station;
    }
  }
;
  StringResourceModel model=new StringResourceModel("simple.text",page,wsDetachModel);
  application.setupRequestAndResponse();
  RequestCycle cycle=new WebRequestCycle(application,application.getWicketSession(),application.getWicketRequest(),application.getWicketResponse());
  model.attach();
  Assert.assertNotNull(((IModel)model.getNestedModel()).getObject(page));
  Assert.assertNotNull(model.getLocalizer());
  model.detach();
  Assert.assertNull(model.getLocalizer());
}
