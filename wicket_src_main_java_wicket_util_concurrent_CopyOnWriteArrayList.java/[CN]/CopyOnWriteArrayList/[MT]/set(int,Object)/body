{
  int len=array_.length;
  rangeCheck(index,len);
  Object oldValue=array_[index];
  boolean same=(oldValue == element || (element != null && element.equals(oldValue)));
  if (!same) {
    Object[] newArray=new Object[len];
    System.arraycopy(array_,0,newArray,0,len);
    newArray[index]=element;
    array_=newArray;
  }
  return oldValue;
}
