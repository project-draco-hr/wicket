{
  super.init(isServlet,filterConfig);
  try {
    String bs=filterConfig.getInitParameter("bufferSize");
    _webSocketFactory=new WebSocketFactory(this,bs == null ? 8192 : Integer.parseInt(bs));
    _webSocketFactory.start();
    String max=filterConfig.getInitParameter("maxIdleTime");
    if (max != null)     _webSocketFactory.setMaxIdleTime(Integer.parseInt(max));
    max=filterConfig.getInitParameter("maxTextMessageSize");
    if (max != null)     _webSocketFactory.setMaxTextMessageSize(Integer.parseInt(max));
    max=filterConfig.getInitParameter("maxBinaryMessageSize");
    if (max != null)     _webSocketFactory.setMaxBinaryMessageSize(Integer.parseInt(max));
  }
 catch (  ServletException x) {
    throw x;
  }
catch (  Exception x) {
    throw new ServletException(x);
  }
}
