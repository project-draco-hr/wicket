{
  String filepath=component.findParentWithAssociatedMarkup().getClass().getPackage().getName().replace('.','/') + "/" + component.getId();
  IResourceStream resourceStream=Application.get().getResourceSettings().getResourceStreamLocator().locate(getClass().getClassLoader(),filepath,component.getStyle(),component.getLocale(),XsltTransformer.extension);
  if (resourceStream == null) {
    throw new FileNotFoundException("Unable to find XSLT resource for " + component.toString());
  }
  try {
    TransformerFactory tFactory=TransformerFactory.newInstance();
    Transformer transformer=tFactory.newTransformer(new StreamSource(resourceStream.getInputStream()));
    StringWriter writer=new StringWriter();
    transformer.transform(new StreamSource(new StringReader(output)),new StreamResult(writer));
    return writer.getBuffer();
  }
  finally {
    resourceStream.close();
  }
}
