{
  final File file=IOUtils.getLocalFileFromUrl(url);
  if (file != null) {
    return IOUtils.getLastModified(file);
  }
  URLConnection connection=url.openConnection();
  final long milliseconds;
  try {
    if (connection instanceof JarURLConnection) {
      JarURLConnection jarUrlConnection=(JarURLConnection)connection;
      URL jarFileUrl=jarUrlConnection.getJarFileURL();
      URLConnection jarFileConnection=jarFileUrl.openConnection();
      try {
        milliseconds=jarFileConnection.getLastModified();
      }
  finally {
        close(jarFileConnection);
      }
    }
 else {
      milliseconds=connection.getLastModified();
    }
    if (milliseconds == 0) {
      return null;
    }
    return Time.millis(milliseconds);
  }
  finally {
    close(connection);
  }
}
