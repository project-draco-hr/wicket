{
  final ComponentTag tag=(ComponentTag)getParent().nextTag();
  if (tag == null) {
    return tag;
  }
  if ((autolinking == true) && (analyzeAutolinkCondition(tag) == true)) {
    tag.enableAutolink(true);
    tag.setId(AUTOLINK_ID);
    return tag;
  }
  if (tag instanceof WicketTag) {
    final WicketTag wtag=(WicketTag)tag;
    if (wtag.isLinkTag()) {
      if (tag.isOpen() || tag.isOpenClose()) {
        if (tag.isOpen()) {
          if (autolinkStatus == null) {
            autolinkStatus=new ArrayListStack();
          }
          autolinkStatus.push(new Boolean(autolinking));
        }
        final String autolink=tag.getAttributes().getString("autolink");
        try {
          autolinking=Strings.isEmpty(autolink) || Strings.isTrue(autolink);
        }
 catch (        StringValueConversionException e) {
          throw new WicketRuntimeException("Invalid autolink attribute value \"" + autolink + "\"");
        }
      }
 else       if (tag.isClose()) {
        autolinking=((Boolean)autolinkStatus.pop()).booleanValue();
      }
      return wtag;
    }
  }
  return tag;
}
