{
  if ((tag.isOpen() || tag.isOpenClose()) && tag.getAttributes().containsKey(wicketId)) {
    if (this.componentMap == null) {
      this.componentMap=new HashMap();
    }
    final String key=(tag.getPath() != null ? tag.getPath() + ":" + tag.getId() : tag.getId());
    this.componentMap.put(key,new Integer(this.markup.size() - 1));
  }
}
