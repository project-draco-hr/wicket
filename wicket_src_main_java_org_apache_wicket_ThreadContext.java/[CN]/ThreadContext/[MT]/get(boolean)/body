{
  ThreadContext context=threadLocal.get();
  if (createIfDoesNotExist && context == null) {
    context=new ThreadContext();
    threadLocal.set(context);
  }
  return context;
}
