{
  final ComponentTag tag=(ComponentTag)parent.nextTag();
  if (tag == null) {
    return tag;
  }
  final String href=tag.getAttributes().getString("href");
  if ((autolinking == true) && (tag.getComponentName() == null) && (href != null)&& (href.endsWith(".html") || (href.indexOf(".html?") != -1))&& (href.indexOf(":") == -1)) {
    tag.enableAutolink(true);
    tag.setComponentName("_autolink_");
    return tag;
  }
  if (tag instanceof ComponentWicketTag) {
    final ComponentWicketTag wtag=(ComponentWicketTag)tag;
    if (wtag.isLinkTag()) {
      if (tag.isOpen() || tag.isOpenClose()) {
        if (tag.isOpen()) {
          if (autolinkStatus == null) {
            autolinkStatus=new Stack();
          }
          autolinkStatus.push(new Boolean(autolinking));
        }
        final String autolink=tag.getAttributes().getString("autolink");
        if ((autolink == null) || "".equals(autolink) || "true".equalsIgnoreCase(autolink)|| "1".equals(autolink)) {
          autolinking=true;
        }
 else {
          autolinking=false;
        }
      }
 else       if (tag.isClose()) {
        autolinking=((Boolean)autolinkStatus.pop()).booleanValue();
      }
      return nextTag();
    }
  }
  return tag;
}
