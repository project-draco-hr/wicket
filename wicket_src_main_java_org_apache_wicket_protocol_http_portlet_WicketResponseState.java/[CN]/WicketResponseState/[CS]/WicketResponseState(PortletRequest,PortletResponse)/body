{
  String lifecyclePhase=(String)request.getAttribute(PortletRequest.LIFECYCLE_PHASE);
  isActionResponse=PortletRequest.ACTION_PHASE.equals(lifecyclePhase);
  isEventResponse=PortletRequest.EVENT_PHASE.equals(lifecyclePhase);
  isRenderResponse=PortletRequest.RENDER_PHASE.equals(lifecyclePhase);
  isResourceResponse=PortletRequest.RESOURCE_PHASE.equals(lifecyclePhase);
  isStateAwareResponse=isActionResponse || isEventResponse;
  isMimeResponse=isRenderResponse || isResourceResponse;
  this.response=response;
  defaultLocale=isMimeResponse ? ((MimeResponse)response).getLocale() : null;
}
