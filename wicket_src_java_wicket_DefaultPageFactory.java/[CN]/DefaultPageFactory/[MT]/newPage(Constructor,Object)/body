{
  try {
    if (constructor.getParameterTypes().length == 0) {
      return (Page)constructor.newInstance(new Object[0]);
    }
    return (Page)constructor.newInstance(new Object[]{parameter});
  }
 catch (  InstantiationException e) {
    throw new WicketRuntimeException("Cannot instantiate page object with " + constructor,e);
  }
catch (  IllegalAccessException e) {
    throw new WicketRuntimeException("Cannot access " + constructor,e);
  }
catch (  InvocationTargetException e) {
    final Class homePageClass=application.getPages().getHomePage();
    if (homePageClass.getClassLoader() != constructor.getClass().getClassLoader()) {
      throw new WicketRuntimeException("Classloader problems: Most probably Wicket-xxx.jar is not in /WEB-INF/lib: Exception thrown by " + constructor,e);
    }
    throw new WicketRuntimeException("Exception thrown by " + constructor,e);
  }
}
