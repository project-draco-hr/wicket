{
  MarkupStream stream=null;
  if (markupProvider != null) {
    stream=markupProvider.getAssociatedMarkupStream(false);
    if (stream == null) {
      stream=markupProvider.getMarkupStream();
    }
  }
  if (stream == null) {
    stream=super.getAssociatedMarkupStream(false);
  }
  if (stream == null) {
    MarkupContainer container=getParent();
    while (container != null) {
      if (container.hasAssociatedMarkup()) {
        stream=container.getAssociatedMarkupStream(false);
        break;
      }
      container=container.getParent();
    }
  }
  if ((stream == null) && throwException) {
    super.getAssociatedMarkupStream(true);
  }
  return stream;
}
