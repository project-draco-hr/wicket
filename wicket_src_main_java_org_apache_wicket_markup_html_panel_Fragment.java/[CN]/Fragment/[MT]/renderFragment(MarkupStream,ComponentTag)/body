{
  int currentIndex=providerMarkupStream.getCurrentIndex();
  while (providerMarkupStream.hasMore()) {
    MarkupElement elem=providerMarkupStream.get();
    if (elem instanceof ComponentTag) {
      ComponentTag tag=providerMarkupStream.getTag();
      if (tag.isOpen() || tag.isOpenClose()) {
        if (tag.getId().equals(markupId)) {
          break;
        }
      }
    }
    providerMarkupStream.nextOpenTag();
  }
  if (providerMarkupStream.hasMore() == false) {
    throw new MarkupException("Markup of component class `" + providerMarkupStream.getContainerClass().getName() + "` does not contain a fragment with wicket:id `"+ markupId+ "`. Context: "+ toString());
  }
  try {
    ComponentTag fragmentOpenTag=providerMarkupStream.getTag();
    if (!fragmentOpenTag.isOpenClose()) {
      providerMarkupStream.next();
      super.onComponentTagBody(providerMarkupStream,fragmentOpenTag);
    }
  }
  finally {
    providerMarkupStream.setCurrentIndex(currentIndex);
  }
}
