{
  super.beforeRender(component);
  final RequestCycle requestCycle=RequestCycle.get();
  webResponse=(WebResponse)requestCycle.getResponse();
  final BufferedWebResponse response=newResponse(webResponse);
  if (response == null) {
    throw new IllegalStateException("newResponse() must not return null");
  }
  requestCycle.setResponse(response);
}
