{
  WebApplication application=new WebApplication(){
    @Override public Class<? extends Page> getHomePage(){
      return CustomRequestPage.class;
    }
    @Override protected WebRequest newWebRequest(    HttpServletRequest servletRequest,    String filterPath){
      return new CustomServletWebRequest(servletRequest,filterPath);
    }
  }
;
  WicketTester tester=new WicketTester(application);
  tester.startPage(new CustomRequestPage());
}
