{
  String anyClassInJarFile="/java/lang/String.class";
  URL realURL=getClass().getResource(anyClassInJarFile);
  final AtomicInteger counter=new AtomicInteger(0);
  URL url=new URL(null,"test://anything",new CountingURLStreamHandler(realURL,counter));
  UrlResourceStream countingStream=new UrlResourceStream(url);
  assertEquals(0,counter.get());
  countingStream.length();
  assertEquals(1,counter.get());
  countingStream.getInputStream();
  assertEquals(1,counter.get());
  countingStream.getContentType();
  assertEquals(1,counter.get());
  countingStream.getInputStream();
  assertEquals(1,counter.get());
  countingStream.close();
  assertEquals(1,counter.get());
  countingStream.length();
  assertEquals(2,counter.get());
}
