{
  TextArea<T> editor=new TextArea<T>(componentId,model){
    private static final long serialVersionUID=1L;
    /** 
 * {@inheritDoc}
 */
    @Override protected void onModelChanged(){
      AjaxEditableMultiLineLabel.this.onModelChanged();
    }
    /** 
 * {@inheritDoc}
 */
    @Override protected void onModelChanging(){
      AjaxEditableMultiLineLabel.this.onModelChanging();
    }
  }
;
  editor.add(new AttributeModifier("rows",new AbstractReadOnlyModel<Integer>(){
    private static final long serialVersionUID=1L;
    @Override public Integer getObject(){
      return rows;
    }
  }
));
  editor.add(new AttributeModifier("cols",new AbstractReadOnlyModel<Integer>(){
    private static final long serialVersionUID=1L;
    @Override public Integer getObject(){
      return cols;
    }
  }
));
  editor.setOutputMarkupId(true);
  editor.setVisible(false);
  editor.add(new EditorAjaxBehavior(){
    private static final long serialVersionUID=1L;
    @Override public void renderHead(    final Component component,    final IHeaderResponse response){
      super.renderHead(component,response);
      AjaxRequestAttributes saveAttributes=getAttributes();
      saveAttributes.getExtraParameters().put("save","true");
      saveAttributes.setMethod(Method.POST);
      saveAttributes.getDynamicExtraParameters().add("this.name+'='+Wicket.Form.encode(this.value)");
      saveAttributes.setEventName("blur");
      AjaxRequestAttributes cancelAttributes=getAttributes();
      cancelAttributes.getExtraParameters().put("save","false");
      cancelAttributes.setEventName("keydown");
      CharSequence saveAttributesJson=renderAjaxAttributes(component,saveAttributes);
      String saveCall="Wicket.Ajax.ajax(" + saveAttributesJson + ")";
      CharSequence cancelAttributesJson=renderAjaxAttributes(component,cancelAttributes);
      String cancelCall="Wicket.Ajax.ajax(" + cancelAttributesJson + ")";
      final String keydown="var kc=Wicket.Event.keyCode(attrs.event); if (kc===27) " + cancelCall + " else if (kc===13) "+ saveCall;
      AjaxRequestTarget target=AjaxRequestTarget.get();
      if (target != null) {
        target.appendJavaScript(saveCall);
        target.appendJavaScript(keydown);
      }
 else {
        response.render(JavaScriptHeaderItem.forScript(saveCall,"editable-blur-" + component.getMarkupId()));
        response.render(JavaScriptHeaderItem.forScript(keydown,"editable-keydown-" + component.getMarkupId()));
      }
    }
  }
);
  return editor;
}
