{
  if (nextIndex == -1 && !parent.isExpanded()) {
    return false;
  }
  if (childCount == 0) {
    return false;
  }
 else   if (++nextIndex >= childCount) {
    return false;
  }
  TreeStateNode child=parent.getChildAtModelIndex(nextIndex);
  if (child != null && child.isExpanded()) {
    parent=child;
    nextIndex=-1;
    childCount=treeModel.getChildCount(child.getUserObject());
  }
  return true;
}
