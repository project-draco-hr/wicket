{
  return new IResourceStream(){
    private static final long serialVersionUID=1L;
    /** 
 * Transient input stream to resource 
 */
    private transient InputStream inputStream=null;
    /** 
 * Transient byte array of the resources, will always be deleted in the close
 */
    private transient byte[] data=null;
    /** 
 * @see wicket.util.resource.IResourceStream#close()
 */
    public void close() throws IOException {
      if (inputStream != null) {
        inputStream.close();
        inputStream=null;
      }
      data=null;
    }
    /** 
 * @see wicket.util.resource.IResourceStream#getContentType()
 */
    public String getContentType(){
      checkLoadData();
      return DynamicByteArrayResource.this.getContentType();
    }
    /** 
 * @see wicket.util.resource.IResourceStream#getInputStream()
 */
    public InputStream getInputStream() throws ResourceStreamNotFoundException {
      checkLoadData();
      if (inputStream == null) {
        inputStream=new ByteArrayInputStream(data);
      }
      return inputStream;
    }
    /** 
 * @see wicket.util.watch.IModifiable#lastModifiedTime()
 */
    public Time lastModifiedTime(){
      checkLoadData();
      return DynamicByteArrayResource.this.lastModifiedTime();
    }
    /** 
 * @see wicket.util.resource.IResourceStream#length()
 */
    public long length(){
      checkLoadData();
      return (data != null) ? data.length : 0;
    }
    /** 
 * @see wicket.util.resource.IResourceStream#getLocale()
 */
    public Locale getLocale(){
      return locale;
    }
    /** 
 * @see wicket.util.resource.IResourceStream#setLocale(java.util.Locale)
 */
    public void setLocale(    Locale loc){
      DynamicByteArrayResource.this.locale=loc;
    }
    /** 
 * Check whether the data was loaded yet. If not, load it now.
 */
    private void checkLoadData(){
      if (data == null) {
        data=getData();
      }
    }
  }
;
}
