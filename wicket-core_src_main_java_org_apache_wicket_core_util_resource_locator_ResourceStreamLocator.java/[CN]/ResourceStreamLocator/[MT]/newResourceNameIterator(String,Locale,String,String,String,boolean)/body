{
  final Iterable<String> extensions;
  final String realPath;
  if ((extension == null) && (path != null) && (path.indexOf('.') != -1)) {
    realPath=Strings.beforeLast(path,'.');
    String realExtension=Strings.afterLast(path,'.');
    if (realExtension.indexOf(',') > -1) {
      return new EmptyResourceNameIterator();
    }
    extensions=Collections.singleton(realExtension);
  }
 else {
    realPath=path;
    if (extension == null) {
      extensions=NO_EXTENSIONS;
    }
 else {
      String[] commaSeparated=Strings.split(extension,',');
      extensions=Arrays.asList(commaSeparated);
    }
  }
  return new ResourceNameIterator(realPath,style,variation,locale,extensions,strict);
}
