{
  List list=(List)storePageMap.get(currentKey.sessionId);
  if (list == null)   return null;
synchronized (list) {
    int index=list.indexOf(currentKey);
    if (index != -1) {
      currentKey=(SessionPageKey)list.get(index);
      Object object=currentKey.data;
      if (object instanceof Page) {
        list.remove(index);
      }
 else       if (object instanceof byte[]) {
        return (byte[])object;
      }
 else       if (object == SERIALIZING) {
        try {
          list.wait();
        }
 catch (        InterruptedException ex) {
          throw new RuntimeException(ex);
        }
        object=currentKey.data;
        if (object instanceof byte[]) {
          return (byte[])object;
        }
 else {
          return null;
        }
      }
    }
 else {
      return null;
    }
  }
synchronized (storePageMap) {
    pagesInMap--;
  }
  byte[] bytes=serializePage(currentKey,(Page)currentKey.data);
  if (bytes != null) {
    currentKey.setObject(bytes);
    list.add(currentKey);
  }
  return bytes;
}
