{
  application.createRenderRequest();
  application.processRenderRequestCycle(application.createRenderRequestCycle());
  application.createActionRequest();
  PortletActionRequestCycle requestCycle=application.createActionRequestCycle();
  MockPortletPage p=(MockPortletPage)application.getLastRenderedPage();
  Link link=(Link)p.get("actionLink");
  application.getPortletRequest().setRequestToComponent(link);
  application.processActionRequestCycle(requestCycle);
  application.createRenderRequest();
  application.processRenderRequestCycle(application.createRenderRequestCycle());
  String document=application.getPortletResponse().getDocument();
  assertTrue(DiffUtil.validatePage(document,this.getClass(),"MockPortletPage_expectedResult2.html"));
  p=(MockPortletPage)application.getLastRenderedPage();
  Assert.assertEquals("Link should have been clicked 1 time",1,p.getLinkClickCount());
}
