{
  RequestCycle cycle=RequestCycle.get();
  if (cycle == null) {
    throw new WicketRuntimeException("Can not set the attribute. No RequestCycle available");
  }
  ISessionStore store=getSessionStore();
  Request request=cycle.getRequest();
  if (value == this) {
    Object current=store.getAttribute(request,name);
    if (current == null) {
      store.bind(request,(Session)value);
    }
  }
  store.setAttribute(request,name,value);
}
