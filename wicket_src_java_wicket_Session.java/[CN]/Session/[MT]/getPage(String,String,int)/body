{
  if (log.isDebugEnabled()) {
    log.debug("Getting page [path = " + path + ", versionNumber = "+ versionNumber+ "]");
  }
  PageMap pageMap=pageMapForName(pageMapName,pageMapName == PageMap.DEFAULT_NAME);
  if (pageMap != null) {
    final String id=Strings.firstPathComponent(path,Component.PATH_SEPARATOR);
    Thread t=(Thread)usedPages.get(id);
    while (t != null && t != Thread.currentThread()) {
      try {
        wait(1000);
      }
 catch (      InterruptedException ex) {
        throw new WicketRuntimeException(ex);
      }
      t=(Thread)usedPages.get(id);
    }
    usedPages.put(id,Thread.currentThread());
    Page page=pageMap.get(Integer.parseInt(id),versionNumber);
    if (page == null) {
      usedPages.remove(id);
      notifyAll();
    }
    return page;
  }
  return null;
}
