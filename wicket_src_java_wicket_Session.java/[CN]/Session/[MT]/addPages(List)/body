{
  for (final Iterator iterator=pageStates.iterator(); iterator.hasNext(); ) {
    final PageState pageState=(PageState)iterator.next();
    if (!pageState.addedToSession) {
      final Page page=pageState.getPage();
      log.debug("addPages(): Adding replicated page state " + pageState + ", which produced page "+ page);
      attach(page);
      Page removed=getPageMap(pageState.pageMapName).put(page);
      if (removed != null) {
        removeAttribute(removed.getId());
      }
      pageState.addedToSession=true;
    }
  }
}
