{
  if (dirty) {
    if (log.isDebugEnabled()) {
      log.debug("updateCluster(): Session is dirty.  Replicating.");
    }
    this.dirty=false;
    setAttribute(SESSION_ATTRIBUTE_NAME,this);
  }
 else {
    if (log.isDebugEnabled()) {
      log.debug("updateCluster(): Session not dirty.");
    }
  }
  for (final Iterator iterator=getAttributeNames().iterator(); iterator.hasNext(); ) {
    final String attribute=(String)iterator.next();
    if (attribute.startsWith(pageSourceAttributePrefix)) {
      IPageSource pageSource=(IPageSource)getAttribute(attribute);
      if (pageSource.isDirty()) {
        pageSource.setDirty(false);
        setAttribute(attribute,pageSource);
      }
    }
  }
}
