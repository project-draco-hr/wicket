{
  if (position == INSERT_HEAD_OPEN) {
    XmlTag headOpenTag=new XmlTag();
    headOpenTag.setName("head");
    headOpenTag.setType(XmlTag.OPEN);
    openTag=new DynamicWicketTag(headOpenTag);
    openTag.setId("head");
    position=INSERT_HEAD_CLOSE;
    return openTag;
  }
 else   if (position == INSERT_HEAD_CLOSE) {
    XmlTag headCloseTag=new XmlTag();
    headCloseTag.setName("head");
    headCloseTag.setType(XmlTag.CLOSE);
    closeTag=new DynamicWicketTag(headCloseTag);
    closeTag.setOpenTag(openTag);
    closeTag.setId("head");
    position=DONE;
    return closeTag;
  }
  final ComponentTag tag=(ComponentTag)getParent().nextTag();
  if (tag == null || position == DONE) {
    return tag;
  }
  final String tagName=tag.getName();
  if (position == NOTHING_FOUND_YET && "html".equals(tagName)) {
    position=HTML_FOUND;
  }
 else   if (position == HTML_FOUND) {
    if (!"head".equals(tagName)) {
      position=INSERT_HEAD_OPEN;
    }
 else {
      position=DONE;
    }
  }
  return tag;
}
