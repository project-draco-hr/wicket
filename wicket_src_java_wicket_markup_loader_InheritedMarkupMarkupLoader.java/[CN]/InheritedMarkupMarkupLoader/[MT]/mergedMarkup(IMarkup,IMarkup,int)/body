{
  MergedMarkup markup=new MergedMarkup(derivedMarkup,baseMarkup);
  if (log.isDebugEnabled()) {
    final String derivedResource=Strings.afterLast(markup.getResource().toString(),'/');
    final String baseResource=Strings.afterLast(baseMarkup.getResource().toString(),'/');
    log.debug("Merge markup: derived markup: " + derivedResource + "; base markup: "+ baseResource);
  }
  merge(markup,derivedMarkup,baseMarkup,extendIndex);
  if (log.isDebugEnabled()) {
    log.debug("Merge markup: " + markup.toDebugString());
  }
  return markup;
}
