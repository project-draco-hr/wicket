{
  IntKeyWeakReference ref=null;
  while ((ref=(IntKeyWeakReference)queue.poll()) != null) {
    directComponentRefs.remove(ref.uid);
  }
  s.defaultWriteObject();
  s.writeInt(directComponentRefs.size());
  Iterator<IntHashMap.Entry<ComponentAndInterface>> it=directComponentRefs.entrySet().iterator();
  while (it.hasNext()) {
    IntHashMap.Entry<ComponentAndInterface> entry=it.next();
    s.writeInt(entry.getKey());
    ComponentAndInterface cai=entry.getValue();
    s.writeObject(cai.getComponent());
    s.writeUTF(cai.getInterfaceName());
  }
}
