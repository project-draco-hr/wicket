{
  if (resourceKind == null && (!Objects.equal(locale,component.getLocale()) || !Objects.equal(style,component.getStyle()))) {
    this.locale=component.getLocale();
    this.style=component.getStyle();
    this.resourceReference=null;
    this.resource=null;
  }
 else {
  }
  Object modelObject=component.getModelObject();
  if (modelObject instanceof ResourceReference) {
    resourceReference=(ResourceReference)modelObject;
  }
 else   if (modelObject instanceof Resource) {
    resource=(Resource)modelObject;
  }
  if (resource == null && resourceReference == null) {
    final CharSequence src=tag.getString("src");
    if (src != null) {
      loadStaticImage(src.toString());
    }
 else {
      final CharSequence value=tag.getString("value");
      if (value != null) {
        newImage(value);
      }
 else {
        loadStaticImage(component.getModelObjectAsString());
      }
    }
  }
  final CharSequence url;
  if (this.resourceReference != null) {
    url=RequestCycle.get().urlFor(resourceReference,resourceParameters);
  }
 else {
    url=component.urlFor(IResourceListener.INTERFACE);
  }
  tag.put("src",RequestCycle.get().getOriginalResponse().encodeURL(url));
}
