{
  tester.startPage(EmailPage.class);
  assertEquals(EmailPage.class,tester.getLastRenderedPage().getClass());
  EmailPage page=(EmailPage)tester.getLastRenderedPage();
  FormTester formTester=tester.newFormTester("form");
  formTester.setValue("email","a");
  formTester.submit();
  assertEquals(EmailPage.class,tester.getLastRenderedPage().getClass());
  page=(EmailPage)tester.getLastRenderedPage();
  assertNull(page.getEmail());
  assertTrue(Session.get().getFeedbackMessages().hasMessageFor(page.get("form:email")));
  assertEquals("wrong email address pattern for email",Session.get().getFeedbackMessages().messageForComponent(page.get("form:email")).getMessage().toString());
}
