{
  oldThreadContext=ThreadContext.detach();
  this.application=application;
  this.application.setName("WicketTesterApplication-" + UUID.randomUUID());
  this.application.set();
  this.application.initApplication();
  session=new MockSession(new MockWebRequest(Url.parse("/")));
  getApplication().getSessionStore().bind(null,session);
  ThreadContext.setSession(session);
  setupNextRequestCycle();
}
