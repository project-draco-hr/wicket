{
  request=new MockWebRequest(Url.parse("/"));
  response=new MockWebResponse();
  requestCycle=application.createRequestCycle(request,response);
  requestCycle.setCleanupFeedbackMessagesOnDetach(false);
  ThreadContext.setRequestCycle(requestCycle);
  if (session == null) {
    createNewSession();
  }
}
