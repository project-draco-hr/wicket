{
  if (!isActionAuthorized(RENDER)) {
    if (log.isDebugEnabled()) {
      log.debug("Page not allowed to render: " + this);
    }
    throw new UnauthorizedActionException(this,Component.RENDER);
  }
  renderedComponents=null;
  if (Boolean.TRUE.equals(stateless)) {
    stateless=null;
  }
  setFormComponentValuesFromCookies();
  try {
    prepareForRender();
  }
 catch (  RuntimeException e) {
    try {
      afterRender();
    }
 catch (    RuntimeException e2) {
    }
    throw e;
  }
  try {
    render(null);
  }
  finally {
    afterRender();
  }
  checkRendering(this);
  if (Application.get().getDebugSettings().getComponentUseCheck()) {
    visitChildren(new IVisitor<Component<?>>(){
      public Object component(      Component<?> component){
        component.setMetaData(Component.CONSTRUCTED_AT_KEY,null);
        component.setMetaData(Component.ADDED_AT_KEY,null);
        return CONTINUE_TRAVERSAL;
      }
    }
);
  }
  if (!isPageStateless()) {
    Session.get().getSessionStore().getSessionId(RequestCycle.get().getRequest(),true);
    getSession().touch(this);
  }
}
