{
  try {
    Date dateFieldInput=dateField.getConvertedInput();
    Integer hoursInput=hoursField.getConvertedInput();
    Integer minutesInput=minutesField.getConvertedInput();
    AM_PM amOrPmInput=amOrPmChoice.getConvertedInput();
    if (dateFieldInput == null) {
      return;
    }
    final LocalDate localDate=new LocalDate(dateFieldInput);
    int year=localDate.getYear();
    int month=localDate.getMonthOfYear();
    int day=localDate.getDayOfMonth();
    int hours=(hoursInput == null ? 0 : hoursInput % 24);
    int minutes=(minutesInput == null ? 0 : minutesInput);
    MutableDateTime date=new MutableDateTime(year,month,day,hours,minutes,0,0,DateTimeZone.forTimeZone(getClientTimeZone()));
    if (use12HourFormat()) {
      int halfday=(amOrPmInput == AM_PM.PM ? 1 : 0);
      date.set(DateTimeFieldType.halfdayOfDay(),halfday);
      date.set(DateTimeFieldType.hourOfHalfday(),hours % 12);
    }
    setConvertedInput(new Date(date.getMillis()));
  }
 catch (  RuntimeException e) {
    DateTimeField.this.error(e.getMessage());
    invalid();
  }
}
