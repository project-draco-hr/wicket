{
  application.mount("/test1",new IndexedParamUrlCodingStrategy("/test1",BookmarkableHomePageLinksPage.class,null));
  application.mount("/test2",new IndexedParamUrlCodingStrategy("/test2",BookmarkableHomePageLinksPage.class,"mypagemap"));
  application.setupRequestAndResponse();
  WebRequestCycle cycle=application.createRequestCycle();
  PageParameters parameters=new PageParameters();
  parameters.add("0","Integer0");
  parameters.add("1","Integer1");
  String url1=cycle.urlFor(new BookmarkablePageRequestTarget(BookmarkableHomePageLinksPage.class,parameters)).toString();
  assertEquals(url1,"test1/Integer0/Integer1");
  String url2=cycle.urlFor(new BookmarkablePageRequestTarget("mypagemap",BookmarkableHomePageLinksPage.class,parameters)).toString();
  assertEquals(url2,"test2/Integer0/Integer1/wicket:pageMapName/mypagemap");
  application.setupRequestAndResponse();
  application.getServletRequest().setURL("/WicketTester/WicketTester/" + url1);
  cycle=application.createRequestCycle();
  IRequestCodingStrategy encoder=cycle.getProcessor().getRequestCodingStrategy();
  RequestParameters requestParameters=encoder.decode(application.getWicketRequest());
  IRequestTarget target1=cycle.getProcessor().resolve(cycle,requestParameters);
  if (target1 instanceof BookmarkablePageRequestTarget) {
    assertNull(((BookmarkablePageRequestTarget)target1).getPageMapName());
  }
 else {
    fail("url: " + url1 + " wasn't resolved to a bookmarkable target: "+ target1);
  }
  application.setupRequestAndResponse();
  application.getServletRequest().setURL("/WicketTester/WicketTester/" + url2);
  cycle=application.createRequestCycle();
  encoder=cycle.getProcessor().getRequestCodingStrategy();
  requestParameters=encoder.decode(application.getWicketRequest());
  IRequestTarget target2=cycle.getProcessor().resolve(cycle,requestParameters);
  if (target2 instanceof BookmarkablePageRequestTarget) {
    assertEquals(((BookmarkablePageRequestTarget)target2).getPageMapName(),"mypagemap");
  }
 else {
    fail("url: " + url2 + " wasn't resolved to a bookmarkable target: "+ target2);
  }
}
