{
  if (parameters.size() == 0) {
    return null;
  }
 else {
    final StringBuffer buf=new StringBuffer();
    for (Iterator<String> iterator=parameters.keySet().iterator(); iterator.hasNext(); ) {
      final String name=iterator.next();
      final String value=getParameter(name);
      if (name != null) {
        buf.append(WicketURLEncoder.QUERY_INSTANCE.encode(name,Charset.forName(getCharacterEncoding())));
      }
      buf.append('=');
      if (value != null) {
        buf.append(WicketURLEncoder.QUERY_INSTANCE.encode(value,Charset.forName(getCharacterEncoding())));
      }
      if (iterator.hasNext()) {
        buf.append('&');
      }
    }
    return buf.toString();
  }
}
