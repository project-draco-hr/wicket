{
  final String url=getURL().replaceAll("&","&amp;");
  PopupSpecification popupSpecification=getPopupSpecification();
  if (popupSpecification != null) {
    PopupSpecification spec=new PopupSpecification(popupSpecification){
      public String getTarget(){
        return "'" + url + "'";
      }
    }
;
    String popupScript=spec.getPopupJavaScript();
    popupScript=popupScript.replaceAll("&","&amp;");
    tag.put("onclick",popupScript);
  }
 else {
    tag.put("onclick","location.href='" + url + "';");
  }
}
