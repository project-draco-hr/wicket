{
  PageB b=new PageB("test");
  PageA a=new PageA(b);
  b.setA(a);
  woos.writeObject(a);
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  WicketObjectInputStream wois=new WicketObjectInputStream(bais);
  PageA a2=(PageA)wois.readObject();
  Assert.assertEquals(a,a2);
  Assert.assertSame(a2,a2.getB().getA());
  Objects.setObjectStreamFactory(new DefaultObjectStreamFactory());
  byte[] array=Objects.objectToByteArray(a);
  PageA aa=(PageA)Objects.byteArrayToObject(array);
  Assert.assertEquals(a,aa);
  Assert.assertSame(aa,aa.getB().getA());
}
