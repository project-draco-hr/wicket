{
  Url url=Url.parse("some/p1/path/p2/indexed1?a=b&b=c");
  IRequestHandler handler=placeholderEncoder.mapRequest(getRequest(url));
  assertTrue(handler instanceof RenderPageRequestHandler);
  IRequestablePage page=((RenderPageRequestHandler)handler).getPage();
  PageParametersNg p=page.getPageParametersNg();
  assertEquals(1,p.getIndexedParamsCount());
  assertEquals("indexed1",p.getIndexedParameter(0).toString());
  assertEquals(4,p.getNamedParameterKeys().size());
  assertEquals("b",p.getNamedParameter("a").toString());
  assertEquals("c",p.getNamedParameter("b").toString());
  assertEquals("p1",page.getPageParametersNg().getNamedParameter("param1").toString());
  assertEquals("p2",page.getPageParametersNg().getNamedParameter("param2").toString());
}
