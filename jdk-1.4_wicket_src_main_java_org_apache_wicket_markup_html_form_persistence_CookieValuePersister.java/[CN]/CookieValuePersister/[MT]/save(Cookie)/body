{
  if (cookie == null) {
    return null;
  }
 else {
    final String comment=getSettings().getComment();
    if (comment != null) {
      cookie.setComment(comment);
    }
    final String domain=getSettings().getDomain();
    if (domain != null) {
      cookie.setDomain(domain);
    }
    cookie.setPath(getWebRequest().getHttpServletRequest().getContextPath());
    cookie.setVersion(getSettings().getVersion());
    cookie.setSecure(getSettings().getSecure());
    getWebResponse().addCookie(cookie);
    if (log.isDebugEnabled()) {
      log.debug("saved: " + cookieToDebugString(cookie));
    }
    return cookie;
  }
}
