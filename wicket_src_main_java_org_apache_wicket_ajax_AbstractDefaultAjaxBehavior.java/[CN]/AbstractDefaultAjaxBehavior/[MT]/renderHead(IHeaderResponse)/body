{
  final IDebugSettings debugSettings=Application.get().getDebugSettings();
  response.renderJavascriptReference(WicketEventReference.INSTANCE);
  response.renderJavascriptReference(WicketAjaxReference.INSTANCE);
  if (debugSettings.isAjaxDebugModeEnabled()) {
    response.renderJavascriptReference(JAVASCRIPT_DEBUG);
    response.renderJavascript("wicketAjaxDebugEnable=true;","wicket-ajax-debug-enable");
  }
  response.renderJavascript("Wicket.Ajax.baseUrl=\"" + RequestCycle.get().getUrlRenderer().getBaseUrl() + "\";","wicket-ajax-base-url");
  RequestContext context=RequestContext.get();
  if (context.isPortletRequest()) {
    response.renderJavascript("Wicket.portlet=true","wicket-ajax-portlet-flag");
  }
}
