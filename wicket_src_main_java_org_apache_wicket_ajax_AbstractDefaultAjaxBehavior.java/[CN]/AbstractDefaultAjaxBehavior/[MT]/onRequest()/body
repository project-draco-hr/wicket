{
  WebApplication app=(WebApplication)getComponent().getApplication();
  AjaxRequestTarget target=app.newAjaxRequestTarget(getComponent().getPage());
  RequestCycle requestCycle=RequestCycle.get();
  requestCycle.scheduleRequestHandlerAfterCurrent(target);
  Url oldBaseURL=requestCycle.getUrlRenderer().getBaseUrl();
  WebRequest request=(WebRequest)requestCycle.getRequest();
  Url baseURL=Url.parse(request.getAjaxBaseUrl(),request.getCharset());
  requestCycle.getUrlRenderer().setBaseUrl(baseURL);
  respond(target);
  requestCycle.getUrlRenderer().setBaseUrl(oldBaseURL);
}
