{
  final String originalHref=tag.getAttributes().getString("href");
  final int pos=originalHref.indexOf(".html");
  if (pos <= 0) {
    markupStream.throwMarkupException("Expected to find '*.html' in href: " + originalHref);
  }
  String classPath=originalHref.substring(0,pos);
  PageParameters pageParameters=null;
  if ((classPath.length() + 6) < originalHref.length()) {
    String queryString=originalHref.substring(classPath.length() + 6);
    pageParameters=new PageParameters(new ValueMap(queryString,"&"));
  }
  classPath=classPath.replaceAll("/",".");
  classPath=page.getClass().getPackage().getName() + "." + classPath;
  Class clazz=page.getApplicationSettings().getDefaultClassResolver().resolveClass(classPath);
  final String id=componentName + page.getAutoIndex();
  return new BookmarkablePageLink(id,clazz,pageParameters);
}
