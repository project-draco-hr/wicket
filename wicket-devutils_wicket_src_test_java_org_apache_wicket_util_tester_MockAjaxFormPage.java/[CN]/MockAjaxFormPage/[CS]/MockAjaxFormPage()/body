{
  Form form=new Form("form",new CompoundPropertyModel(new MockDomainObject()));
  add(form);
  final Button submit=new Button("submit");
  submit.setOutputMarkupId(true);
  submit.setEnabled(false);
  form.add(submit);
  final TextField text=new TextField("text");
  text.setRequired(true);
  text.add(StringValidator.minimumLength(4));
  text.add(new AjaxFormValidatingBehavior(form,"onkeyup"){
    private static final long serialVersionUID=1L;
    protected void onEvent(    AjaxRequestTarget target){
      text.validate();
      submit.setEnabled(text.isValid());
      target.addComponent(submit);
    }
  }
);
  form.add(text);
}
