{
  try {
    oos.writeObject(obj);
  }
 catch (  NotSerializableException nsx) {
    if (CheckingObjectOutputStream.isAvailable()) {
      CheckingObjectOutputStream checkingObjectOutputStream=new CheckingObjectOutputStream(outputStream,new ObjectSerializationChecker(nsx));
      checkingObjectOutputStream.writeObject(obj);
      throw nsx;
    }
    throw nsx;
  }
catch (  Exception e) {
    log.error("error writing object " + obj + ": "+ e.getMessage(),e);
    throw new WicketRuntimeException(e);
  }
}
