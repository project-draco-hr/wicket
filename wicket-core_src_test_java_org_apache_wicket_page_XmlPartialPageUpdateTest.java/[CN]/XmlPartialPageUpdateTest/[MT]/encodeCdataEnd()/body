{
  PageForPartialUpdate page=new PageForPartialUpdate();
  XmlPartialPageUpdate update=new XmlPartialPageUpdate(page);
  update.add(page.container,page.container.getMarkupId());
  MockWebResponse response=new MockWebResponse();
  update.writeTo(response,"UTF-8");
  assertEquals("<?xml version=\"1.0\" encoding=\"UTF-8\"?><ajax-response><component id=\"container1\" ><![CDATA[<span wicket:id=\"container\" id=\"container1\"> two brackets: ]] greater than: > CDATA end: ]]]]><![CDATA[> </span>]]></component></ajax-response>",response.getTextResponse().toString());
}
