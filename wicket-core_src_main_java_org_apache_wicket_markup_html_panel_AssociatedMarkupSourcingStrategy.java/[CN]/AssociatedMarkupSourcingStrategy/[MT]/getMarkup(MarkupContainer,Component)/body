{
  Args.notNull(tagName,"tagName");
  IMarkupFragment associatedMarkup=parent.getAssociatedMarkup();
  if (associatedMarkup == null) {
    throw new MarkupNotFoundException("Failed to find markup file associated. " + parent.getClass().getSimpleName() + ": "+ parent.toString());
  }
  IMarkupFragment markup=findStartTag(associatedMarkup);
  if (markup == null) {
    throw new MarkupNotFoundException("Expected to find <wicket:" + tagName + "> in associated markup file. Markup: "+ associatedMarkup.toString());
  }
  if (child == null) {
    return markup;
  }
  associatedMarkup=markup.find(child.getId());
  if (associatedMarkup != null) {
    return associatedMarkup;
  }
  return findMarkupInAssociatedFileHeader(parent,child);
}
