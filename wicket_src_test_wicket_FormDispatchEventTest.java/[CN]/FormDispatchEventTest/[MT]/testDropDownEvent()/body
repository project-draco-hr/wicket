{
  MockPage page=new MockPage();
  MyForm form=new MyForm(page,"form");
  DropDownChoice dropDown=new DropDownChoice(form,"dropdown",new Model(),new ArrayList()){
    private static final long serialVersionUID=1L;
    protected void onSelectionChanged(    Object newSelection){
      selection=true;
    }
    /** 
 * @see wicket.markup.html.form.DropDownChoice#wantOnSelectionChangedNotifications()
 */
    protected boolean wantOnSelectionChangedNotifications(){
      return true;
    }
  }
;
  form.add(dropDown);
  page.add(form);
  application.setupRequestAndResponse();
  RequestCycle cycle=application.createRequestCycle();
  page.urlFor(IRedirectListener.INTERFACE);
  cycle.getSession().touch(page);
  cycle.getSession().update();
  form.onFormSubmitted();
  assertTrue("form should should set value ",submit);
  application.getServletRequest().setParameter(form.getHiddenField(Form.HIDDEN_FIELD_FAKE_SUBMIT),dropDown.urlFor(IOnChangeListener.INTERFACE).toString());
  form.onFormSubmitted();
  assertTrue("Selection should be called",selection);
}
