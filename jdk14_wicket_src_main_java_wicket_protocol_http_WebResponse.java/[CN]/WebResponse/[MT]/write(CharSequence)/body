{
  if (string instanceof AppendingStringBuffer) {
    write((AppendingStringBuffer)string);
  }
 else   if (string instanceof StringBuffer) {
    try {
      StringBuffer sb=(StringBuffer)string;
      char[] array=new char[sb.length()];
      sb.getChars(0,sb.length(),array,0);
      httpServletResponse.getWriter().write(array,0,array.length);
    }
 catch (    IOException e) {
      throw new WicketRuntimeException("Error while writing to servlet output writer.",e);
    }
  }
 else {
    try {
      httpServletResponse.getWriter().write(string.toString());
    }
 catch (    IOException e) {
      throw new WicketRuntimeException("Error while writing to servlet output writer.",e);
    }
  }
}
