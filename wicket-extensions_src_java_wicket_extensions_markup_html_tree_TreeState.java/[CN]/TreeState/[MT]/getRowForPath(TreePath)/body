{
  if (path == null || root == null) {
    return -1;
  }
  TreeStateNode node=getNodeForPath(path,true,false);
  if (node != null) {
    return node.getRow();
  }
  TreePath parentPath=path.getParentPath();
  node=getNodeForPath(parentPath,true,false);
  if (node != null && node.isExpanded()) {
    return node.getRowToModelIndex(treeModel.getIndexOfChild(parentPath.getLastPathComponent(),path.getLastPathComponent()));
  }
  return -1;
}
