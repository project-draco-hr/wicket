{
  if (selected != null) {
    tree.updateNode(selected.getObject(),target);
    selected.detach();
    selected=null;
  }
  selected=provider.model(foo);
  tree.updateNode(foo,target);
}
