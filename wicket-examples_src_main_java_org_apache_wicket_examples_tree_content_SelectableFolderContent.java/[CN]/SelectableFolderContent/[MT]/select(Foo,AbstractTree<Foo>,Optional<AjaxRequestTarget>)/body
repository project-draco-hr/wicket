{
  if (selected != null) {
    tree.updateNode(selected.getObject(),targetOptional);
    selected.detach();
    selected=null;
  }
  selected=provider.model(foo);
  tree.updateNode(foo,targetOptional);
}
