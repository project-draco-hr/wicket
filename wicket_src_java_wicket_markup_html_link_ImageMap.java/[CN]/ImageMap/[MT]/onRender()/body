{
  final MarkupStream markupStream=findMarkupStream();
  final ComponentTag tag=markupStream.getTag().mutable();
  checkComponentTag(tag,"img");
  tag.put("usemap","#" + getPath());
  renderComponentTag(tag);
  markupStream.next();
  final StringBuffer imageMap=new StringBuffer();
  imageMap.append("\n<map name=\"" + getPath() + "\"> ");
  for (Iterator iterator=shapeLinks.iterator(); iterator.hasNext(); ) {
    final ShapeLink shapeLink=(ShapeLink)iterator.next();
    imageMap.append('\n');
    imageMap.append(shapeLink.toString());
    shapeLink.link.rendered();
  }
  imageMap.append("\n</map>");
  getResponse().write(imageMap.toString());
}
