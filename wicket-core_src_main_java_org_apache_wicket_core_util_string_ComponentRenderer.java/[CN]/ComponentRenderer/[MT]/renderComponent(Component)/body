{
  RequestCycle requestCycle=RequestCycle.get();
  final Response originalResponse=requestCycle.getResponse();
  BufferedWebResponse tempResponse=new BufferedWebResponse(null);
  MarkupContainer oldParent=component.getParent();
  try {
    requestCycle.setResponse(tempResponse);
    if (component.getParent() == null) {
      RenderPage page=new RenderPage(component);
      page.internalInitialize();
    }
    component.render();
  }
  finally {
    if (oldParent != null) {
      oldParent.add(component);
    }
    requestCycle.setResponse(originalResponse);
  }
  return tempResponse.getText();
}
