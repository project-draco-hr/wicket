{
  Args.notNull(child,"child");
  MarkupContainer parent=child.getParent();
  if (parent != null) {
    parent.remove(child);
  }
  child.setParent(this);
  final IDebugSettings debugSettings=Application.get().getDebugSettings();
  if (debugSettings.isLinePreciseReportingOnAddComponentEnabled()) {
    child.setMetaData(ADDED_AT_KEY,ComponentStrings.toString(child,new MarkupException("added")));
  }
  final Page page=findPage();
  if (page != null) {
    page.componentAdded(child);
    if (page.isInitialized()) {
      child.internalInitialize();
    }
  }
  if (isPreparedForRender()) {
    child.beforeRender();
  }
}
