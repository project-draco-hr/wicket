{
  if (!(this instanceof IQueueRegion)) {
    throw new UnsupportedOperationException("Only implementations of IQueueRegion can use component queueing");
  }
  if (getRequestFlag(RFLAG_CONTAINER_DEQUEING)) {
    throw new IllegalStateException("This container is already dequeing: " + this);
  }
  setRequestFlag(RFLAG_CONTAINER_DEQUEING,true);
  try {
    IMarkupFragment markup=getDequeueMarkup();
    if (markup == null) {
      return;
    }
    DequeueContext dequeue=new DequeueContext(markup,this);
    if (dequeue.peekTag() != null) {
      dequeue(dequeue);
    }
  }
  finally {
    setRequestFlag(RFLAG_CONTAINER_DEQUEING,false);
  }
}
