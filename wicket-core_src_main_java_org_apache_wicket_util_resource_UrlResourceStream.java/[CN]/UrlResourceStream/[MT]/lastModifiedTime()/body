{
  try {
    StreamData data=getData(true);
    final Time lastModified;
    if (file != null) {
      lastModified=IOUtils.getLastModified(file);
    }
 else {
      lastModified=Connections.getLastModified(url);
    }
    if (Objects.equal(lastModified,data.lastModified) == false) {
      data.lastModified=lastModified;
      setContentLength();
    }
    return data.lastModified;
  }
 catch (  IOException e) {
    if (url.toString().contains(".jar!")) {
      if (log.isDebugEnabled()) {
        log.debug("getLastModified for " + url + " failed: "+ e.getMessage());
      }
    }
 else {
      log.warn("getLastModified for " + url + " failed: "+ e.getMessage());
    }
    return null;
  }
}
