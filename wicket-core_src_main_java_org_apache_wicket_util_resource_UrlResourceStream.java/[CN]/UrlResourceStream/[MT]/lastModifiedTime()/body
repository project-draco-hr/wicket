{
  try {
    StreamData data=getData(true);
    if (file != null) {
      if (file.exists() == false) {
        return null;
      }
      long lastModified=file.lastModified();
      if (lastModified != data.lastModified) {
        data.lastModified=lastModified;
        setContentLength();
      }
    }
 else {
      long lastModified=Connections.getLastModified(url);
      if (lastModified != data.lastModified) {
        data.lastModified=lastModified;
        setContentLength();
      }
    }
    return Time.milliseconds(data.lastModified);
  }
 catch (  IOException e) {
    if (url.toString().contains(".jar!")) {
      if (log.isDebugEnabled()) {
        log.debug("getLastModified for " + url + " failed: "+ e.getMessage());
      }
    }
 else {
      log.warn("getLastModified for " + url + " failed: "+ e.getMessage());
    }
    return null;
  }
}
