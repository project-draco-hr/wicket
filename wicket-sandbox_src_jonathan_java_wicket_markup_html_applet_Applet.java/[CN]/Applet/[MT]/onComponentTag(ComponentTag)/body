{
  checkComponentTag(tag,"applet");
  tag.put("code",HostApplet.class.getName());
  final String jarName=appletClass.getName() + ".jar";
  final ResourceReference jarResourceReference=new ResourceReference(jarName){
    protected Resource newResource(){
      final JarResourceFactory factory=new JarResourceFactory();
      factory.addClassClosures(classes);
      return factory.getResource();
    }
  }
;
  final String jarResourceUrl=getRequestCycle().urlFor(jarResourceReference);
  final String codebase=Strings.beforeLastPathComponent(jarResourceUrl,'/') + '/';
  tag.put("codebase",codebase);
  tag.put("archive",jarName);
  tag.put("name",getPageRelativePath().replace(':','_'));
  final int width=getWidth();
  if (width != -1) {
    tag.put("width",width);
  }
  final int height=getHeight();
  if (height != -1) {
    tag.put("height",height);
  }
  tag.setType(XmlTag.OPEN);
  super.onComponentTag(tag);
}
