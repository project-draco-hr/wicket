{
  final WebRequest webRequest=((WebRequest)getRequest()).newMultipartWebRequest(Bytes.MAX);
  getRequestCycle().setRequest(webRequest);
  final FileItem item=((IMultipartWebRequest)webRequest).getFile("model");
  try {
    final InputStream in=item.getInputStream();
    try {
      final Object model=new ObjectInputStream(in).readObject();
      System.out.println("Setting model to " + model);
      setAppletModel(model);
      setRedirect(false);
    }
  finally {
      in.close();
    }
  }
 catch (  ClassNotFoundException e) {
    ((WebResponse)getResponse()).setHeader("STATUS","417");
  }
catch (  IOException e) {
    ((WebResponse)getResponse()).setHeader("STATUS","417");
  }
}
