{
  super.onComponentTag(tag);
  CharSequence url=getURL();
  if (!isEnabled()) {
    if (tag.getName().equalsIgnoreCase("a") || tag.getName().equalsIgnoreCase("link") || tag.getName().equalsIgnoreCase("area")) {
      tag.setName("span");
      tag.remove("href");
      if (popupSettings != null) {
        tag.remove("onclick");
      }
    }
 else {
      tag.remove("onclick");
    }
  }
 else {
    if (tag.getName().equalsIgnoreCase("a") || tag.getName().equalsIgnoreCase("link") || tag.getName().equalsIgnoreCase("area")) {
      tag.put("href",Strings.replaceAll(url,"&","&amp;"));
      if (popupSettings != null) {
        tag.put("onclick",popupSettings.getPopupJavaScript());
      }
    }
 else {
      if (popupSettings != null) {
        popupSettings.setTarget("'" + url + "'");
        String popupScript=popupSettings.getPopupJavaScript();
        tag.put("onclick",popupScript);
      }
 else {
        tag.put("onclick","location.href='" + url + "';");
      }
    }
  }
  final CharSequence onClickJavaScript=getOnClickScript(url);
  if (onClickJavaScript != null) {
    tag.put("onclick",onClickJavaScript);
  }
}
