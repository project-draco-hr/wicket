{
  MarkupFragment markup=super.loadMarkup(container,markupResourceStream);
  final MarkupFragment extendFragment=requiresBaseMarkup(markup);
  if (extendFragment != null) {
    final MarkupFragment baseMarkup=getBaseMarkup(container,markup);
    if (log.isDebugEnabled()) {
      final String derivedResource=Strings.afterLast(markup.getMarkup().getResource().toString(),'/');
      final String baseResource=Strings.afterLast(baseMarkup.getMarkup().getResource().toString(),'/');
      log.debug("Merge markup: derived markup: " + derivedResource + "; base markup: "+ baseResource);
    }
    markup=merge(markup,baseMarkup,extendFragment);
    markup.makeImmutable();
    if (log.isDebugEnabled()) {
      log.debug("Merged markup: " + markup.toString());
    }
  }
  return markup;
}
