{
  final Response response=requestCycle.getResponse();
  response.setContentType(contentType);
  final StringBufferResourceStream stream=new StringBufferResourceStream(contentType);
  stream.setCharset(charset);
  stream.append(string);
  try {
    final OutputStream out=response.getOutputStream();
    try {
      Streams.copy(stream.getInputStream(),out);
    }
  finally {
      stream.close();
      out.flush();
    }
  }
 catch (  Exception e) {
    throw new WicketRuntimeException("Unable to render resource stream " + stream,e);
  }
}
