{
  final List<Component<?>> sorted;
  if (children == null) {
    sorted=Collections.emptyList();
  }
 else {
    if (children instanceof Component) {
      sorted=new ArrayList<Component<?>>(1);
      sorted.add((Component<?>)children);
    }
 else     if (children instanceof ChildList) {
      sorted=new ArrayList((ChildList)children);
    }
 else {
      sorted=Arrays.asList((Component<?>[])children);
    }
  }
  Collections.sort(sorted,comparator);
  return sorted.iterator();
}
