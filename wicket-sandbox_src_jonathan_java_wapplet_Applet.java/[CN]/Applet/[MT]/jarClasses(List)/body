{
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  try {
    final JarOutputStream jar=new JarOutputStream(out);
    new ClassClosure(classes,false){
      protected void addClass(      final String name,      final InputStream is){
        System.out.println("JAR: Added " + name);
        ZipEntry entry=new ZipEntry(name + ".class");
        try {
          jar.putNextEntry(entry);
          Streams.copy(is,jar);
          jar.closeEntry();
        }
 catch (        IOException e) {
          throw new WicketRuntimeException(e);
        }
      }
    }
;
    System.out.println("JAR: Size is " + Bytes.bytes(out.size()));
    jar.close();
    out.close();
  }
 catch (  IOException e) {
    throw new WicketRuntimeException(e);
  }
  return out.toByteArray();
}
